(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[398],{2067:e=>{"use strict";e.exports=require("node:async_hooks")},6195:e=>{"use strict";e.exports=require("node:buffer")},1913:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ComponentMod:()=>j,default:()=>I});var r={};a.r(r),a.d(r,{GET:()=>m,POST:()=>b,preferredRegion:()=>O,runtime:()=>x});var o={};a.r(o),a.d(o,{headerHooks:()=>v,originalPathname:()=>y,patchFetch:()=>R,requestAsyncStorage:()=>E,routeModule:()=>P,serverHooks:()=>_,staticGenerationAsyncStorage:()=>T,staticGenerationBailout:()=>w});var n=a(7875),s=a(8381),i=a(2251),u=a(9845),p=a(9579),d=a(7736),l=a(1480),h=a(572),c=a(5577),f=a(6718);let g=new Set(Object.values(d.mX));async function k(e,{params:t}){if(console.log("[OpenAI Route] params ",t),"OPTIONS"===e.method)return h.xk.json({body:"OK"},{status:200});let a=t.path.join("/");if(!g.has(a))return console.log("[OpenAI Route] forbidden path ",a),h.xk.json({error:!0,msg:"you are not allowed to request "+a},{status:403});let r=(0,c.I)(e,d.k8.GPT);if(r.error)return h.xk.json(r,{status:401});try{let t=await (0,f.L)(e);if(a===d.mX.ListModelPath&&200===t.status){var o;let e=(o=await t.json(),(0,p.g)().disableGPT4&&(o.data=o.data.filter(e=>!e.id.startsWith("gpt-4"))),o);return h.xk.json(e,{status:t.status})}return t}catch(e){return console.error("[OpenAI] ",e),h.xk.json((0,l.B)(e))}}let m=k,b=k,x="edge",O=["arn1","bom1","cdg1","cle1","cpt1","dub1","fra1","gru1","hnd1","iad1","icn1","kix1","lhr1","pdx1","sfo1","sin1","syd1"],P=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/openai/[...path]/route",pathname:"/api/openai/[...path]",filename:"route",bundlePath:"app/api/openai/[...path]/route"},resolvedPagePath:"/Volumes/D/github/ChatGPT-Next-Web/app/api/openai/[...path]/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:E,staticGenerationAsyncStorage:T,serverHooks:_,headerHooks:v,staticGenerationBailout:w}=P,y="/api/openai/[...path]/route";function R(){return(0,u.XH)({serverHooks:_,staticGenerationAsyncStorage:T})}let j=o,I=n.a.wrap(P)}},e=>{var t=t=>e(e.s=t);e.O(0,[297,45,344],()=>t(1913));var a=e.O();(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_app/api/openai/[...path]/route"]=a}]);
//# sourceMappingURL=route.js.map