(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[481],{2067:e=>{"use strict";e.exports=require("node:async_hooks")},6195:e=>{"use strict";e.exports=require("node:buffer")},4119:(e,t,o)=>{"use strict";o.r(t),o.d(t,{ComponentMod:()=>U,default:()=>C});var a={};o.r(a),o.d(a,{GET:()=>g,OPTIONS:()=>E,PUT:()=>m,runtime:()=>A});var r={};o.r(r),o.d(r,{headerHooks:()=>y,originalPathname:()=>I,patchFetch:()=>T,requestAsyncStorage:()=>f,routeModule:()=>_,serverHooks:()=>b,staticGenerationAsyncStorage:()=>P,staticGenerationBailout:()=>O});var s=o(7875),n=o(8381),p=o(2251),i=o(9845),d=o(572),u=o(7736);let c=(0,o(9579).g)(),l=[...u.NU,...c.allowedWebDevEndpoints].filter(e=>!!e.trim()),h=e=>{try{return new URL(e)}catch(e){return null}};async function v(e,{params:t}){let o;if("OPTIONS"===e.method)return d.xk.json({body:"OK"},{status:200});let a=u.Uf,r=`${a}/backup.json`,s=new URL(e.url).searchParams.get("endpoint");if(!s||!l.some(e=>{let t=h(e),o=h(s);return o&&o.hostname===t?.hostname&&o.pathname.startsWith(t.pathname)}))return d.xk.json({error:!0,msg:"Invalid endpoint"},{status:400});s?.endsWith("/")||(s+="/");let n=t.path.join("/"),p=`${s}${n}`;if("MKCOL"!==e.method&&"GET"!==e.method&&"PUT"!==e.method||"MKCOL"===e.method&&!p.endsWith(a)||"GET"===e.method&&!p.endsWith(r)||"PUT"===e.method&&!p.endsWith(r))return d.xk.json({error:!0,msg:"you are not allowed to request "+p},{status:403});let i=e.method,c=["get","head"].includes(i?.toLowerCase()??""),v={headers:{authorization:e.headers.get("authorization")??""},body:c?null:e.body,redirect:"manual",method:i,duplex:"half"};try{o=await fetch(p,v)}finally{console.log("[Any Proxy]",p,{method:e.method},{status:o?.status,statusText:o?.statusText})}return o}let m=v,g=v,E=v,A="edge",_=new n.AppRouteRouteModule({definition:{kind:p.x.APP_ROUTE,page:"/api/webdav/[...path]/route",pathname:"/api/webdav/[...path]",filename:"route",bundlePath:"app/api/webdav/[...path]/route"},resolvedPagePath:"/Volumes/D/github/ChatGPT-Next-Web/app/api/webdav/[...path]/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:f,staticGenerationAsyncStorage:P,serverHooks:b,headerHooks:y,staticGenerationBailout:O}=_,I="/api/webdav/[...path]/route";function T(){return(0,i.XH)({serverHooks:b,staticGenerationAsyncStorage:P})}let U=r,C=s.a.wrap(_)},9579:(e,t,o)=>{"use strict";o.d(t,{g:()=>i});var a=o(5045),r=o.n(a),s=o(7736);let n=function(){let e=process.env.CODE;try{let t=(e?.split(",")??[]).filter(e=>!!e).map(e=>r().hash(e.trim()));return new Set(t)}catch(e){return new Set}}();function p(e){let t=(e??"").split(",").map(e=>e.trim()),o=Math.floor(Math.random()*t.length),a=t[o];return a&&console.log(`[Server Config] using ${o+1} of ${t.length} api key - ${a}`),a}let i=()=>{if("undefined"==typeof process)throw Error("[Server Config] you are importing a nodejs-only module outside of nodejs");let e=!!process.env.DISABLE_GPT4,t=process.env.CUSTOM_MODELS??"",o=process.env.DEFAULT_MODEL??"";e&&(t&&(t+=","),t+=s.Fv.filter(e=>e.name.startsWith("gpt-4")).map(e=>"-"+e.name).join(","),o.startsWith("gpt-4")&&(o=""));let a=!!process.env.AZURE_URL,r=!!process.env.GOOGLE_API_KEY,i=!!process.env.ANTHROPIC_API_KEY,d=(process.env.WHITE_WEBDEV_ENDPOINTS??"").split(",");return{baseUrl:process.env.BASE_URL,apiKey:p(process.env.OPENAI_API_KEY),openaiOrgId:process.env.OPENAI_ORG_ID,isAzure:a,azureUrl:process.env.AZURE_URL,azureApiKey:p(process.env.AZURE_API_KEY),azureApiVersion:process.env.AZURE_API_VERSION,isGoogle:r,googleApiKey:p(process.env.GOOGLE_API_KEY),googleUrl:process.env.GOOGLE_URL,isAnthropic:i,anthropicApiKey:p(process.env.ANTHROPIC_API_KEY),anthropicApiVersion:process.env.ANTHROPIC_API_VERSION,anthropicUrl:process.env.ANTHROPIC_URL,gtmId:process.env.GTM_ID,needCode:n.size>0,code:process.env.CODE,codes:n,proxyUrl:process.env.PROXY_URL,isVercel:!!process.env.VERCEL,hideUserApiKey:!!process.env.HIDE_USER_API_KEY,disableGPT4:e,hideBalanceQuery:!process.env.ENABLE_BALANCE_QUERY,disableFastLink:!!process.env.DISABLE_FAST_LINK,customModels:t,defaultModel:o,allowedWebDevEndpoints:d}}},7736:(e,t,o)=>{"use strict";var a,r,s,n,p,i,d;o.d(t,{Bi:()=>u,Fv:()=>A,Hm:()=>l,L:()=>r,NU:()=>_,TW:()=>h,UT:()=>i,Uf:()=>v,YU:()=>m,k8:()=>d,mX:()=>g,y3:()=>c});let u="https://api.openai.com",c="https://api.anthropic.com",l="https://generativelanguage.googleapis.com/";!function(e){e.Home="/",e.Chat="/chat",e.Settings="/settings",e.NewChat="/new-chat",e.Masks="/masks",e.Auth="/auth"}(a||(a={})),function(e){e.Cors="",e.Azure="/api/azure",e.OpenAI="/api/openai",e.Anthropic="/api/anthropic"}(r||(r={})),function(e){e.AppBody="app-body",e.CustomModel="custom-model"}(s||(s={})),function(e){e.Masks="masks.json",e.Prompts="prompts.json"}(n||(n={})),function(e){e.Chat="chat-next-web-store",e.Access="access-control",e.Config="app-config",e.Mask="mask-store",e.Prompt="prompt-store",e.Update="chat-update",e.Sync="sync"}(p||(p={}));let h="nk-",v="chatgpt-next-web";!function(e){e.OpenAI="OpenAI",e.Azure="Azure",e.Google="Google",e.Anthropic="Anthropic"}(i||(i={})),function(e){e.GPT="GPT",e.GeminiPro="GeminiPro",e.Claude="Claude"}(d||(d={}));let m={ChatPath:"v1/messages",ChatPath1:"v1/complete",ExampleEndpoint:"https://api.anthropic.com",Vision:"2023-06-01"},g={ChatPath:"v1/chat/completions",UsagePath:"dashboard/billing/usage",SubsPath:"dashboard/billing/subscription",ListModelPath:"v1/models"},E=["gpt-3.5-turbo","gpt-3.5-turbo-1106","gpt-3.5-turbo-0125","gpt-4","gpt-4-0613","gpt-4-32k","gpt-4-32k-0613","gpt-4-turbo","gpt-4-turbo-preview","gpt-4o","gpt-4o-2024-05-13","gpt-4-vision-preview","gpt-4-turbo-2024-04-09","gpt-4-1106-preview"],A=[...E.map(e=>({name:e,available:!0,provider:{id:"openai",providerName:"OpenAI",providerType:"openai"}})),...E.map(e=>({name:e,available:!0,provider:{id:"azure",providerName:"Azure",providerType:"azure"}})),...["gemini-1.0-pro","gemini-1.5-pro-latest","gemini-1.5-flash-latest","gemini-pro-vision"].map(e=>({name:e,available:!0,provider:{id:"google",providerName:"Google",providerType:"google"}})),...["claude-instant-1.2","claude-2.0","claude-2.1","claude-3-sonnet-20240229","claude-3-opus-20240229","claude-3-haiku-20240307","claude-3-5-sonnet-20240620"].map(e=>({name:e,available:!0,provider:{id:"anthropic",providerName:"Anthropic",providerType:"anthropic"}}))],_=["https://dav.jianguoyun.com/dav/","https://dav.dropdav.com/","https://dav.box.com/dav","https://nanao.teracloud.jp/dav/","https://bora.teracloud.jp/dav/","https://webdav.4shared.com/","https://dav.idrivesync.com","https://webdav.yandex.com","https://app.koofr.net/dav/Koofr"]}},e=>{var t=t=>e(e.s=t);e.O(0,[297,45],()=>t(4119));var o=e.O();(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_app/api/webdav/[...path]/route"]=o}]);
//# sourceMappingURL=route.js.map