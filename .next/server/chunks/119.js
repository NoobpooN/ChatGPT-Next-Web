exports.id=119,exports.ids=[119],exports.modules={17382:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a,n,r=s(6413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let i=function(e){return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),a||(a=r.createElement("defs",null,r.createElement("path",{id:"clear_svg__a",d:"M0 0h16v16H0z"}))),r.createElement("g",null,n||(n=r.createElement("mask",{id:"clear_svg__b",fill:"#fff"},r.createElement("use",{xlinkHref:"#clear_svg__a"}))),r.createElement("g",{mask:"url(#clear_svg__b)"},r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1 9.67h8.67l1-9.67H0l1 9.67Z",transform:"translate(2.667 5)"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v3.33",transform:"translate(6.667 8.334)"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v3.33",transform:"translate(9.334 8.333)"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 4 5.44-4L8 4",transform:"translate(4 1)"}))))}},60403:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a,n,r=s(6413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let i=function(e){return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"#fff"},e),a||(a=r.createElement("rect",{width:"100%",height:"100%",fill:"none"})),n||(n=r.createElement("g",{className:"loading_svg__currentLayer"},r.createElement("circle",{cx:4,cy:8,r:1.926,fill:"#333"},r.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:2,repeatCount:"indefinite",to:2,values:"2;1.2;2"}),r.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:1,repeatCount:"indefinite",to:1,values:"1;.5;1"})),r.createElement("circle",{cx:8,cy:8,r:1.274,fill:"#333",fillOpacity:.3},r.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:1.2,repeatCount:"indefinite",to:1.2,values:"1.2;2;1.2"}),r.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:.5,repeatCount:"indefinite",to:.5,values:".5;1;.5"})),r.createElement("circle",{cx:12,cy:8,r:1.926,fill:"#333"},r.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:2,repeatCount:"indefinite",to:2,values:"2;1.2;2"}),r.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:1,repeatCount:"indefinite",to:1,values:"1;.5;1"})))))}},83931:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a,n,r=s(6413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let i=function(e){return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),a||(a=r.createElement("defs",null,r.createElement("path",{id:"prompt_svg__a",d:"M0 0h16v16H0z"}))),r.createElement("g",null,n||(n=r.createElement("mask",{id:"prompt_svg__b",fill:"#fff"},r.createElement("use",{xlinkHref:"#prompt_svg__a"}))),r.createElement("g",{mask:"url(#prompt_svg__b)"},r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3,strokeOpacity:1,strokeDasharray:"0 0"},d:"m1.367 1.367 1.41 1.41M4.667 0v2m0 0V0m3.295 1.367-1.41 1.41m0 0 1.41-1.41m1.371 3.3h-2m0 0h2m-1.37 3.295-1.41-1.41m0 0 1.41 1.41M4.666 9.333v-2m0 0v2m-3.3-1.37 1.41-1.41m0 0-1.41 1.41M0 4.666h2m0 0H0",transform:"translate(5.333 1.333)"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8.01 0 0 8.01",transform:"translate(1.848 6.138)"}))))}},20733:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a,n,r=s(6413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let i=function(e){return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),a||(a=r.createElement("defs",null,r.createElement("path",{id:"return_svg__a",d:"M0 0h16v16H0z"}))),r.createElement("g",null,n||(n=r.createElement("mask",{id:"return_svg__b",fill:"#fff"},r.createElement("use",{xlinkHref:"#return_svg__a"}))),r.createElement("g",{mask:"url(#return_svg__b)"},r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M2.33 0 0 2l2.33 2.33",transform:"translate(2 2.667)"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0h7.66c2.3 0 4.25 1.87 4.34 4.17.09 2.42-1.91 4.5-4.34 4.5H2",transform:"translate(2 4.667)"}))))}},24443:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a,n,r=s(6413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let i=function(e){return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),a||(a=r.createElement("defs",null,r.createElement("path",{id:"share_svg__a",d:"M0 0h16v16H0z"}))),r.createElement("g",null,n||(n=r.createElement("mask",{id:"share_svg__b",fill:"#fff"},r.createElement("use",{xlinkHref:"#share_svg__a"}))),r.createElement("g",{mask:"url(#share_svg__b)"},r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M6.67 3.67C1.67 3.67 0 7.33 0 13c0 0 2-5 6.67-5v3.67l6-5.67-6-6v3.67Z",transform:"translate(2 1.333)"}))))}},50952:(e,t,s)=>{"use strict";s.d(t,{UK:()=>o,YZ:()=>l,x6:()=>i});var a=s(3729),n=s(76060),r=s(9719);function l(e={}){let[t,s]=(0,n.lr)();(0,a.useEffect)(()=>{let a=!1;t.forEach((s,n)=>{"function"==typeof e[n]&&(e[n](s),t.delete(n),a=!0)}),a&&s(t)},[t,e])}let i=/^[:ï¼š]/;function o(e={}){function t(e){return e.match(i)?e.slice(1):e}return{match:function(s){let a=t(s),n="function"==typeof e[a];return{matched:n,invoke:()=>n&&e[a](s)}},search:function(s){let a=t(s),n=r.ZP.Chat.Commands;return Object.keys(e).filter(e=>e.startsWith(a)).map(e=>({title:n[e],content:":"+e}))}}}},25119:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Chat:()=>tk,ChatAction:()=>tf,ChatActions:()=>tx,DeleteImageButton:()=>tw,EditMessageModal:()=>tv,PromptHints:()=>tp,SessionConfigModel:()=>th});var a,n,r,l,i,o,c,m,d,h,u,p,g,f,x,v,w,_,k,y,j,C,E,b,S,M,N,P,Z,O,H,z,A,T,I=s(95344),D=s(75499),K=s(3729),F=s(6413);function $(){return($=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let L=function(e){return F.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),a||(a=F.createElement("defs",null,F.createElement("path",{id:"send-white_svg__a",d:"M0 0h16v16H0z"}))),F.createElement("g",null,n||(n=F.createElement("mask",{id:"send-white_svg__b",fill:"#fff"},F.createElement("use",{xlinkHref:"#send-white_svg__a"}))),F.createElement("g",{mask:"url(#send-white_svg__b)"},F.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 4.71 6.67 6l1.67 6.67L12.67 0 0 4.71Z",transform:"translate(1.333 2)"}),F.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 1.89 1.89 0",transform:"translate(8.003 6.117)"}))))};function W(){return(W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let B=function(e){return F.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=F.createElement("defs",null,F.createElement("path",{id:"brain_svg__a",d:"M0 0h16v16H0z"}))),F.createElement("g",null,l||(l=F.createElement("mask",{id:"brain_svg__b",fill:"#fff"},F.createElement("use",{xlinkHref:"#brain_svg__a"}))),F.createElement("g",{mask:"url(#brain_svg__b)"},F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M5.01 13.33c-.32-1.06-.82-1.86-1.48-2.38-.98-.78-2.56-.3-3.14-1.11-.58-.8.41-2.29.76-3.17.34-.88-1.33-1.19-1.13-1.44.13-.16.97-.64 2.53-1.44C3 1.26 4.63 0 7.47 0c4.24 0 5.86 3.6 5.86 5.89 0 2.29-1.96 4.76-4.75 5.29-.25.37.11 1.08 1.08 2.15",transform:"translate(1.333 1.333)"}),F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M2.1 3.33c-.19 1.09.04 1.6.69 1.53.65-.07 1.05-.34 1.18-.81 1.02.28 1.57.04 1.66-.72.12-1.15-.5-2.07-.75-2.07s-.91-.03-.91-.38C3.97.52 3.2.33 2.5.33c-.69 0-.27-.47-1.23-.29C.64.17.26.44.13.88c-.22.84-.16 1.43.19 1.78.35.34.94.56 1.78.67Z",transform:"translate(6.374 3.957)"}),F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1.97 0c-.34.21-.8.56-1 .83-.49.69-.88 1.1-.97 1.54",transform:"translate(8.193 8.5)"}))))};function R(){return(R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let V=function(e){return F.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),i||(i=F.createElement("defs",null,F.createElement("path",{id:"rename_svg__a",d:"M0 0h16v16H0z"}))),F.createElement("g",null,o||(o=F.createElement("mask",{id:"rename_svg__b",fill:"#fff"},F.createElement("use",{xlinkHref:"#rename_svg__a"}))),F.createElement("g",{mask:"url(#rename_svg__b)"},F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M2.83 13.2 13.2 2.83 10.37 0 0 10.37v2.83h2.83Z",transform:"translate(1.775 1.3)"}),F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 0 2.83 2.83",transform:"translate(9.317 4.13)"}))))};var Q=s(24443),X=s(20733),U=s(81482),Y=s(39866),G=s(60403),q=s(83931),J=s(38740),ee=s(34423),et=s(66363),es=s(30841);function ea(){return(ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let en=function(e){return F.createElement("svg",ea({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),F.createElement("path",{style:{fill:"#333",opacity:1},d:"M13.275-.275c.261.26.392.576.392.945v10.66c0 .37-.131.684-.392.945a1.288 1.288 0 0 1-.945.392H1.67c-.37 0-.684-.13-.945-.392a1.288 1.288 0 0 1-.392-.945V.67c0-.37.13-.684.392-.945.26-.261.576-.392.945-.392h10.66c.369 0 .684.13.945.392zM1.667 11.33c0 .002 0 .003.003.003h10.66c.002 0 .003 0 .003-.003V.67c0-.002 0-.003-.003-.003H1.67c-.002 0-.003 0-.003.003z",transform:"translate(1 2)"}),F.createElement("path",{style:{fill:"#333",opacity:1},d:"M9.763 7.507a.666.666 0 0 1-.867 0L7 5.878 5.104 7.506a.665.665 0 0 1-.867.001L2.331 5.878.434 7.506a.66.66 0 0 1-.485.16.66.66 0 0 1-.53-.338.665.665 0 0 1 .147-.834l2.33-2a.666.666 0 0 1 .867 0L4.67 6.123l1.897-1.629a.666.666 0 0 1 .868 0l1.897 1.629 1.906-1.63a.668.668 0 0 1 .867.002l2.33 2a.66.66 0 0 1 .23.455.661.661 0 0 1-.252.575.666.666 0 0 1-.846-.019l-1.897-1.628z",transform:"translate(1 2)"}),c||(c=F.createElement("defs",null,F.createElement("path",{id:"break_svg__a",d:"M0 0h16v16H0z"}))))};function er(){return(er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let el=function(e){return F.createElement("svg",er({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),F.createElement("g",null,m||(m=F.createElement("mask",{id:"chat-settings_svg__b",fill:"#fff"},F.createElement("use",{xlinkHref:"#chat-settings_svg__a"}))),F.createElement("g",{mask:"url(#chat-settings_svg__b)"},F.createElement("path",{style:{fill:"#333",opacity:1},d:"M6.728 14.598a.665.665 0 0 1-.828.434 7.294 7.294 0 0 1-3.187-1.945.666.666 0 0 1-.026-.896c.207-.241.31-.527.31-.857 0-.37-.13-.685-.389-.944A1.286 1.286 0 0 0 1.663 10h-.08a.662.662 0 0 1-.665-.288.665.665 0 0 1-.098-.235 7.234 7.234 0 0 1 .188-3.675.662.662 0 0 1 .635-.465h.02c.37 0 .684-.13.944-.392.26-.26.39-.574.39-.942 0-.215-.045-.415-.134-.6a.666.666 0 0 1 .148-.78A7.292 7.292 0 0 1 6.034.932a.666.666 0 0 1 .774.34c.11.219.272.394.483.524.216.135.454.202.712.202.254 0 .488-.067.703-.201.211-.131.372-.306.483-.524a.666.666 0 0 1 .773-.34 7.404 7.404 0 0 1 3.03 1.688.664.664 0 0 1 .143.8c-.09.174-.135.368-.135.583 0 .366.13.68.392.941.262.262.575.393.941.393h.03a.664.664 0 0 1 .636.465c.22.695.331 1.43.331 2.201a7.34 7.34 0 0 1-.143 1.474.66.66 0 0 1-.27.411.666.666 0 0 1-.478.115 1 1 0 0 0-.106-.003c-.367 0-.681.13-.941.39-.261.26-.392.574-.392.943 0 .322.106.61.317.865a.662.662 0 0 1 .1.686.671.671 0 0 1-.133.202 7.294 7.294 0 0 1-3.187 1.945.674.674 0 0 1-.503-.047.659.659 0 0 1-.325-.387 1.311 1.311 0 0 0-.477-.667 1.288 1.288 0 0 0-.789-.26c-.297 0-.564.087-.798.26-.23.17-.389.393-.477.667zm3.52-1.032c.626-.253 1.191-.6 1.696-1.042a2.603 2.603 0 0 1-.277-1.19 2.642 2.642 0 0 1 .784-1.888 2.646 2.646 0 0 1 1.51-.753 6.393 6.393 0 0 0-.118-2.067 2.655 2.655 0 0 1-1.394-.738 2.656 2.656 0 0 1-.782-1.884c0-.239.029-.468.087-.687a6.05 6.05 0 0 0-1.693-.954c-.182.22-.398.41-.65.566-.431.268-.9.402-1.408.402-.511 0-.983-.134-1.414-.401a2.632 2.632 0 0 1-.653-.567 5.936 5.936 0 0 0-1.69.957 2.74 2.74 0 0 1-.125 1.72c-.134.319-.324.601-.57.847a2.641 2.641 0 0 1-1.389.738 5.903 5.903 0 0 0-.12 2.069 2.642 2.642 0 0 1 1.509.753 2.654 2.654 0 0 1 .779 1.888c0 .433-.091.831-.274 1.192.504.44 1.068.787 1.692 1.04.172-.272.393-.507.664-.707.47-.348 1-.522 1.591-.522.587 0 1.115.174 1.584.523.27.2.49.435.661.705z"}),F.createElement("path",{style:{fill:"#333",opacity:1},d:"M10.122 10.122a2.987 2.987 0 0 1-2.125.881 2.969 2.969 0 0 1-2.122-.883 2.983 2.983 0 0 1-.64-.955A2.984 2.984 0 0 1 5 7.997a2.974 2.974 0 0 1 .876-2.12A2.974 2.974 0 0 1 7.996 5c.407 0 .797.078 1.169.235.36.151.678.364.955.64a2.969 2.969 0 0 1 .883 2.122 2.987 2.987 0 0 1-.881 2.125zM7.997 6.333c-.461 0-.854.162-1.178.486a1.603 1.603 0 0 0-.486 1.178c0 .462.163.857.488 1.183.324.327.716.49 1.176.49.46 0 .855-.164 1.182-.491.327-.327.491-.721.491-1.182 0-.46-.163-.852-.49-1.176a1.618 1.618 0 0 0-1.183-.488z"}))),d||(d=F.createElement("defs",null,F.createElement("path",{id:"chat-settings_svg__a",d:"M0 0h16v16H0z"}))))};var ei=s(17382);function eo(){return(eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let ec=function(e){return F.createElement("svg",eo({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),F.createElement("g",null,h||(h=F.createElement("mask",{id:"pin_svg__b",fill:"#fff"},F.createElement("use",{xlinkHref:"#pin_svg__a"}))),F.createElement("g",{mask:"url(#pin_svg__b)"},F.createElement("path",{style:{fill:"#333",opacity:1},d:"m6.685 8.81-4 5.44-.537-.394-.397-.536 5.42-4.01a.666.666 0 0 1 .866.062l.532.528 2.07 2.063-.471.473-.472-.472c.3-.3.457-.62.472-.963.015-.353-.108-.798-.37-1.333a.665.665 0 0 1 .017-.616l2.36-4.25a.662.662 0 0 1 .679-.336l1.65.24-.096.66-.472.471-3.77-3.77.472-.471.66-.096.24 1.65a.664.664 0 0 1-.337.678l-4.25 2.36a.665.665 0 0 1-.646.001c-.479-.265-.903-.388-1.27-.369-.358.018-.69.18-.996.487l-.471-.471.471-.472 2.06 2.06.52.52a.665.665 0 0 1 .066.867zM5.61 8.02l.537.396-.472.471-.52-.52-2.06-2.06a.665.665 0 0 1 0-.943c.548-.548 1.172-.84 1.87-.875.622-.032 1.283.146 1.984.533l-.322.584-.324-.583 4.25-2.36.324.583-.66.096-.24-1.65a.664.664 0 0 1 .66-.763.665.665 0 0 1 .471.195l3.77 3.77a.666.666 0 0 1-.567 1.131l-1.65-.24.096-.66.583.324-2.36 4.25-.583-.323.599-.293c.36.738.527 1.396.503 1.974-.029.689-.316 1.305-.86 1.85a.664.664 0 0 1-.842.083.667.667 0 0 1-.101-.082l-2.068-2.062-.531-.527.47-.473.396.535-5.42 4.01a.663.663 0 0 1-.791.002.664.664 0 0 1-.142-.932z"}))),u||(u=F.createElement("defs",null,F.createElement("path",{id:"pin_svg__a",d:"M0 0h16v16H0z"}))))};var em=s(99992),ed=s(85759);function eh(){return(eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let eu=function(e){return F.createElement("svg",eh({xmlns:"http://www.w3.org/2000/svg",fill:"none",height:16,width:16,xmlSpace:"preserve"},e),p||(p=F.createElement("rect",{width:"100%",height:"100%"})),g||(g=F.createElement("g",{className:"image_svg__currentLayer"},F.createElement("g",{fill:"#333"},F.createElement("path",{d:"M2.47 2.47h1.977v-.782H1.688v2.76h.781zM11.553 1.688v.781h1.978v1.978h.78V1.688zM13.53 13.53h-1.977v.782h2.759v-2.76h-.781zM2.47 11.553h-.782v2.759h2.76v-.781H2.468zM8.83 6.243c.682 0 1.237-.555 1.237-1.236S9.512 3.77 8.83 3.77a1.238 1.238 0 0 0 0 2.473zM3.77 12.23h8.46V9.71l-1.527-1.611-1.85 1.077-2.578-1.842L3.77 9.977z"})))))};function ep(){return(ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let eg=function(e){return F.createElement("svg",ep({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),f||(f=F.createElement("defs",null,F.createElement("path",{id:"light_svg__a",d:"M0 0h16v16H0z"}))),F.createElement("g",null,x||(x=F.createElement("mask",{id:"light_svg__b",fill:"#fff"},F.createElement("use",{xlinkHref:"#light_svg__a"}))),F.createElement("g",{mask:"url(#light_svg__b)"},F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8.67 4.33C8.67 1.94 6.73 0 4.33 0 1.94 0 0 1.94 0 4.33a4.334 4.334 0 1 0 8.67 0Z",transform:"translate(3.667 3.667)"}),F.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(7.167 .333)"}),F.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(12 2.333)"}),F.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(14 7.167)"}),F.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(12 12)"}),F.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(7.167 14)"}),F.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(2.333 12)"}),F.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(.333 7.167)"}),F.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(2.333 2.333)"}))))};function ef(){return(ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let ex=function(e){return F.createElement("svg",ef({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),v||(v=F.createElement("defs",null,F.createElement("path",{id:"dark_svg__a",d:"M0 0h16v16H0z"}))),F.createElement("g",null,w||(w=F.createElement("mask",{id:"dark_svg__b",fill:"#fff"},F.createElement("use",{xlinkHref:"#dark_svg__a"}))),F.createElement("g",{mask:"url(#dark_svg__b)"},F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66 0-.47-.04-.92-.13-1.35a4.251 4.251 0 0 1-4.11 3.16c-2.34 0-4.24-1.89-4.24-4.24 0-1.97 1.34-3.63 3.17-4.1C7.58.05 7.13 0 6.67 0Z",transform:"translate(1.333 1.333)"}))))};function ev(){return(ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let ew=function(e){return F.createElement("svg",ev({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),_||(_=F.createElement("defs",null,F.createElement("path",{id:"auto_svg__a",d:"M0 0h16v16H0z"}))),F.createElement("g",null,k||(k=F.createElement("mask",{id:"auto_svg__b",fill:"#fff"},F.createElement("use",{xlinkHref:"#auto_svg__a"}))),F.createElement("g",{mask:"url(#auto_svg__b)"},F.createElement("path",{style:{stroke:"#333",strokeWidth:1,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 5.337.73-1.67m3.938 1.67-.73-1.67M.728 3.67 2.33 0l1.61 3.67M.73 3.667h3.21",transform:"translate(5.667 5.333)"}),F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M13.07 5.33A6.672 6.672 0 0 0 0 5.33l2-.66",transform:"translate(1.333 1.333)"}),F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0a6.672 6.672 0 0 0 13.07 0l-1.74.67",transform:"translate(1.333 9.333)"}))))};function e_(){return(e_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let ek=function(e){return F.createElement("svg",e_({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),y||(y=F.createElement("defs",null,F.createElement("path",{id:"bottom_svg__a",d:"M0 0h16v16H0z"}))),F.createElement("g",null,j||(j=F.createElement("mask",{id:"bottom_svg__b",fill:"#fff"},F.createElement("use",{xlinkHref:"#bottom_svg__a"}))),F.createElement("g",{mask:"url(#bottom_svg__b)"},F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8 0 4 4 0 0",transform:"translate(4 4)"}),F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8 0 4 4 0 0",transform:"translate(4 8)"}))))};function ey(){return(ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let ej=function(e){return F.createElement("svg",ey({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),C||(C=F.createElement("defs",null,F.createElement("path",{id:"pause_svg__a",d:"M0 0h16v16H0z"}))),F.createElement("g",null,E||(E=F.createElement("mask",{id:"pause_svg__b",fill:"#fff"},F.createElement("use",{xlinkHref:"#pause_svg__a"}))),F.createElement("g",{mask:"url(#pause_svg__b)"},F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M13.33 6.67A6.66 6.66 0 0 0 6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66Z",transform:"translate(1.333 1.333)"}),F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v4",transform:"translate(6.333 6)"}),F.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v4",transform:"translate(9.667 6)"}))))};function eC(){return(eC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let eE=function(e){return F.createElement("svg",eC({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),F.createElement("g",null,b||(b=F.createElement("mask",{id:"robot_svg__b",fill:"#fff"},F.createElement("use",{xlinkHref:"#robot_svg__a"}))),F.createElement("g",{mask:"url(#robot_svg__b)"},F.createElement("path",{style:{fill:"#333",opacity:1},d:"M3.67 13.67h8.66c.002 0 .003-.001.003-.003V6.334H3.67c-.002 0-.003 0-.003.003v7.33c0 .002 0 .003.003.003zm0 1.333c-.37 0-.684-.13-.945-.391a1.288 1.288 0 0 1-.392-.945v-7.33c0-.37.13-.685.392-.946.26-.26.576-.391.945-.391h8.66c.37 0 .684.13.945.391.261.261.392.577.392.946v7.33c0 .369-.13.684-.392.945a1.288 1.288 0 0 1-.945.391z"}),F.createElement("path",{style:{fill:"#333",opacity:1},d:"M9.819 6.127a.666.666 0 0 1-1.05-.81l1.67-2.67a.665.665 0 0 1 1.107-.034.663.663 0 0 1 .023.74l-1.67 2.67a.665.665 0 0 1-.08.104zM7.293 5.434a.665.665 0 0 1-1.01.779.665.665 0 0 1-.178-.19l-1.67-2.67a.665.665 0 0 1 .952-.896.665.665 0 0 1 .178.19l1.67 2.67a.665.665 0 0 1 .058.117z"}),F.createElement("path",{style:{fill:"#333",opacity:1},d:"M11.337 2.333c-.003 0-.004.001-.004.004l-.001-.01a.007.007 0 0 0 .005.003h-.007v.007c0-.002 0-.004-.002-.005l.009.001zm0-1.333c.366 0 .679.131.939.394.258.261.387.575.387.943 0 .364-.13.676-.39.936s-.572.39-.936.39c-.368 0-.682-.129-.943-.388A1.273 1.273 0 0 1 10 2.337c0-.37.13-.685.391-.946.262-.26.577-.391.946-.391zM4.67 2.333c-.002 0-.003.001-.003.004 0-.005 0-.008-.002-.01a.007.007 0 0 0 .005.003h-.006v.007c0-.002-.001-.004-.003-.005l.009.001zM4.67 1c.366 0 .679.131.939.394.258.261.388.575.388.943 0 .364-.13.676-.39.936s-.573.39-.937.39c-.367 0-.681-.129-.943-.388a1.273 1.273 0 0 1-.394-.938c0-.37.13-.685.392-.946.26-.26.576-.391.945-.391zM6.663 10.003h2.67c.184 0 .34-.065.469-.194a.655.655 0 0 0 .195-.479.638.638 0 0 0-.196-.467.638.638 0 0 0-.468-.196h-2.67a.638.638 0 0 0-.467.196A.638.638 0 0 0 6 9.33c0 .188.065.347.195.479.128.13.284.194.468.194zm0 1.334a1.974 1.974 0 0 1-1.416-.59 2.001 2.001 0 0 1 1.416-3.413h2.67a1.99 1.99 0 0 1 1.41.587 1.99 1.99 0 0 1 .587 1.409 2.002 2.002 0 0 1-1.997 2.007zM2 10.663h1.003a.666.666 0 1 1 0 1.334h-1.67a.666.666 0 0 1-.666-.667V8a.665.665 0 0 1 .666-.667h1.67a.665.665 0 0 1 .555 1.037.665.665 0 0 1-.555.297H2zM14.8 7.346a.664.664 0 0 1 .537.654v3.33a.666.666 0 0 1-.667.667H13a.666.666 0 1 1 0-1.334h1.003V8.667H13a.665.665 0 0 1-.471-1.138.664.664 0 0 1 .471-.196h1.67c.044 0 .087.005.13.013z"}))),S||(S=F.createElement("defs",null,F.createElement("path",{id:"robot_svg__a",d:"M0 0h16v16H0z"}))))};function eb(){return(eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let eS=function(e){return F.createElement("svg",eb({width:16,height:16,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),M||(M=F.createElement("path",{d:"M42 7H6a2 2 0 0 0-2 2v30a2 2 0 0 0 2 2h36a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Z",stroke:"#333",strokeWidth:4})),N||(N=F.createElement("path",{d:"M30 30V18l8 12V18M10 30V18l8 12V18",stroke:"#333",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"})),P||(P=F.createElement("path",{d:"M24 20v1M24 27v1",stroke:"#333",strokeWidth:4,strokeLinecap:"round"})))};function eM(){return(eM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let eN=function(e){return F.createElement("svg",eM({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"#333",className:"hd_svg__bi hd_svg__bi-badge-hd"},e),Z||(Z=F.createElement("path",{d:"M7.396 11V5.001H6.209v2.44H3.687V5H2.5v6h1.187V8.43h2.522V11zM8.5 5.001V11h2.188c1.811 0 2.685-1.107 2.685-3.015 0-1.894-.86-2.984-2.684-2.984zm1.187.967h.843c1.112 0 1.622.686 1.622 2.04 0 1.353-.505 2.02-1.622 2.02h-.843z"})),O||(O=F.createElement("path",{d:"M14 3a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zM2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"})))};function eP(){return(eP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let eZ=function(e){return F.createElement("svg",eP({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"#333",className:"palette_svg__bi palette_svg__bi-palette"},e),H||(H=F.createElement("path",{d:"M8 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m4 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M5.5 7a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m.5 6a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"})),z||(z=F.createElement("path",{d:"M16 8c0 3.15-1.866 2.585-3.567 2.07C11.42 9.763 10.465 9.473 10 10c-.603.683-.475 1.819-.351 2.92C9.826 14.495 9.996 16 8 16a8 8 0 1 1 8-8m-8 7c.611 0 .654-.171.655-.176.078-.146.124-.464.07-1.119-.014-.168-.037-.37-.061-.591-.052-.464-.112-1.005-.118-1.462-.01-.707.083-1.61.704-2.314.369-.417.845-.578 1.272-.618.404-.038.812.026 1.16.104.343.077.702.186 1.025.284l.028.008c.346.105.658.199.953.266.653.148.904.083.991.024C14.717 9.38 15 9.161 15 8a7 7 0 1 0-7 7"})))};function eO(){return(eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let eH=function(e){return F.createElement("svg",eO({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),F.createElement("g",null,A||(A=F.createElement("mask",{id:"plugin_svg__b",fill:"#fff"},F.createElement("use",{xlinkHref:"#plugin_svg__a"}))),F.createElement("g",{mask:"url(#plugin_svg__b)"},F.createElement("path",{style:{fill:"#333",opacity:1},d:"M6.945 1.725c.261.26.392.576.392.945V6c0 .37-.13.684-.392.945A1.288 1.288 0 0 1 6 7.337H2.67c-.37 0-.684-.13-.945-.392A1.288 1.288 0 0 1 1.333 6V2.67c0-.37.13-.684.392-.945.26-.261.576-.392.945-.392H6c.37 0 .684.13.945.392zM2.667 6c0 .002 0 .003.003.003H6c.002 0 .003 0 .003-.003V2.67c0-.002 0-.003-.003-.003H2.67c-.002 0-.003 0-.003.003zM6.945 9.058c.261.261.392.576.392.945v3.33c0 .37-.13.685-.392.946A1.288 1.288 0 0 1 6 14.67H2.67c-.37 0-.684-.13-.945-.391a1.288 1.288 0 0 1-.392-.946v-3.33c0-.369.13-.684.392-.945.26-.26.576-.391.945-.391H6c.37 0 .684.13.945.391zm-4.278 4.275c0 .003 0 .004.003.004H6c.002 0 .003-.001.003-.004v-3.33c0-.002 0-.003-.003-.003H2.67c-.002 0-.003.001-.003.003zM13.789 6.455a2.987 2.987 0 0 1-2.126.882c-.407 0-.797-.08-1.169-.238a2.97 2.97 0 0 1-.952-.645 2.983 2.983 0 0 1-.64-.956 2.984 2.984 0 0 1-.235-1.168 2.974 2.974 0 0 1 .876-2.12 2.973 2.973 0 0 1 2.12-.877c.407 0 .796.079 1.169.235.36.151.678.365.955.64a2.97 2.97 0 0 1 .883 2.122 2.988 2.988 0 0 1-.882 2.125zm-2.126-3.788c-.46 0-.853.162-1.177.486A1.603 1.603 0 0 0 10 4.33c0 .462.162.857.487 1.184.325.326.717.49 1.176.49.461 0 .855-.164 1.183-.492.327-.327.49-.721.49-1.182 0-.46-.163-.851-.489-1.176a1.618 1.618 0 0 0-1.184-.487zM14.278 9.058c.261.261.392.576.392.945v3.33c0 .37-.13.685-.392.946a1.288 1.288 0 0 1-.945.391h-3.33c-.369 0-.684-.13-.945-.391a1.288 1.288 0 0 1-.391-.946v-3.33c0-.369.13-.684.391-.945.261-.26.576-.391.945-.391h3.33c.37 0 .684.13.945.391zM10 13.333c0 .003.001.004.003.004h3.33c.003 0 .004-.001.004-.004v-3.33c0-.002-.001-.003-.004-.003h-3.33c-.002 0-.003.001-.003.003z"}))),T||(T=F.createElement("defs",null,F.createElement("path",{id:"plugin_svg__a",d:"M0 0h16v16H0z"}))))};var ez=s(33362),eA=s(25166),eT=s(22824),eI=s(97273),eD=s(74975),eK=s(52061),eF=s(9719),e$=s(70580),eL=s(93949),eW=s.n(eL),eB=s(6068),eR=s(17304),eV=s(99608),eQ=s(23662),eX=s(86111),eU=s(1566),eY=s(50952),eG=s(74872),eq=s(52097),eJ=s.n(eq),e0=s(55246);let e3={src:"/_next/static/media/bot.0c800005.png"};var e1=s(13262),e6=s(56270),e2=s.n(e6);function e4(e){let t=(0,ez.aK)().currentSession(),s=e=>e.content&&!e.isError&&!e.streaming,a=(0,K.useMemo)(()=>{let e=Math.max(0,t.clearContextIndex??0);return e===t.messages.length-1&&(e=0),t.messages.slice(e)},[t.messages,t.clearContextIndex]),n=(0,K.useMemo)(()=>a.filter((e,t)=>e.id&&s(e)&&(t>=a.length-1||s(a[t+1]))),[a]),r=n.length,l=(0,ez.MG)(),[i,o]=(0,K.useState)(""),[c,m]=(0,K.useState)(new Set),d=e=>0===i.length||c.has(e),h=e=>{let t=new Set;e.length>0&&n.forEach(s=>(0,eA.YK)(s).includes(e)?t.add(s.id):null),m(t)},{startIndex:u,endIndex:p,onClickIndex:g}=function(){let[e,t]=(0,K.useState)(),[s,a]=(0,K.useState)(),[n,r]=(0,K.useState)(!1);return(0,K.useEffect)(()=>{let e=e=>{"Shift"===e.key&&r(!0)},s=e=>{"Shift"===e.key&&(r(!1),t(void 0),a(void 0))};return window.addEventListener("keyup",s),window.addEventListener("keydown",e),()=>{window.removeEventListener("keyup",s),window.removeEventListener("keydown",e)}},[]),{onClickIndex:s=>{n&&void 0!==e?a(s):(t(s),a(void 0))},startIndex:e,endIndex:s}}(),f=()=>{e.updateSelection(e=>n.forEach(t=>e.add(t.id)))};return(0,K.useEffect)(()=>{e.defaultSelectAll&&f()},[]),(0,K.useEffect)(()=>{if(void 0===u||void 0===p)return;let[t,s]=[u,p].sort((e,t)=>e-t);e.updateSelection(e=>{for(let a=t;a<=s;a+=1)e.add(n[a].id??a)})},[u,p]),(0,I.jsxs)("div",{className:e2()["message-selector"],children:[(0,I.jsxs)("div",{className:e2()["message-filter"],children:[I.jsx("input",{type:"text",placeholder:eF.ZP.Select.Search,className:e2()["filter-item"]+" "+e2()["search-bar"],value:i,onInput:e=>{o(e.currentTarget.value),h(e.currentTarget.value)}}),(0,I.jsxs)("div",{className:e2().actions,children:[I.jsx(e$.h,{text:eF.ZP.Select.All,bordered:!0,className:e2()["filter-item"],onClick:f}),I.jsx(e$.h,{text:eF.ZP.Select.Latest,bordered:!0,className:e2()["filter-item"],onClick:()=>e.updateSelection(e=>{e.clear(),n.slice(r-4).forEach(t=>e.add(t.id))})}),I.jsx(e$.h,{text:eF.ZP.Select.Clear,bordered:!0,className:e2()["filter-item"],onClick:()=>e.updateSelection(e=>e.clear())})]})]}),I.jsx("div",{className:e2().messages,children:n.map((s,a)=>{if(!d(s.id))return null;let n=s.id??a,r=e.selection.has(n);return(0,I.jsxs)("div",{className:`${e2().message} ${e.selection.has(s.id)&&e2()["message-selected"]}`,onClick:()=>{e.updateSelection(e=>{e.has(n)?e.delete(n):e.add(n)}),g(a)},children:[I.jsx("div",{className:e2().avatar,children:"user"===s.role?I.jsx(eQ.qE,{avatar:l.avatar}):I.jsx(eX.MaskAvatar,{avatar:t.mask.avatar,model:s.model||t.mask.modelConfig.model})}),(0,I.jsxs)("div",{className:e2().body,children:[I.jsx("div",{className:e2().date,children:new Date(s.date).toLocaleString()}),I.jsx("div",{className:`${e2().content} one-line`,children:(0,eA.YK)(s)})]}),I.jsx("div",{className:e2().checkbox,children:I.jsx("input",{type:"checkbox",checked:r,readOnly:!0})})]},a)})})]})}var e7=s(89410),e8=s(71052),e9=s(54508),e5=s(83026);let te=(0,eI.default)(async()=>(await s.e(768).then(s.bind(s,49768))).Markdown,{loadableGenerated:{modules:["/Volumes/D/github/ChatGPT-Next-Web/app/components/exporter.tsx -> ./markdown"]},loading:()=>I.jsx(Y.Z,{})});function tt(e){return I.jsx("div",{className:"modal-mask",children:I.jsx(eB.u_,{title:eF.ZP.Export.Title,onClose:e.onClose,footer:I.jsx("div",{style:{width:"100%",textAlign:"center",fontSize:14,opacity:.5},children:eF.ZP.Exporter.Description.Title}),children:I.jsx("div",{style:{minHeight:"40vh"},children:I.jsx(ta,{})})})})}function ts(e){let t=e.steps,s=t.length;return(0,I.jsxs)("div",{className:eJ().steps,children:[I.jsx("div",{className:eJ()["steps-progress"],children:I.jsx("div",{className:eJ()["steps-progress-inner"],style:{width:`${(e.index+1)/s*100}%`}})}),I.jsx("div",{className:eJ()["steps-inner"],children:t.map((t,s)=>(0,I.jsxs)("div",{className:`${eJ().step} ${eJ()[s<=e.index?"step-finished":""]} ${s===e.index&&eJ()["step-current"]} clickable`,onClick:()=>{e.onStepChange?.(s)},role:"button",children:[I.jsx("span",{className:eJ()["step-index"],children:s+1}),I.jsx("span",{className:eJ()["step-name"],children:t.name})]},s))})]})}function ta(){let e=[{name:eF.ZP.Export.Steps.Select,value:"select"},{name:eF.ZP.Export.Steps.Preview,value:"preview"}],{currentStep:t,setCurrentStepIndex:s,currentStepIndex:a}=function(e){let t=e.length,[s,a]=(0,K.useState)(0);return{currentStepIndex:s,setCurrentStepIndex:a,nextStep:()=>a((s+1)%t),prevStep:()=>a((s-1+t)%t),currentStep:e[s]}}(e),[n,r]=(0,K.useState)({format:"image",includeContext:!0});function l(e){let t={...n};e(t),r(t)}let i=(0,ez.aK)().currentSession(),{selection:o,updateSelection:c}=function(){let[e,t]=(0,K.useState)(new Set);return{selection:e,updateSelection:s=>{let a=new Set(e);s(a),t(a)}}}(),m=(0,K.useMemo)(()=>{let e=[];return n.includeContext&&e.push(...i.mask.context),e.push(...i.messages.filter(e=>o.has(e.id))),e},[n.includeContext,i.messages,i.mask.context,o]);return(0,I.jsxs)(I.Fragment,{children:[I.jsx(ts,{steps:e,index:a,onStepChange:s}),(0,I.jsxs)("div",{className:eJ()["message-exporter-body"],style:"select"!==t.value?{display:"none"}:{},children:[(0,I.jsxs)(eB.aV,{children:[I.jsx(eB.HC,{title:eF.ZP.Export.Format.Title,subTitle:eF.ZP.Export.Format.SubTitle,children:I.jsx(eB.Ph,{value:n.format,onChange:e=>l(t=>t.format=e.currentTarget.value),children:["text","image","json"].map(e=>I.jsx("option",{value:e,children:e},e))})}),I.jsx(eB.HC,{title:eF.ZP.Export.IncludeContext.Title,subTitle:eF.ZP.Export.IncludeContext.SubTitle,children:I.jsx("input",{type:"checkbox",checked:n.includeContext,onChange:e=>{l(t=>t.includeContext=e.currentTarget.checked)}})})]}),I.jsx(e4,{selection:o,updateSelection:c,defaultSelectAll:!0})]}),"preview"===t.value&&I.jsx("div",{className:eJ()["message-exporter-body"],children:"text"===n.format?I.jsx(to,{messages:m,topic:i.topic}):"json"===n.format?I.jsx(tc,{messages:m,topic:i.topic}):I.jsx(ti,{messages:m,topic:i.topic})})]})}function tn(e){let t=(0,K.useRef)(null);return(0,K.useEffect)(()=>{if(!t.current)return;let s=Array.from(t.current.getElementsByClassName(eV.yY));if(s.length!==e.messages.length)return;let a=s.map((e,t)=>{let[s,a]=e.id.split(":");return{id:t.toString(),role:s,content:"user"===s?e.textContent??"":e.innerHTML,date:""}});e.onRender(a)},[]),I.jsx("div",{ref:t,children:e.messages.map((e,t)=>I.jsx("div",{id:`${e.role}:${t}`,className:eV.yY,children:I.jsx(te,{content:(0,eA.YK)(e),defaultShow:!0})},t))})}function tr(e){let[t,s]=(0,K.useState)(!1),[a,n]=(0,K.useState)(!1),r=(0,ez.MG)(),l=async()=>{e.messages?.length&&(s(!0),n(!0))};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:eJ()["preview-actions"],children:[e.showCopy&&I.jsx(e$.h,{text:eF.ZP.Export.Copy,bordered:!0,shadow:!0,icon:I.jsx(U.Z,{}),onClick:e.copy}),I.jsx(e$.h,{text:eF.ZP.Export.Download,bordered:!0,shadow:!0,icon:I.jsx(e1.Z,{}),onClick:e.download}),I.jsx(e$.h,{text:eF.ZP.Export.Share,bordered:!0,shadow:!0,icon:t?I.jsx(Y.Z,{}):I.jsx(Q.Z,{}),onClick:l})]}),I.jsx("div",{style:{position:"fixed",right:"200vw",pointerEvents:"none"},children:a&&I.jsx(tn,{messages:e.messages??[],onRender:e=>{n(!1),(0,e5.Lw)(r.modelConfig.providerName).share(e).then(e=>{e&&((0,eB.K4)({title:eF.ZP.Export.Share,children:[I.jsx("input",{type:"text",value:e,style:{width:"100%",maxWidth:"unset"},readOnly:!0,onClick:e=>e.currentTarget.select()},"input")],actions:[I.jsx(e$.h,{icon:I.jsx(U.Z,{}),text:eF.ZP.Chat.Actions.Copy,onClick:()=>(0,eA.vQ)(e)},"copy")]}),setTimeout(()=>{window.open(e,"_blank")},800))}).catch(e=>{console.error("[Share]",e),(0,eB.CF)((0,eG.B)(e))}).finally(()=>s(!1))}})})]})}function tl(e){return e.avatar===eU._G?I.jsx("img",{src:e3.src,width:30,height:30,alt:"bot",className:"user-avatar"}):I.jsx(eQ.qE,{avatar:e.avatar})}function ti(e){let t=(0,ez.aK)().currentSession(),s=t.mask,a=(0,ez.MG)(),n=(0,K.useRef)(null),r=(0,eA.S0)(),l=async()=>{(0,eB.CF)(eF.ZP.Export.Image.Toast);let t=n.current;if(!t)return;let s=e9.Z()?.isApp;try{let a=await (0,e8.YM)(t);if(!a)return;if(r||s&&window.__TAURI__){if(s&&window.__TAURI__){let t=await window.__TAURI__.dialog.save({defaultPath:`${e.topic}.png`,filters:[{name:"PNG Files",extensions:["png"]},{name:"All Files",extensions:["*"]}]});if(null!==t){let e=await fetch(a),s=await e.arrayBuffer(),n=new Uint8Array(s);await window.__TAURI__.fs.writeBinaryFile(t,n),(0,eB.CF)(eF.ZP.Download.Success)}else(0,eB.CF)(eF.ZP.Download.Failed)}else(0,eB.vi)(a)}else{let t=document.createElement("a");t.download=`${e.topic}.png`,t.href=a,t.click(),i()}}catch(e){(0,eB.CF)(eF.ZP.Download.Failed)}},i=()=>{let e=n.current;e&&(e.innerHTML=e.innerHTML)};return(0,I.jsxs)("div",{className:eJ()["image-previewer"],children:[I.jsx(tr,{copy:()=>{(0,eB.CF)(eF.ZP.Export.Image.Toast);let e=n.current;e&&(0,e8.SE)(e).then(e=>{if(e)try{navigator.clipboard.write([new ClipboardItem({"image/png":e})]).then(()=>{(0,eB.CF)(eF.ZP.Copy.Success),i()})}catch(e){console.error("[Copy Image] ",e),(0,eB.CF)(eF.ZP.Copy.Failed)}})},download:l,showCopy:!r,messages:e.messages}),(0,I.jsxs)("div",{className:`${eJ()["preview-body"]} ${eJ()["default-theme"]}`,ref:n,children:[(0,I.jsxs)("div",{className:eJ()["chat-info"],children:[I.jsx("div",{className:eJ().logo+" no-dark",children:I.jsx(e7.default,{src:e0.Z.src,alt:"logo",width:50,height:50})}),(0,I.jsxs)("div",{children:[I.jsx("div",{className:eJ()["main-title"],children:"Artificial Imbecile"}),I.jsx("div",{className:eJ()["sub-title"],children:s.modelConfig.model}),(0,I.jsxs)("div",{className:eJ().icons,children:[I.jsx(tl,{avatar:a.avatar}),I.jsx("span",{className:eJ()["icon-space"],children:"&"}),I.jsx(tl,{avatar:s.avatar})]})]}),(0,I.jsxs)("div",{children:[(0,I.jsxs)("div",{className:eJ()["chat-info-item"],children:[eF.ZP.Exporter.Model,": ",s.modelConfig.model]}),(0,I.jsxs)("div",{className:eJ()["chat-info-item"],children:[eF.ZP.Exporter.Messages,": ",e.messages.length]}),(0,I.jsxs)("div",{className:eJ()["chat-info-item"],children:[eF.ZP.Exporter.Topic,": ",t.topic]}),(0,I.jsxs)("div",{className:eJ()["chat-info-item"],children:[eF.ZP.Exporter.Time,":"," ",new Date(e.messages.at(-1)?.date??Date.now()).toLocaleString()]})]})]}),e.messages.map((e,t)=>(0,I.jsxs)("div",{className:eJ().message+" "+eJ()["message-"+e.role],children:[I.jsx("div",{className:eJ().avatar,children:I.jsx(tl,{avatar:"user"===e.role?a.avatar:s.avatar})}),(0,I.jsxs)("div",{className:eJ().body,children:[I.jsx(te,{content:(0,eA.YK)(e),fontSize:a.fontSize,fontFamily:a.fontFamily,defaultShow:!0}),1==(0,eA.Bs)(e).length&&I.jsx("img",{src:(0,eA.Bs)(e)[0],alt:"message",className:eJ()["message-image"]},t),(0,eA.Bs)(e).length>1&&I.jsx("div",{className:eJ()["message-images"],style:{"--image-count":(0,eA.Bs)(e).length},children:(0,eA.Bs)(e).map((e,t)=>I.jsx("img",{src:e,alt:"message",className:eJ()["message-image-multi"]},t))})]})]},t))]})]})}function to(e){let t=`# ${e.topic}

`+e.messages.map(e=>"user"===e.role?`## ${eF.ZP.Export.MessageFromYou}:
${(0,eA.YK)(e)}`:`## ${eF.ZP.Export.MessageFromChatGPT}:
${(0,eA.YK)(e).trim()}`).join("\n\n");return(0,I.jsxs)(I.Fragment,{children:[I.jsx(tr,{copy:()=>{(0,eA.vQ)(t)},download:()=>{(0,eA.CP)(t,`${e.topic}.md`)},showCopy:!0,messages:e.messages}),I.jsx("div",{className:"markdown-body",children:I.jsx("pre",{className:eJ()["export-content"],children:t})})]})}function tc(e){let t={messages:[{role:"system",content:`${eF.ZP.FineTuned.Sysmessage} ${e.topic}`},...e.messages.map(e=>({role:e.role,content:e.content}))]},s="```json\n"+JSON.stringify(t,null,2)+"\n```",a=JSON.stringify(t),n=()=>{(0,eA.vQ)(a)};return(0,I.jsxs)(I.Fragment,{children:[I.jsx(tr,{copy:n,download:()=>{(0,eA.CP)(JSON.stringify(t),`${e.topic}.json`)},showCopy:!1,messages:e.messages}),I.jsx("div",{className:"markdown-body",onClick:n,children:I.jsx(te,{content:s})})]})}var tm=s(74255);let td=(0,eI.default)(async()=>(await s.e(768).then(s.bind(s,49768))).Markdown,{loadableGenerated:{modules:["/Volumes/D/github/ChatGPT-Next-Web/app/components/chat.tsx -> ./markdown"]},loading:()=>I.jsx(Y.Z,{})});function th(e){let t=(0,ez.aK)(),s=t.currentSession(),a=(0,eU.Zy)(),n=(0,eR.s0)();return I.jsx("div",{className:"modal-mask",children:I.jsx(eB.u_,{title:eF.ZP.Context.Edit,onClose:()=>e.onClose(),actions:[I.jsx(e$.h,{icon:I.jsx(es.Z,{}),bordered:!0,text:eF.ZP.Chat.Config.Reset,onClick:async()=>{await (0,eB.i0)(eF.ZP.Memory.ResetConfirm)&&t.updateCurrentSession(e=>e.memoryPrompt="")}},"reset"),I.jsx(e$.h,{icon:I.jsx(U.Z,{}),bordered:!0,text:eF.ZP.Chat.Config.SaveAs,onClick:()=>{n(eV.y$.Masks),setTimeout(()=>{a.create(s.mask)},500)}},"copy")],children:I.jsx(eX.MaskConfig,{mask:s.mask,updateMask:e=>{let a={...s.mask};e(a),t.updateCurrentSession(e=>e.mask=a)},shouldSyncFromGlobal:!0,extraListItems:s.mask.modelConfig.sendMemory?I.jsx(eB.HC,{className:"copyable",title:`${eF.ZP.Memory.Title} (${s.lastSummarizeIndex} of ${s.messages.length})`,subTitle:s.memoryPrompt||eF.ZP.Memory.EmptyContent}):I.jsx(I.Fragment,{})})})})}function tu(e){let t=(0,ez.aK)().currentSession().mask.context;return(0,I.jsxs)("div",{className:eW()["prompt-toast"],children:[e.showToast&&(0,I.jsxs)("div",{className:eW()["prompt-toast-inner"]+" clickable",role:"button",onClick:()=>e.setShowModal(!0),children:[I.jsx(B,{}),I.jsx("span",{className:eW()["prompt-toast-content"],children:eF.ZP.Context.Toast(t.length)})]}),e.showModal&&I.jsx(th,{onClose:()=>e.setShowModal(!1)})]},"prompt-toast")}function tp(e){let t=0===e.prompts.length,[s,a]=(0,K.useState)(0),n=(0,K.useRef)(null);return((0,K.useEffect)(()=>{a(0)},[e.prompts.length]),(0,K.useEffect)(()=>{let r=r=>{if(t||r.metaKey||r.altKey||r.ctrlKey)return;let l=t=>{r.stopPropagation(),r.preventDefault(),a(Math.max(0,Math.min(e.prompts.length-1,s+t))),n.current?.scrollIntoView({block:"center"})};if("ArrowUp"===r.key)l(1);else if("ArrowDown"===r.key)l(-1);else if("Enter"===r.key){let t=e.prompts.at(s);t&&e.onPromptSelect(t)}};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e.prompts.length,s]),t)?null:I.jsx("div",{className:eW()["prompt-hints"],children:e.prompts.map((t,r)=>(0,I.jsxs)("div",{ref:r===s?n:null,className:eW()["prompt-hint"]+` ${r===s?eW()["prompt-hint-selected"]:""}`,onClick:()=>e.onPromptSelect(t),onMouseEnter:()=>a(r),children:[I.jsx("div",{className:eW()["hint-title"],children:t.title}),I.jsx("div",{className:eW()["hint-content"],children:t.content})]},t.title+r.toString()))})}function tg(){let e=(0,ez.aK)();return(0,I.jsxs)("div",{className:eW()["clear-context"],onClick:()=>e.updateCurrentSession(e=>e.clearContextIndex=void 0),children:[I.jsx("div",{className:eW()["clear-context-tips"],children:eF.ZP.Context.Clear}),I.jsx("div",{className:eW()["clear-context-revert-btn"],children:eF.ZP.Context.Revert})]})}function tf(e){let t=(0,K.useRef)(null),s=(0,K.useRef)(null),[a,n]=(0,K.useState)({full:16,icon:16});function r(){if(!t.current||!s.current)return;let e=s.current.getBoundingClientRect().width,a=t.current.getBoundingClientRect().width;n({full:e+a,icon:a})}return(0,I.jsxs)("div",{className:`${eW()["chat-input-action"]} clickable`,onClick:()=>{e.onClick(),setTimeout(r,1)},onMouseEnter:r,onTouchStart:r,style:{"--icon-width":`${a.icon}px`,"--full-width":`${a.full}px`},children:[I.jsx("div",{ref:t,className:eW().icon,children:e.icon}),I.jsx("div",{className:eW().text,ref:s,children:e.text})]})}function tx(e){let t=(0,ez.MG)(),s=(0,eR.s0)(),a=(0,ez.aK)(),n=t.theme,r=eD.L.hasPending(),l=a.currentSession().mask.modelConfig.model,i=a.currentSession().mask.modelConfig?.providerName||eV.UT.OpenAI,o=(0,tm.l)(),c=(0,K.useMemo)(()=>{let e=o.filter(e=>e.available),t=e.find(e=>e.isDefault);return t?[t,...e.filter(e=>e!==t)]:e},[o]),m=(0,K.useMemo)(()=>{let e=c.find(e=>e.name==l&&e?.provider?.providerName==i);return e?.displayName??""},[c,l,i]),[d,h]=(0,K.useState)(!1),[u,p]=(0,K.useState)(!1),[g,f]=(0,K.useState)(!1),[x,v]=(0,K.useState)(!1),[w,_]=(0,K.useState)(!1),[k,y]=(0,K.useState)(!1),j=a.currentSession().mask.modelConfig?.size??"1024x1024",C=a.currentSession().mask.modelConfig?.quality??"standard",E=a.currentSession().mask.modelConfig?.style??"vivid";return(0,K.useEffect)(()=>{let t=(0,eA.Xf)(l);if(f(t),t||(e.setAttachImages([]),e.setUploading(!1)),!c.some(e=>e.name===l)&&c.length>0){let e=c.find(e=>e.isDefault)||c[0];a.updateCurrentSession(t=>{t.mask.modelConfig.model=e.name,t.mask.modelConfig.providerName=e?.provider?.providerName}),(0,eB.CF)(e?.provider?.providerName=="ByteDance"?e.displayName:e.name)}},[a,l,c]),(0,I.jsxs)("div",{className:eW()["chat-input-actions"],children:[r&&I.jsx(tf,{onClick:()=>eD.L.stopAll(),text:eF.ZP.Chat.InputActions.Stop,icon:I.jsx(ej,{})}),!e.hitBottom&&I.jsx(tf,{onClick:e.scrollToBottom,text:eF.ZP.Chat.InputActions.ToBottom,icon:I.jsx(ek,{})}),e.hitBottom&&I.jsx(tf,{onClick:e.showPromptModal,text:eF.ZP.Chat.InputActions.Settings,icon:I.jsx(el,{})}),g&&I.jsx(tf,{onClick:e.uploadImage,text:eF.ZP.Chat.InputActions.UploadImage,icon:e.uploading?I.jsx(G.Z,{}):I.jsx(eu,{})}),I.jsx(tf,{onClick:function(){let e=[ez.Q2.Auto,ez.Q2.Light,ez.Q2.Dark],s=(e.indexOf(n)+1)%e.length,a=e[s];t.update(e=>e.theme=a)},text:eF.ZP.Chat.InputActions.Theme[n],icon:I.jsx(I.Fragment,{children:n===ez.Q2.Auto?I.jsx(ew,{}):n===ez.Q2.Light?I.jsx(eg,{}):n===ez.Q2.Dark?I.jsx(ex,{}):null})}),I.jsx(tf,{onClick:e.showPromptHints,text:eF.ZP.Chat.InputActions.Prompt,icon:I.jsx(q.Z,{})}),I.jsx(tf,{onClick:()=>{s(eV.y$.Masks)},text:eF.ZP.Chat.InputActions.Masks,icon:I.jsx(J.Z,{})}),I.jsx(tf,{text:eF.ZP.Chat.InputActions.Clear,icon:I.jsx(en,{}),onClick:()=>{a.updateCurrentSession(e=>{e.clearContextIndex===e.messages.length?e.clearContextIndex=void 0:(e.clearContextIndex=e.messages.length,e.memoryPrompt="")})}}),I.jsx(tf,{onClick:()=>h(!0),text:m,icon:I.jsx(eE,{})}),d&&I.jsx(eB.Qf,{defaultSelectedValue:`${l}@${i}`,items:c.map(e=>({title:`${e.displayName}${e?.provider?.providerName?"("+e?.provider?.providerName+")":""}`,value:`${e.name}@${e?.provider?.providerName}`})),onClose:()=>h(!1),onSelection:e=>{if(0===e.length)return;let[t,s]=e[0].split("@");if(a.updateCurrentSession(e=>{e.mask.modelConfig.model=t,e.mask.modelConfig.providerName=s,e.mask.syncGlobalConfig=!1}),"ByteDance"==s){let e=c.find(e=>e.name==t&&e?.provider?.providerName==s);(0,eB.CF)(e?.displayName??"")}else(0,eB.CF)(t)}}),(0,eA.Wu)(l)&&I.jsx(tf,{onClick:()=>v(!0),text:j,icon:I.jsx(eS,{})}),x&&I.jsx(eB.Qf,{defaultSelectedValue:j,items:["1024x1024","1792x1024","1024x1792"].map(e=>({title:e,value:e})),onClose:()=>v(!1),onSelection:e=>{if(0===e.length)return;let t=e[0];a.updateCurrentSession(e=>{e.mask.modelConfig.size=t}),(0,eB.CF)(t)}}),(0,eA.Wu)(l)&&I.jsx(tf,{onClick:()=>_(!0),text:C,icon:I.jsx(eN,{})}),w&&I.jsx(eB.Qf,{defaultSelectedValue:C,items:["standard","hd"].map(e=>({title:e,value:e})),onClose:()=>_(!1),onSelection:e=>{if(0===e.length)return;let t=e[0];a.updateCurrentSession(e=>{e.mask.modelConfig.quality=t}),(0,eB.CF)(t)}}),(0,eA.Wu)(l)&&I.jsx(tf,{onClick:()=>y(!0),text:E,icon:I.jsx(eZ,{})}),k&&I.jsx(eB.Qf,{defaultSelectedValue:E,items:["vivid","natural"].map(e=>({title:e,value:e})),onClose:()=>y(!1),onSelection:e=>{if(0===e.length)return;let t=e[0];a.updateCurrentSession(e=>{e.mask.modelConfig.style=t}),(0,eB.CF)(t)}}),I.jsx(tf,{onClick:()=>p(!0),text:eF.ZP.Plugin.Name,icon:I.jsx(eH,{})}),u&&I.jsx(eB.Qf,{multiple:!0,defaultSelectedValue:a.currentSession().mask?.plugin,items:[{title:eF.ZP.Plugin.Artifacts,value:eV.Sy.Artifacts}],onClose:()=>p(!1),onSelection:e=>{let t=e[0];a.updateCurrentSession(t=>{t.mask.plugin=e}),t&&(0,eB.CF)(t)}})]})}function tv(e){let t=(0,ez.aK)(),s=t.currentSession(),[a,n]=(0,K.useState)(s.messages.slice());return I.jsx("div",{className:"modal-mask",children:(0,I.jsxs)(eB.u_,{title:eF.ZP.Chat.EditMessage.Title,onClose:e.onClose,actions:[I.jsx(e$.h,{text:eF.ZP.UI.Cancel,icon:I.jsx(ed.Z,{}),onClick:()=>{e.onClose()}},"cancel"),I.jsx(e$.h,{type:"primary",text:eF.ZP.UI.Confirm,icon:I.jsx(em.Z,{}),onClick:()=>{t.updateCurrentSession(e=>e.messages=a),e.onClose()}},"ok")],children:[I.jsx(eB.aV,{children:I.jsx(eB.HC,{title:eF.ZP.Chat.EditMessage.Topic.Title,subTitle:eF.ZP.Chat.EditMessage.Topic.SubTitle,children:I.jsx("input",{type:"text",value:s.topic,onInput:e=>t.updateCurrentSession(t=>t.topic=e.currentTarget.value)})})}),I.jsx(eX.ContextPrompts,{context:a,updateContext:e=>{let t=a.slice();e(t),n(t)}})]})})}function tw(e){return I.jsx("div",{className:eW()["delete-image"],onClick:e.deleteImage,children:I.jsx(ei.Z,{})})}function t_(){let e=(0,ez.aK)(),t=e.currentSession(),s=(0,ez.MG)(),a=s.fontSize,n=s.fontFamily,[r,l]=(0,K.useState)(!1),i=(0,K.useRef)(null),[o,c]=(0,K.useState)(""),[m,d]=(0,K.useState)(!1),{submitKey:h,shouldSubmit:u}=function(){let e=(0,ez.MG)(),t=e.submitKey,s=(0,K.useRef)(!1);return(0,K.useEffect)(()=>{let e=()=>{s.current=!0},t=()=>{s.current=!1};return window.addEventListener("compositionstart",e),window.addEventListener("compositionend",t),()=>{window.removeEventListener("compositionstart",e),window.removeEventListener("compositionend",t)}},[]),{submitKey:t,shouldSubmit:t=>229!=t.keyCode&&"Enter"===t.key&&("Enter"!==t.key||!t.nativeEvent.isComposing&&!s.current)&&(e.submitKey===ez.mQ.AltEnter&&t.altKey||e.submitKey===ez.mQ.CtrlEnter&&t.ctrlKey||e.submitKey===ez.mQ.ShiftEnter&&t.shiftKey||e.submitKey===ez.mQ.MetaEnter&&t.metaKey||e.submitKey===ez.mQ.Enter&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&!t.metaKey)}}(),p=(0,K.useRef)(null),g=!!p?.current&&1>=Math.abs(p.current.scrollHeight-(p.current.scrollTop+p.current.clientHeight)),{setAutoScroll:f,scrollDomToBottom:x}=function(e,t=!1){let[s,a]=(0,K.useState)(!0);function n(){let t=e.current;t&&requestAnimationFrame(()=>{a(!0),t.scrollTo(0,t.scrollHeight)})}return(0,K.useEffect)(()=>{s&&!t&&n()}),{scrollRef:e,autoScroll:s,setAutoScroll:a,scrollDomToBottom:n}}(p,g),[v,w]=(0,K.useState)(!0),_=(0,eA.S0)(),k=(0,eR.s0)(),[y,j]=(0,K.useState)([]),[C,E]=(0,K.useState)(!1),b=(0,eK.f)(),[S,M]=(0,K.useState)([]),N=(0,D.y1)(e=>{M(b.search(e))},100,{leading:!0,trailing:!0}),[P,Z]=(0,K.useState)(2),O=(0,D.y1)(()=>{let e=i.current?(0,eA.lx)(i.current):1;Z(Math.min(20,Math.max(2+Number(!_),e)))},100,{leading:!0,trailing:!0});(0,K.useEffect)(O,[o]);let H=(0,eY.UK)({new:()=>e.newSession(),newm:()=>k(eV.y$.NewChat),prev:()=>e.nextSession(-1),next:()=>e.nextSession(1),clear:()=>e.updateCurrentSession(e=>e.clearContextIndex=e.messages.length),del:()=>e.deleteSession(e.currentSessionIndex)}),z=e=>{c(e);let t=e.trim().length;0===t?M([]):e.match(eY.x6)?M(H.search(e)):!s.disablePromptHint&&t<30&&e.startsWith("/")&&N(e.slice(1))},A=t=>{if(""===t.trim())return;let s=H.match(t);if(s.matched){c(""),M([]),s.invoke();return}d(!0),e.onUserInput(t,y).then(()=>d(!1)),j([]),localStorage.setItem(eV.Sb,t),c(""),M([]),_||i.current?.focus(),f(!0)},T=e=>{eD.L.stop(t.id,e)};(0,K.useEffect)(()=>{e.updateCurrentSession(e=>{let t=Date.now()-eV.tb;e.messages.forEach(e=>{(e.isError||new Date(e.date).getTime()<t)&&(e.streaming&&(e.streaming=!1),0===e.content.length&&(e.isError=!0,e.content=(0,eG.B)({error:!0,message:"empty response"})))}),e.mask.syncGlobalConfig&&(console.log("[Mask] syncing from global, name = ",e.mask.name),e.mask.modelConfig={...s.modelConfig})})},[]);let F=(e,t)=>{(0,eA.Ri)(e.currentTarget,(0,eA.YK)(t))&&(0===o.length&&c((0,eA.YK)(t)),e.preventDefault())},$=t=>{e.updateCurrentSession(e=>e.messages=e.messages.filter(e=>e.id!==t))},W=e=>{$(e)},B=s=>{let a,n;let r=t.messages.findIndex(e=>e.id===s.id);if(r<0||r>=t.messages.length){console.error("[Chat] failed to find resending message",s);return}if("assistant"===s.role){n=s;for(let e=r;e>=0;e-=1)if("user"===t.messages[e].role){a=t.messages[e];break}}else if("user"===s.role){a=s;for(let e=r;e<t.messages.length;e+=1)if("assistant"===t.messages[e].role){n=t.messages[e];break}}if(void 0===a){console.error("[Chat] failed to resend",s);return}$(a.id),$(n?.id),d(!0);let l=(0,eA.YK)(a),o=(0,eA.Bs)(a);e.onUserInput(l,o).then(()=>d(!1)),i.current?.focus()},R=t=>{e.updateCurrentSession(e=>e.mask.context.push(t)),(0,eB.CF)(eF.ZP.Chat.Actions.PinToastContent,{text:eF.ZP.Chat.Actions.PinToastAction,onClick:()=>{eh(!0)}})},Y=(0,K.useMemo)(()=>t.mask.hideContext?[]:t.mask.context.slice(),[t.mask.context,t.mask.hideContext]),G=(0,ez._X)();if(0===Y.length&&t.messages.at(0)?.content!==ez.ux.content){let e=Object.assign({},ez.ux);G.isAuthorized()||(e.content=eF.ZP.Error.Unauthorized),Y.push(e)}let q=(0,K.useMemo)(()=>Y.concat(t.messages).concat(m?[{...(0,ez.tn)({role:"assistant",content:"â€¦â€¦"}),preview:!0}]:[]).concat(o.length>0&&s.sendPreviewBubble?[{...(0,ez.tn)({role:"user",content:o}),preview:!0}]:[]),[s.sendPreviewBubble,Y,m,t.messages,o]),[J,ea]=(0,K.useState)(Math.max(0,q.length-eV.nS));function en(e){ea(e=Math.max(0,e=Math.min(q.length-eV.nS,e)))}let er=(0,K.useMemo)(()=>{let e=Math.min(J+3*eV.nS,q.length);return q.slice(J,e)},[J,q]),el=e=>{let t=e.scrollTop+e.clientHeight,s=e.clientHeight,a=e.scrollTop<=s,n=t>=e.scrollHeight-s,r=t>=e.scrollHeight-(_?4:10),l=J-eV.nS,i=J+eV.nS;a&&!n?en(l):n&&en(i),w(r),f(r)};function eo(){en(q.length-eV.nS),x()}let em=(t.clearContextIndex??-1)>=0?t.clearContextIndex+Y.length-J:-1,[ed,eh]=(0,K.useState)(!1),eu=(0,K.useMemo)(()=>(0,e9.Z)(),[]),ep=!_&&!eu?.isApp;(0,eY.YZ)({fill:c,submit:e=>{A(e)},code:e=>{G.disableFastLink||(console.log("[Command] got code from url: ",e),(0,eB.i0)(eF.ZP.URLCommand.Code+`code = ${e}`).then(t=>{t&&G.update(t=>t.accessCode=e)}))},settings:e=>{if(!G.disableFastLink)try{let t=JSON.parse(e);console.log("[Command] got settings from url: ",t),(t.key||t.url)&&(0,eB.i0)(eF.ZP.URLCommand.Settings+`
${JSON.stringify(t,null,4)}`).then(e=>{e&&(t.key&&G.update(e=>e.openaiApiKey=t.key),t.url&&G.update(e=>e.openaiUrl=t.url),G.update(e=>e.useCustomConfig=!0))})}catch{console.error("[Command] failed to get settings from url: ",e)}}});let[eg,ef]=(0,K.useState)(!1);(0,K.useEffect)(()=>{let e=(0,eV.AI)(t.id),s=localStorage.getItem(e);s&&0===o.length&&(c(s),localStorage.removeItem(e));let a=i.current;return()=>{localStorage.setItem(e,a?.value??"")}},[]);let ex=(0,K.useCallback)(async t=>{let s=e.currentSession().mask.modelConfig.model;if((0,eA.Xf)(s)){for(let e of(t.clipboardData||window.clipboardData).items)if("file"===e.kind&&e.type.startsWith("image/")){t.preventDefault();let s=e.getAsFile();if(s){let e=[];e.push(...y),e.push(...await new Promise((e,t)=>{E(!0);let a=[];(0,eT.Ix)(s).then(t=>{a.push(t),E(!1),e(a)}).catch(e=>{E(!1),t(e)})}));let t=e.length;t>3&&e.splice(3,t-3),j(e)}}}},[y,e]);async function ev(){let e=[];e.push(...y),e.push(...await new Promise((e,t)=>{let s=document.createElement("input");s.type="file",s.accept="image/png, image/jpeg, image/webp, image/heic, image/heif",s.multiple=!0,s.onchange=s=>{E(!0);let a=s.target.files,n=[];for(let r=0;r<a.length;r++){let l=s.target.files[r];(0,eT.Ix)(l).then(t=>{n.push(t),(3===n.length||n.length===a.length)&&(E(!1),e(n))}).catch(e=>{E(!1),t(e)})}},s.click()}));let t=e.length;t>3&&e.splice(3,t-3),j(e)}return(0,I.jsxs)("div",{className:eW().chat,children:[(0,I.jsxs)("div",{className:"window-header","data-tauri-drag-region":!0,children:[_&&I.jsx("div",{className:"window-actions",children:I.jsx("div",{className:"window-action-button",children:I.jsx(e$.h,{icon:I.jsx(X.Z,{}),bordered:!0,title:eF.ZP.Chat.Actions.ChatList,onClick:()=>k(eV.y$.Home)})})}),(0,I.jsxs)("div",{className:`window-header-title ${eW()["chat-body-title"]}`,children:[I.jsx("div",{className:`window-header-main-title ${eW()["chat-body-main-title"]}`,onClickCapture:()=>ef(!0),children:t.topic?t.topic:ez.HX}),I.jsx("div",{className:"window-header-sub-title",children:eF.ZP.Chat.SubTitle(t.messages.length)})]}),(0,I.jsxs)("div",{className:"window-actions",children:[!_&&I.jsx("div",{className:"window-action-button",children:I.jsx(e$.h,{icon:I.jsx(V,{}),bordered:!0,title:eF.ZP.Chat.EditMessage.Title,aria:eF.ZP.Chat.EditMessage.Title,onClick:()=>ef(!0)})}),I.jsx("div",{className:"window-action-button",children:I.jsx(e$.h,{icon:I.jsx(Q.Z,{}),bordered:!0,title:eF.ZP.Chat.Actions.Export,onClick:()=>{l(!0)}})}),ep&&I.jsx("div",{className:"window-action-button",children:I.jsx(e$.h,{icon:s.tightBorder?I.jsx(et.Z,{}):I.jsx(ee.Z,{}),bordered:!0,title:eF.ZP.Chat.Actions.FullScreen,aria:eF.ZP.Chat.Actions.FullScreen,onClick:()=>{s.update(e=>e.tightBorder=!e.tightBorder)}})})]}),I.jsx(tu,{showToast:!v,showModal:ed,setShowModal:eh})]}),I.jsx("div",{className:eW()["chat-body"],ref:p,onScroll:e=>el(e.currentTarget),onMouseDown:()=>i.current?.blur(),onTouchStart:()=>{i.current?.blur(),f(!1)},children:er.map((r,l)=>{let i="user"===r.role,o=l<Y.length,m=l>0&&!(r.preview||0===r.content.length)&&!o,d=r.preview||r.streaming;return(0,I.jsxs)(K.Fragment,{children:[I.jsx("div",{className:i?eW()["chat-message-user"]:eW()["chat-message"],children:(0,I.jsxs)("div",{className:eW()["chat-message-container"],children:[(0,I.jsxs)("div",{className:eW()["chat-message-header"],children:[(0,I.jsxs)("div",{className:eW()["chat-message-avatar"],children:[I.jsx("div",{className:eW()["chat-message-edit"],children:I.jsx(e$.h,{icon:I.jsx(V,{}),aria:eF.ZP.Chat.Actions.Edit,onClick:async()=>{let t=await (0,eB.G5)(eF.ZP.Chat.Actions.Edit,(0,eA.YK)(r),10),s=t,a=(0,eA.Bs)(r);if(a.length>0){s=[{type:"text",text:t}];for(let e=0;e<a.length;e++)s.push({type:"image_url",image_url:{url:a[e]}})}e.updateCurrentSession(e=>{let t=e.mask.context.concat(e.messages).find(e=>e.id===r.id);t&&(t.content=s)})}})}),i?I.jsx(eQ.qE,{avatar:s.avatar}):I.jsx(I.Fragment,{children:["system"].includes(r.role)?I.jsx(eQ.qE,{avatar:"2699-fe0f"}):I.jsx(eX.MaskAvatar,{avatar:t.mask.avatar,model:r.model||t.mask.modelConfig.model})})]}),!i&&I.jsx("div",{className:eW()["chat-model-name"],children:r.model}),m&&I.jsx("div",{className:eW()["chat-message-actions"],children:I.jsx("div",{className:eW()["chat-input-actions"],children:r.streaming?I.jsx(tf,{text:eF.ZP.Chat.Actions.Stop,icon:I.jsx(ej,{}),onClick:()=>T(r.id??l)}):(0,I.jsxs)(I.Fragment,{children:[I.jsx(tf,{text:eF.ZP.Chat.Actions.Retry,icon:I.jsx(es.Z,{}),onClick:()=>B(r)}),I.jsx(tf,{text:eF.ZP.Chat.Actions.Delete,icon:I.jsx(ei.Z,{}),onClick:()=>W(r.id??l)}),I.jsx(tf,{text:eF.ZP.Chat.Actions.Pin,icon:I.jsx(ec,{}),onClick:()=>R(r)}),I.jsx(tf,{text:eF.ZP.Chat.Actions.Copy,icon:I.jsx(U.Z,{}),onClick:()=>(0,eA.vQ)((0,eA.YK)(r))})]})})})]}),d&&I.jsx("div",{className:eW()["chat-message-status"],children:eF.ZP.Chat.Typing}),(0,I.jsxs)("div",{className:eW()["chat-message-item"],children:[I.jsx(td,{content:(0,eA.YK)(r),loading:(r.preview||r.streaming)&&0===r.content.length&&!i,onContextMenu:e=>F(e,r),onDoubleClickCapture:()=>{_&&c((0,eA.YK)(r))},fontSize:a,fontFamily:n,parentRef:p,defaultShow:l>=er.length-6},r.streaming?"loading":"done"),1==(0,eA.Bs)(r).length&&I.jsx("img",{className:eW()["chat-message-item-image"],src:(0,eA.Bs)(r)[0],alt:""}),(0,eA.Bs)(r).length>1&&I.jsx("div",{className:eW()["chat-message-item-images"],style:{"--image-count":(0,eA.Bs)(r).length},children:(0,eA.Bs)(r).map((e,t)=>I.jsx("img",{className:eW()["chat-message-item-image-multi"],src:e,alt:""},t))})]}),I.jsx("div",{className:eW()["chat-message-action-date"],children:o?eF.ZP.Chat.IsContext:r.date.toLocaleString()})]})}),l===em-1&&I.jsx(tg,{})]},r.id)})}),(0,I.jsxs)("div",{className:eW()["chat-input-panel"],children:[I.jsx(tp,{prompts:S,onPromptSelect:e=>{setTimeout(()=>{M([]);let t=H.match(e.content);t.matched?(t.invoke(),c("")):c(e.content),i.current?.focus()},30)}}),I.jsx(tx,{uploadImage:ev,setAttachImages:j,setUploading:E,showPromptModal:()=>eh(!0),scrollToBottom:eo,hitBottom:v,uploading:C,showPromptHints:()=>{if(S.length>0){M([]);return}i.current?.focus(),c("/"),N("")}}),(0,I.jsxs)("label",{className:`${eW()["chat-input-panel-inner"]} ${0!=y.length?eW()["chat-input-panel-inner-attach"]:""}`,htmlFor:"chat-input",children:[I.jsx("textarea",{id:"chat-input",ref:i,className:eW()["chat-input"],placeholder:eF.ZP.Chat.Input(h),onInput:e=>z(e.currentTarget.value),value:o,onKeyDown:e=>{if("ArrowUp"===e.key&&o.length<=0&&!(e.metaKey||e.altKey||e.ctrlKey)){c(localStorage.getItem(eV.Sb)??""),e.preventDefault();return}u(e)&&0===S.length&&(A(o),e.preventDefault())},onFocus:eo,onClick:eo,onPaste:ex,rows:P,autoFocus:!_,style:{fontSize:s.fontSize,fontFamily:s.fontFamily}}),0!=y.length&&I.jsx("div",{className:eW()["attach-images"],children:y.map((e,t)=>I.jsx("div",{className:eW()["attach-image"],style:{backgroundImage:`url("${e}")`},children:I.jsx("div",{className:eW()["attach-image-mask"],children:I.jsx(tw,{deleteImage:()=>{j(y.filter((e,s)=>s!==t))}})})},t))}),I.jsx(e$.h,{icon:I.jsx(L,{}),text:eF.ZP.Chat.Send,className:eW()["chat-input-send"],type:"primary",onClick:()=>A(o)})]})]}),r&&I.jsx(tt,{onClose:()=>l(!1)}),eg&&I.jsx(tv,{onClose:()=>{ef(!1)}})]},t.id)}function tk(){let e=(0,ez.aK)().currentSessionIndex;return I.jsx(t_,{},e)}},52097:e=>{e.exports={"message-exporter-body":"exporter_message-exporter-body__ieezO","export-content":"exporter_export-content__bLZvx",steps:"exporter_steps__6n3hv","steps-progress":"exporter_steps-progress__BaZCB","steps-progress-inner":"exporter_steps-progress-inner__Bx3Y4","steps-inner":"exporter_steps-inner__EVqvK",step:"exporter_step__WhCEO","step-finished":"exporter_step-finished__eBg9d","step-current":"exporter_step-current__oh5Mc","step-index":"exporter_step-index__bWRYR","step-name":"exporter_step-name__aj81m","preview-actions":"exporter_preview-actions__EdSLJ","image-previewer":"exporter_image-previewer__uKfNQ","preview-body":"exporter_preview-body__qK5Zf","chat-info":"exporter_chat-info__N_j5m",icons:"exporter_icons__7WRoV",logo:"exporter_logo__zu13e","main-title":"exporter_main-title__jjxAd","sub-title":"exporter_sub-title__p1RCl","icon-space":"exporter_icon-space__u_tMK","chat-info-item":"exporter_chat-info-item__3D12j",message:"exporter_message__3aahS",avatar:"exporter_avatar__fGOtt",body:"exporter_body__gcKIl","message-image":"exporter_message-image__ofOeC","message-images":"exporter_message-images__oJoIX","message-image-multi":"exporter_message-image-multi__jzQdX","message-assistant":"exporter_message-assistant__sDmHi","message-user":"exporter_message-user__2t254"}},56270:e=>{e.exports={"message-selector":"message-selector_message-selector__dOKbo","message-filter":"message-selector_message-filter__Q5XSd","search-bar":"message-selector_search-bar__4E5gq",actions:"message-selector_actions__MyZCT",messages:"message-selector_messages__GbOLr",message:"message-selector_message___TaV9","message-selected":"message-selector_message-selected__b3mDv",avatar:"message-selector_avatar__HCJ8t",body:"message-selector_body__rKEIZ",date:"message-selector_date__vc48w",content:"message-selector_content__Z9W8L",checkbox:"message-selector_checkbox__erPyd"}}};