exports.id=435,exports.ids=[435],exports.modules={17382:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r,a,s=n(6413);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let i=function(e){return s.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=s.createElement("defs",null,s.createElement("path",{id:"clear_svg__a",d:"M0 0h16v16H0z"}))),s.createElement("g",null,a||(a=s.createElement("mask",{id:"clear_svg__b",fill:"#fff"},s.createElement("use",{xlinkHref:"#clear_svg__a"}))),s.createElement("g",{mask:"url(#clear_svg__b)"},s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1 9.67h8.67l1-9.67H0l1 9.67Z",transform:"translate(2.667 5)"}),s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v3.33",transform:"translate(6.667 8.334)"}),s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v3.33",transform:"translate(9.334 8.333)"}),s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 4 5.44-4L8 4",transform:"translate(4 1)"}))))}},50952:(e,t,n)=>{"use strict";n.d(t,{UK:()=>o,YZ:()=>l,x6:()=>i});var r=n(3729),a=n(76060),s=n(9719);function l(e={}){let[t,n]=(0,a.lr)();(0,r.useEffect)(()=>{let r=!1;t.forEach((n,a)=>{"function"==typeof e[a]&&(e[a](n),t.delete(a),r=!0)}),r&&n(t)},[t,e])}let i=":";function o(e={}){function t(e){return e.startsWith(i)?e.slice(1):e}return{match:function(n){let r=t(n),a="function"==typeof e[r];return{matched:a,invoke:()=>a&&e[r](n)}},search:function(n){let r=t(n),a=s.ZP.Chat.Commands;return Object.keys(e).filter(e=>e.startsWith(r)).map(e=>({title:a[e],content:i+e}))}}}},57435:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Chat:()=>nt,ChatActions:()=>t8,DeleteImageButton:()=>t5,EditMessageModal:()=>t9,PromptHints:()=>t2,SessionConfigModel:()=>t1});var r,a,s,l,i,o,c,u,d,m,h,f,p,g,x,v,y,w,_,b,k,j,E,C,S,P,M,N,O,Z,I,A,T,R=n(95344),z=n(75499),D=n(3729),$=n(6413);function H(){return(H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let L=function(e){return $.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=$.createElement("defs",null,$.createElement("path",{id:"send-white_svg__a",d:"M0 0h16v16H0z"}))),$.createElement("g",null,a||(a=$.createElement("mask",{id:"send-white_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#send-white_svg__a"}))),$.createElement("g",{mask:"url(#send-white_svg__b)"},$.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 4.71 6.67 6l1.67 6.67L12.67 0 0 4.71Z",transform:"translate(1.333 2)"}),$.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 1.89 1.89 0",transform:"translate(8.003 6.117)"}))))};function F(){return(F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let K=function(e){return $.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),s||(s=$.createElement("defs",null,$.createElement("path",{id:"brain_svg__a",d:"M0 0h16v16H0z"}))),$.createElement("g",null,l||(l=$.createElement("mask",{id:"brain_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#brain_svg__a"}))),$.createElement("g",{mask:"url(#brain_svg__b)"},$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M5.01 13.33c-.32-1.06-.82-1.86-1.48-2.38-.98-.78-2.56-.3-3.14-1.11-.58-.8.41-2.29.76-3.17.34-.88-1.33-1.19-1.13-1.44.13-.16.97-.64 2.53-1.44C3 1.26 4.63 0 7.47 0c4.24 0 5.86 3.6 5.86 5.89 0 2.29-1.96 4.76-4.75 5.29-.25.37.11 1.08 1.08 2.15",transform:"translate(1.333 1.333)"}),$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M2.1 3.33c-.19 1.09.04 1.6.69 1.53.65-.07 1.05-.34 1.18-.81 1.02.28 1.57.04 1.66-.72.12-1.15-.5-2.07-.75-2.07s-.91-.03-.91-.38C3.97.52 3.2.33 2.5.33c-.69 0-.27-.47-1.23-.29C.64.17.26.44.13.88c-.22.84-.16 1.43.19 1.78.35.34.94.56 1.78.67Z",transform:"translate(6.374 3.957)"}),$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1.97 0c-.34.21-.8.56-1 .83-.49.69-.88 1.1-.97 1.54",transform:"translate(8.193 8.5)"}))))};function W(){return(W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let B=function(e){return $.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),i||(i=$.createElement("defs",null,$.createElement("path",{id:"rename_svg__a",d:"M0 0h16v16H0z"}))),$.createElement("g",null,o||(o=$.createElement("mask",{id:"rename_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#rename_svg__a"}))),$.createElement("g",{mask:"url(#rename_svg__b)"},$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M2.83 13.2 13.2 2.83 10.37 0 0 10.37v2.83h2.83Z",transform:"translate(1.775 1.3)"}),$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 0 2.83 2.83",transform:"translate(9.317 4.13)"}))))};function U(){return(U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let V=function(e){return $.createElement("svg",U({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),c||(c=$.createElement("defs",null,$.createElement("path",{id:"share_svg__a",d:"M0 0h16v16H0z"}))),$.createElement("g",null,u||(u=$.createElement("mask",{id:"share_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#share_svg__a"}))),$.createElement("g",{mask:"url(#share_svg__b)"},$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M6.67 3.67C1.67 3.67 0 7.33 0 13c0 0 2-5 6.67-5v3.67l6-5.67-6-6v3.67Z",transform:"translate(2 1.333)"}))))};function G(){return(G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let X=function(e){return $.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),d||(d=$.createElement("defs",null,$.createElement("path",{id:"return_svg__a",d:"M0 0h16v16H0z"}))),$.createElement("g",null,m||(m=$.createElement("mask",{id:"return_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#return_svg__a"}))),$.createElement("g",{mask:"url(#return_svg__b)"},$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M2.33 0 0 2l2.33 2.33",transform:"translate(2 2.667)"}),$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0h7.66c2.3 0 4.25 1.87 4.34 4.17.09 2.42-1.91 4.5-4.34 4.5H2",transform:"translate(2 4.667)"}))))};var q=n(81482),Y=n(39866);function Q(){return(Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let J=function(e){return $.createElement("svg",Q({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"#fff"},e),h||(h=$.createElement("rect",{width:"100%",height:"100%",fill:"none"})),f||(f=$.createElement("g",{className:"loading_svg__currentLayer"},$.createElement("circle",{cx:4,cy:8,r:1.926,fill:"#333"},$.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:2,repeatCount:"indefinite",to:2,values:"2;1.2;2"}),$.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:1,repeatCount:"indefinite",to:1,values:"1;.5;1"})),$.createElement("circle",{cx:8,cy:8,r:1.274,fill:"#333",fillOpacity:.3},$.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:1.2,repeatCount:"indefinite",to:1.2,values:"1.2;2;1.2"}),$.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:.5,repeatCount:"indefinite",to:.5,values:".5;1;.5"})),$.createElement("circle",{cx:12,cy:8,r:1.926,fill:"#333"},$.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:2,repeatCount:"indefinite",to:2,values:"2;1.2;2"}),$.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:1,repeatCount:"indefinite",to:1,values:"1;.5;1"})))))};function ee(){return(ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let et=function(e){return $.createElement("svg",ee({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),p||(p=$.createElement("defs",null,$.createElement("path",{id:"prompt_svg__a",d:"M0 0h16v16H0z"}))),$.createElement("g",null,g||(g=$.createElement("mask",{id:"prompt_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#prompt_svg__a"}))),$.createElement("g",{mask:"url(#prompt_svg__b)"},$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3,strokeOpacity:1,strokeDasharray:"0 0"},d:"m1.367 1.367 1.41 1.41M4.667 0v2m0 0V0m3.295 1.367-1.41 1.41m0 0 1.41-1.41m1.371 3.3h-2m0 0h2m-1.37 3.295-1.41-1.41m0 0 1.41 1.41M4.666 9.333v-2m0 0v2m-3.3-1.37 1.41-1.41m0 0-1.41 1.41M0 4.666h2m0 0H0",transform:"translate(5.333 1.333)"}),$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8.01 0 0 8.01",transform:"translate(1.848 6.138)"}))))};var en=n(38740),er=n(34423),ea=n(66363),es=n(30841);function el(){return(el=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let ei=function(e){return $.createElement("svg",el({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),$.createElement("path",{style:{fill:"#333",opacity:1},d:"M13.275-.275c.261.26.392.576.392.945v10.66c0 .37-.131.684-.392.945a1.288 1.288 0 0 1-.945.392H1.67c-.37 0-.684-.13-.945-.392a1.288 1.288 0 0 1-.392-.945V.67c0-.37.13-.684.392-.945.26-.261.576-.392.945-.392h10.66c.369 0 .684.13.945.392zM1.667 11.33c0 .002 0 .003.003.003h10.66c.002 0 .003 0 .003-.003V.67c0-.002 0-.003-.003-.003H1.67c-.002 0-.003 0-.003.003z",transform:"translate(1 2)"}),$.createElement("path",{style:{fill:"#333",opacity:1},d:"M9.763 7.507a.666.666 0 0 1-.867 0L7 5.878 5.104 7.506a.665.665 0 0 1-.867.001L2.331 5.878.434 7.506a.66.66 0 0 1-.485.16.66.66 0 0 1-.53-.338.665.665 0 0 1 .147-.834l2.33-2a.666.666 0 0 1 .867 0L4.67 6.123l1.897-1.629a.666.666 0 0 1 .868 0l1.897 1.629 1.906-1.63a.668.668 0 0 1 .867.002l2.33 2a.66.66 0 0 1 .23.455.661.661 0 0 1-.252.575.666.666 0 0 1-.846-.019l-1.897-1.628z",transform:"translate(1 2)"}),x||(x=$.createElement("defs",null,$.createElement("path",{id:"break_svg__a",d:"M0 0h16v16H0z"}))))};function eo(){return(eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let ec=function(e){return $.createElement("svg",eo({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),$.createElement("g",null,v||(v=$.createElement("mask",{id:"chat-settings_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#chat-settings_svg__a"}))),$.createElement("g",{mask:"url(#chat-settings_svg__b)"},$.createElement("path",{style:{fill:"#333",opacity:1},d:"M6.728 14.598a.665.665 0 0 1-.828.434 7.294 7.294 0 0 1-3.187-1.945.666.666 0 0 1-.026-.896c.207-.241.31-.527.31-.857 0-.37-.13-.685-.389-.944A1.286 1.286 0 0 0 1.663 10h-.08a.662.662 0 0 1-.665-.288.665.665 0 0 1-.098-.235 7.234 7.234 0 0 1 .188-3.675.662.662 0 0 1 .635-.465h.02c.37 0 .684-.13.944-.392.26-.26.39-.574.39-.942 0-.215-.045-.415-.134-.6a.666.666 0 0 1 .148-.78A7.292 7.292 0 0 1 6.034.932a.666.666 0 0 1 .774.34c.11.219.272.394.483.524.216.135.454.202.712.202.254 0 .488-.067.703-.201.211-.131.372-.306.483-.524a.666.666 0 0 1 .773-.34 7.404 7.404 0 0 1 3.03 1.688.664.664 0 0 1 .143.8c-.09.174-.135.368-.135.583 0 .366.13.68.392.941.262.262.575.393.941.393h.03a.664.664 0 0 1 .636.465c.22.695.331 1.43.331 2.201a7.34 7.34 0 0 1-.143 1.474.66.66 0 0 1-.27.411.666.666 0 0 1-.478.115 1 1 0 0 0-.106-.003c-.367 0-.681.13-.941.39-.261.26-.392.574-.392.943 0 .322.106.61.317.865a.662.662 0 0 1 .1.686.671.671 0 0 1-.133.202 7.294 7.294 0 0 1-3.187 1.945.674.674 0 0 1-.503-.047.659.659 0 0 1-.325-.387 1.311 1.311 0 0 0-.477-.667 1.288 1.288 0 0 0-.789-.26c-.297 0-.564.087-.798.26-.23.17-.389.393-.477.667zm3.52-1.032c.626-.253 1.191-.6 1.696-1.042a2.603 2.603 0 0 1-.277-1.19 2.642 2.642 0 0 1 .784-1.888 2.646 2.646 0 0 1 1.51-.753 6.393 6.393 0 0 0-.118-2.067 2.655 2.655 0 0 1-1.394-.738 2.656 2.656 0 0 1-.782-1.884c0-.239.029-.468.087-.687a6.05 6.05 0 0 0-1.693-.954c-.182.22-.398.41-.65.566-.431.268-.9.402-1.408.402-.511 0-.983-.134-1.414-.401a2.632 2.632 0 0 1-.653-.567 5.936 5.936 0 0 0-1.69.957 2.74 2.74 0 0 1-.125 1.72c-.134.319-.324.601-.57.847a2.641 2.641 0 0 1-1.389.738 5.903 5.903 0 0 0-.12 2.069 2.642 2.642 0 0 1 1.509.753 2.654 2.654 0 0 1 .779 1.888c0 .433-.091.831-.274 1.192.504.44 1.068.787 1.692 1.04.172-.272.393-.507.664-.707.47-.348 1-.522 1.591-.522.587 0 1.115.174 1.584.523.27.2.49.435.661.705z"}),$.createElement("path",{style:{fill:"#333",opacity:1},d:"M10.122 10.122a2.987 2.987 0 0 1-2.125.881 2.969 2.969 0 0 1-2.122-.883 2.983 2.983 0 0 1-.64-.955A2.984 2.984 0 0 1 5 7.997a2.974 2.974 0 0 1 .876-2.12A2.974 2.974 0 0 1 7.996 5c.407 0 .797.078 1.169.235.36.151.678.364.955.64a2.969 2.969 0 0 1 .883 2.122 2.987 2.987 0 0 1-.881 2.125zM7.997 6.333c-.461 0-.854.162-1.178.486a1.603 1.603 0 0 0-.486 1.178c0 .462.163.857.488 1.183.324.327.716.49 1.176.49.46 0 .855-.164 1.182-.491.327-.327.491-.721.491-1.182 0-.46-.163-.852-.49-1.176a1.618 1.618 0 0 0-1.183-.488z"}))),y||(y=$.createElement("defs",null,$.createElement("path",{id:"chat-settings_svg__a",d:"M0 0h16v16H0z"}))))};var eu=n(17382);function ed(){return(ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let em=function(e){return $.createElement("svg",ed({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),$.createElement("g",null,w||(w=$.createElement("mask",{id:"pin_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#pin_svg__a"}))),$.createElement("g",{mask:"url(#pin_svg__b)"},$.createElement("path",{style:{fill:"#333",opacity:1},d:"m6.685 8.81-4 5.44-.537-.394-.397-.536 5.42-4.01a.666.666 0 0 1 .866.062l.532.528 2.07 2.063-.471.473-.472-.472c.3-.3.457-.62.472-.963.015-.353-.108-.798-.37-1.333a.665.665 0 0 1 .017-.616l2.36-4.25a.662.662 0 0 1 .679-.336l1.65.24-.096.66-.472.471-3.77-3.77.472-.471.66-.096.24 1.65a.664.664 0 0 1-.337.678l-4.25 2.36a.665.665 0 0 1-.646.001c-.479-.265-.903-.388-1.27-.369-.358.018-.69.18-.996.487l-.471-.471.471-.472 2.06 2.06.52.52a.665.665 0 0 1 .066.867zM5.61 8.02l.537.396-.472.471-.52-.52-2.06-2.06a.665.665 0 0 1 0-.943c.548-.548 1.172-.84 1.87-.875.622-.032 1.283.146 1.984.533l-.322.584-.324-.583 4.25-2.36.324.583-.66.096-.24-1.65a.664.664 0 0 1 .66-.763.665.665 0 0 1 .471.195l3.77 3.77a.666.666 0 0 1-.567 1.131l-1.65-.24.096-.66.583.324-2.36 4.25-.583-.323.599-.293c.36.738.527 1.396.503 1.974-.029.689-.316 1.305-.86 1.85a.664.664 0 0 1-.842.083.667.667 0 0 1-.101-.082l-2.068-2.062-.531-.527.47-.473.396.535-5.42 4.01a.663.663 0 0 1-.791.002.664.664 0 0 1-.142-.932z"}))),_||(_=$.createElement("defs",null,$.createElement("path",{id:"pin_svg__a",d:"M0 0h16v16H0z"}))))};var eh=n(99992),ef=n(85759);function ep(){return(ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let eg=function(e){return $.createElement("svg",ep({xmlns:"http://www.w3.org/2000/svg",fill:"none",height:16,width:16,xmlSpace:"preserve"},e),b||(b=$.createElement("rect",{width:"100%",height:"100%"})),k||(k=$.createElement("g",{className:"image_svg__currentLayer"},$.createElement("g",{fill:"#333"},$.createElement("path",{d:"M2.47 2.47h1.977v-.782H1.688v2.76h.781zM11.553 1.688v.781h1.978v1.978h.78V1.688zM13.53 13.53h-1.977v.782h2.759v-2.76h-.781zM2.47 11.553h-.782v2.759h2.76v-.781H2.468zM8.83 6.243c.682 0 1.237-.555 1.237-1.236S9.512 3.77 8.83 3.77a1.238 1.238 0 0 0 0 2.473zM3.77 12.23h8.46V9.71l-1.527-1.611-1.85 1.077-2.578-1.842L3.77 9.977z"})))))};function ex(){return(ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let ev=function(e){return $.createElement("svg",ex({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),j||(j=$.createElement("defs",null,$.createElement("path",{id:"light_svg__a",d:"M0 0h16v16H0z"}))),$.createElement("g",null,E||(E=$.createElement("mask",{id:"light_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#light_svg__a"}))),$.createElement("g",{mask:"url(#light_svg__b)"},$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8.67 4.33C8.67 1.94 6.73 0 4.33 0 1.94 0 0 1.94 0 4.33a4.334 4.334 0 1 0 8.67 0Z",transform:"translate(3.667 3.667)"}),$.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(7.167 .333)"}),$.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(12 2.333)"}),$.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(14 7.167)"}),$.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(12 12)"}),$.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(7.167 14)"}),$.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(2.333 12)"}),$.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(.333 7.167)"}),$.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z",transform:"translate(2.333 2.333)"}))))};function ey(){return(ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let ew=function(e){return $.createElement("svg",ey({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),C||(C=$.createElement("defs",null,$.createElement("path",{id:"dark_svg__a",d:"M0 0h16v16H0z"}))),$.createElement("g",null,S||(S=$.createElement("mask",{id:"dark_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#dark_svg__a"}))),$.createElement("g",{mask:"url(#dark_svg__b)"},$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66 0-.47-.04-.92-.13-1.35a4.251 4.251 0 0 1-4.11 3.16c-2.34 0-4.24-1.89-4.24-4.24 0-1.97 1.34-3.63 3.17-4.1C7.58.05 7.13 0 6.67 0Z",transform:"translate(1.333 1.333)"}))))};function e_(){return(e_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let eb=function(e){return $.createElement("svg",e_({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),P||(P=$.createElement("defs",null,$.createElement("path",{id:"auto_svg__a",d:"M0 0h16v16H0z"}))),$.createElement("g",null,M||(M=$.createElement("mask",{id:"auto_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#auto_svg__a"}))),$.createElement("g",{mask:"url(#auto_svg__b)"},$.createElement("path",{style:{stroke:"#333",strokeWidth:1,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 5.337.73-1.67m3.938 1.67-.73-1.67M.728 3.67 2.33 0l1.61 3.67M.73 3.667h3.21",transform:"translate(5.667 5.333)"}),$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M13.07 5.33A6.672 6.672 0 0 0 0 5.33l2-.66",transform:"translate(1.333 1.333)"}),$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0a6.672 6.672 0 0 0 13.07 0l-1.74.67",transform:"translate(1.333 9.333)"}))))};function ek(){return(ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let ej=function(e){return $.createElement("svg",ek({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),N||(N=$.createElement("defs",null,$.createElement("path",{id:"bottom_svg__a",d:"M0 0h16v16H0z"}))),$.createElement("g",null,O||(O=$.createElement("mask",{id:"bottom_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#bottom_svg__a"}))),$.createElement("g",{mask:"url(#bottom_svg__b)"},$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8 0 4 4 0 0",transform:"translate(4 4)"}),$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8 0 4 4 0 0",transform:"translate(4 8)"}))))};function eE(){return(eE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let eC=function(e){return $.createElement("svg",eE({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),Z||(Z=$.createElement("defs",null,$.createElement("path",{id:"pause_svg__a",d:"M0 0h16v16H0z"}))),$.createElement("g",null,I||(I=$.createElement("mask",{id:"pause_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#pause_svg__a"}))),$.createElement("g",{mask:"url(#pause_svg__b)"},$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M13.33 6.67A6.66 6.66 0 0 0 6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66Z",transform:"translate(1.333 1.333)"}),$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v4",transform:"translate(6.333 6)"}),$.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v4",transform:"translate(9.667 6)"}))))};function eS(){return(eS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let eP=function(e){return $.createElement("svg",eS({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),$.createElement("g",null,A||(A=$.createElement("mask",{id:"robot_svg__b",fill:"#fff"},$.createElement("use",{xlinkHref:"#robot_svg__a"}))),$.createElement("g",{mask:"url(#robot_svg__b)"},$.createElement("path",{style:{fill:"#333",opacity:1},d:"M3.67 13.67h8.66c.002 0 .003-.001.003-.003V6.334H3.67c-.002 0-.003 0-.003.003v7.33c0 .002 0 .003.003.003zm0 1.333c-.37 0-.684-.13-.945-.391a1.288 1.288 0 0 1-.392-.945v-7.33c0-.37.13-.685.392-.946.26-.26.576-.391.945-.391h8.66c.37 0 .684.13.945.391.261.261.392.577.392.946v7.33c0 .369-.13.684-.392.945a1.288 1.288 0 0 1-.945.391z"}),$.createElement("path",{style:{fill:"#333",opacity:1},d:"M9.819 6.127a.666.666 0 0 1-1.05-.81l1.67-2.67a.665.665 0 0 1 1.107-.034.663.663 0 0 1 .023.74l-1.67 2.67a.665.665 0 0 1-.08.104zM7.293 5.434a.665.665 0 0 1-1.01.779.665.665 0 0 1-.178-.19l-1.67-2.67a.665.665 0 0 1 .952-.896.665.665 0 0 1 .178.19l1.67 2.67a.665.665 0 0 1 .058.117z"}),$.createElement("path",{style:{fill:"#333",opacity:1},d:"M11.337 2.333c-.003 0-.004.001-.004.004l-.001-.01a.007.007 0 0 0 .005.003h-.007v.007c0-.002 0-.004-.002-.005l.009.001zm0-1.333c.366 0 .679.131.939.394.258.261.387.575.387.943 0 .364-.13.676-.39.936s-.572.39-.936.39c-.368 0-.682-.129-.943-.388A1.273 1.273 0 0 1 10 2.337c0-.37.13-.685.391-.946.262-.26.577-.391.946-.391zM4.67 2.333c-.002 0-.003.001-.003.004 0-.005 0-.008-.002-.01a.007.007 0 0 0 .005.003h-.006v.007c0-.002-.001-.004-.003-.005l.009.001zM4.67 1c.366 0 .679.131.939.394.258.261.388.575.388.943 0 .364-.13.676-.39.936s-.573.39-.937.39c-.367 0-.681-.129-.943-.388a1.273 1.273 0 0 1-.394-.938c0-.37.13-.685.392-.946.26-.26.576-.391.945-.391zM6.663 10.003h2.67c.184 0 .34-.065.469-.194a.655.655 0 0 0 .195-.479.638.638 0 0 0-.196-.467.638.638 0 0 0-.468-.196h-2.67a.638.638 0 0 0-.467.196A.638.638 0 0 0 6 9.33c0 .188.065.347.195.479.128.13.284.194.468.194zm0 1.334a1.974 1.974 0 0 1-1.416-.59 2.001 2.001 0 0 1 1.416-3.413h2.67a1.99 1.99 0 0 1 1.41.587 1.99 1.99 0 0 1 .587 1.409 2.002 2.002 0 0 1-1.997 2.007zM2 10.663h1.003a.666.666 0 1 1 0 1.334h-1.67a.666.666 0 0 1-.666-.667V8a.665.665 0 0 1 .666-.667h1.67a.665.665 0 0 1 .555 1.037.665.665 0 0 1-.555.297H2zM14.8 7.346a.664.664 0 0 1 .537.654v3.33a.666.666 0 0 1-.667.667H13a.666.666 0 1 1 0-1.334h1.003V8.667H13a.665.665 0 0 1-.471-1.138.664.664 0 0 1 .471-.196h1.67c.044 0 .087.005.13.013z"}))),T||(T=$.createElement("defs",null,$.createElement("path",{id:"robot_svg__a",d:"M0 0h16v16H0z"}))))};var eM=n(33362),eN=n(25166),eO=n(22824),eZ=n(97273),eI=n(74975),eA=n(52061),eT=n(9719),eR=n(70580),ez=n(93949),eD=n.n(ez),e$=n(6068),eH=n(17304),eL=n(99608),eF=n(23662),eK=n(86111),eW=n(1566),eB=n(50952),eU=n(74872),eV=n(52097),eG=n.n(eV),eX=n(55246);let eq={src:"/_next/static/media/bot.0c800005.png"};var eY=n(13262),eQ=n(56270),eJ=n.n(eQ);function e0(e){let t=(0,eM.aK)().currentSession(),n=e=>e.content&&!e.isError&&!e.streaming,r=(0,D.useMemo)(()=>{let e=Math.max(0,t.clearContextIndex??0);return e===t.messages.length-1&&(e=0),t.messages.slice(e)},[t.messages,t.clearContextIndex]),a=(0,D.useMemo)(()=>r.filter((e,t)=>e.id&&n(e)&&(t>=r.length-1||n(r[t+1]))),[r]),s=a.length,l=(0,eM.MG)(),[i,o]=(0,D.useState)(""),[c,u]=(0,D.useState)(new Set),d=e=>0===i.length||c.has(e),m=e=>{let t=new Set;e.length>0&&a.forEach(n=>(0,eN.YK)(n).includes(e)?t.add(n.id):null),u(t)},{startIndex:h,endIndex:f,onClickIndex:p}=function(){let[e,t]=(0,D.useState)(),[n,r]=(0,D.useState)(),[a,s]=(0,D.useState)(!1);return(0,D.useEffect)(()=>{let e=e=>{"Shift"===e.key&&s(!0)},n=e=>{"Shift"===e.key&&(s(!1),t(void 0),r(void 0))};return window.addEventListener("keyup",n),window.addEventListener("keydown",e),()=>{window.removeEventListener("keyup",n),window.removeEventListener("keydown",e)}},[]),{onClickIndex:n=>{a&&void 0!==e?r(n):(t(n),r(void 0))},startIndex:e,endIndex:n}}(),g=()=>{e.updateSelection(e=>a.forEach(t=>e.add(t.id)))};return(0,D.useEffect)(()=>{e.defaultSelectAll&&g()},[]),(0,D.useEffect)(()=>{if(void 0===h||void 0===f)return;let[t,n]=[h,f].sort((e,t)=>e-t);e.updateSelection(e=>{for(let r=t;r<=n;r+=1)e.add(a[r].id??r)})},[h,f]),(0,R.jsxs)("div",{className:eJ()["message-selector"],children:[(0,R.jsxs)("div",{className:eJ()["message-filter"],children:[R.jsx("input",{type:"text",placeholder:eT.ZP.Select.Search,className:eJ()["filter-item"]+" "+eJ()["search-bar"],value:i,onInput:e=>{o(e.currentTarget.value),m(e.currentTarget.value)}}),(0,R.jsxs)("div",{className:eJ().actions,children:[R.jsx(eR.h,{text:eT.ZP.Select.All,bordered:!0,className:eJ()["filter-item"],onClick:g}),R.jsx(eR.h,{text:eT.ZP.Select.Latest,bordered:!0,className:eJ()["filter-item"],onClick:()=>e.updateSelection(e=>{e.clear(),a.slice(s-4).forEach(t=>e.add(t.id))})}),R.jsx(eR.h,{text:eT.ZP.Select.Clear,bordered:!0,className:eJ()["filter-item"],onClick:()=>e.updateSelection(e=>e.clear())})]})]}),R.jsx("div",{className:eJ().messages,children:a.map((n,r)=>{if(!d(n.id))return null;let a=n.id??r,s=e.selection.has(a);return(0,R.jsxs)("div",{className:`${eJ().message} ${e.selection.has(n.id)&&eJ()["message-selected"]}`,onClick:()=>{e.updateSelection(e=>{e.has(a)?e.delete(a):e.add(a)}),p(r)},children:[R.jsx("div",{className:eJ().avatar,children:"user"===n.role?R.jsx(eF.qE,{avatar:l.avatar}):R.jsx(eK.MaskAvatar,{avatar:t.mask.avatar,model:n.model||t.mask.modelConfig.model})}),(0,R.jsxs)("div",{className:eJ().body,children:[R.jsx("div",{className:eJ().date,children:new Date(n.date).toLocaleString()}),R.jsx("div",{className:`${eJ().content} one-line`,children:(0,eN.YK)(n)})]}),R.jsx("div",{className:eJ().checkbox,children:R.jsx("input",{type:"checkbox",checked:s,readOnly:!0})})]},r)})})]})}var e3=n(37412),e1=n.n(e3);let e6=(()=>{let e=0,t=()=>`0000${(1679616*Math.random()<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function e2(e){let t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}function e7(e,t){let n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function e4(e,t={}){return{width:t.width||function(e){let t=e7(e,"border-left-width"),n=e7(e,"border-right-width");return e.clientWidth+t+n}(e),height:t.height||function(e){let t=e7(e,"border-top-width"),n=e7(e,"border-bottom-width");return e.clientHeight+t+n}(e)}}function e8(e){return new Promise((t,n)=>{let r=new Image;r.decode=()=>t(r),r.onload=()=>t(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function e9(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function e5(e,t,n){let r="http://www.w3.org/2000/svg",a=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${n}`),a.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),e9(a)}let te=(e,t)=>{if(e instanceof t)return!0;let n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||te(n,t))};function tt(e,t,n){let r=window.getComputedStyle(e,n),a=r.getPropertyValue("content");if(""===a||"none"===a)return;let s=e6();try{t.className=`${t.className} ${s}`}catch(e){return}let l=document.createElement("style");l.appendChild(function(e,t,n){let r=`.${e}:${t}`,a=n.cssText?function(e){let t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}(n):e2(n).map(e=>{let t=n.getPropertyValue(e),r=n.getPropertyPriority(e);return`${e}: ${t}${r?" !important":""};`}).join(" ");return document.createTextNode(`${r}{${a}}`)}(s,n,r)),t.appendChild(l)}let tn="application/font-woff",tr="image/jpeg",ta={woff:tn,woff2:tn,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:tr,jpeg:tr,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function ts(e){return ta[(function(e){let t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""})(e).toLowerCase()]||""}function tl(e){return -1!==e.search(/^(data:)/)}function ti(e,t){return`data:${t};base64,${e}`}async function to(e,t,n){let r=await fetch(e,t);if(404===r.status)throw Error(`Resource "${r.url}" not found`);let a=await r.blob();return new Promise((e,t)=>{let s=new FileReader;s.onerror=t,s.onloadend=()=>{try{e(n({res:r,result:s.result}))}catch(e){t(e)}},s.readAsDataURL(a)})}let tc={};async function tu(e,t,n){var r,a,s;let l,i;let o=(r=e,a=t,s=n.includeQueryParams,i=r.replace(/\?.*/,""),s&&(i=r),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),a?`[${a}]${i}`:i);if(null!=tc[o])return tc[o];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());try{let r=await to(e,n.fetchRequestInit,({res:e,result:n})=>(t||(t=e.headers.get("Content-Type")||""),n.split(/,/)[1]));l=ti(r,t)}catch(r){l=n.imagePlaceholder||"";let t=`Failed to fetch resource: ${e}`;r&&(t="string"==typeof r?r:r.message),t&&console.warn(t)}return tc[o]=l,l}async function td(e){let t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):e8(t)}async function tm(e,t){if(e.currentSrc){let t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==n||n.drawImage(e,0,0,t.width,t.height),e8(t.toDataURL())}let n=e.poster,r=ts(n);return e8(await tu(n,r,t))}async function th(e){var t;try{if(null===(t=null==e?void 0:e.contentDocument)||void 0===t?void 0:t.body)return await tv(e.contentDocument.body,{},!0)}catch(e){}return e.cloneNode(!1)}async function tf(e,t){return te(e,HTMLCanvasElement)?td(e):te(e,HTMLVideoElement)?tm(e,t):te(e,HTMLIFrameElement)?th(e):e.cloneNode(!1)}let tp=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase();async function tg(e,t,n){var r,a;let s=[];return 0===(s=tp(e)&&e.assignedNodes?e2(e.assignedNodes()):te(e,HTMLIFrameElement)&&(null===(r=e.contentDocument)||void 0===r?void 0:r.body)?e2(e.contentDocument.body.childNodes):e2((null!==(a=e.shadowRoot)&&void 0!==a?a:e).childNodes)).length||te(e,HTMLVideoElement)||await s.reduce((e,r)=>e.then(()=>tv(r,n)).then(e=>{e&&t.appendChild(e)}),Promise.resolve()),t}async function tx(e,t){let n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;let r={};for(let a=0;a<n.length;a++){let s=n[a].getAttribute("xlink:href");if(s){let n=e.querySelector(s),a=document.querySelector(s);n||!a||r[s]||(r[s]=await tv(a,t,!0))}}let a=Object.values(r);if(a.length){let t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";let r=document.createElementNS(t,"defs");n.appendChild(r);for(let e=0;e<a.length;e++)r.appendChild(a[e]);e.appendChild(n)}return e}async function tv(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then(e=>tf(e,t)).then(n=>tg(e,n,t)).then(t=>{var n,r;return n=e,te(r=t,Element)&&(function(e,t){let n=t.style;if(!n)return;let r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):e2(r).forEach(a=>{let s=r.getPropertyValue(a);if("font-size"===a&&s.endsWith("px")){let e=Math.floor(parseFloat(s.substring(0,s.length-2)))-.1;s=`${e}px`}te(e,HTMLIFrameElement)&&"display"===a&&"inline"===s&&(s="block"),"d"===a&&t.getAttribute("d")&&(s=`path(${t.getAttribute("d")})`),n.setProperty(a,s,r.getPropertyPriority(a))})}(n,r),tt(n,r,":before"),tt(n,r,":after"),te(n,HTMLTextAreaElement)&&(r.innerHTML=n.value),te(n,HTMLInputElement)&&r.setAttribute("value",n.value),function(e,t){if(te(e,HTMLSelectElement)){let n=Array.from(t.children).find(t=>e.value===t.getAttribute("value"));n&&n.setAttribute("selected","")}}(n,r)),r}).then(e=>tx(e,t)):null}let ty=/url\((['"]?)([^'"]+?)\1\)/g,tw=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,t_=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function tb(e,t,n,r,a){try{let s;let l=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;let n=document.implementation.createHTMLDocument(),r=n.createElement("base"),a=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(a),t&&(r.href=t),a.href=e,a.href}(t,n):t,i=ts(t);if(a){let e=await a(l);s=ti(e,i)}else s=await tu(l,i,r);return e.replace(function(e){let t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}(t),`$1${s}$3`)}catch(e){}return e}function tk(e){return -1!==e.search(ty)}async function tj(e,t,n){if(!tk(e))return e;let r=function(e,{preferredFontFormat:t}){return t?e.replace(t_,e=>{for(;;){let[n,,r]=tw.exec(e)||[];if(!r)return"";if(r===t)return`src: ${n};`}}):e}(e,n);return(function(e){let t=[];return e.replace(ty,(e,n,r)=>(t.push(r),e)),t.filter(e=>!tl(e))})(r).reduce((e,r)=>e.then(e=>tb(e,r,t,n)),Promise.resolve(r))}async function tE(e,t,n){var r;let a=null===(r=t.style)||void 0===r?void 0:r.getPropertyValue(e);if(a){let r=await tj(a,null,n);return t.style.setProperty(e,r,t.style.getPropertyPriority(e)),!0}return!1}async function tC(e,t){await tE("background",e,t)||await tE("background-image",e,t),await tE("mask",e,t)||await tE("mask-image",e,t)}async function tS(e,t){let n=te(e,HTMLImageElement);if(!(n&&!tl(e.src))&&!(te(e,SVGImageElement)&&!tl(e.href.baseVal)))return;let r=n?e.src:e.href.baseVal,a=await tu(r,ts(r),t);await new Promise((t,r)=>{e.onload=t,e.onerror=r,e.decode&&(e.decode=t),"lazy"===e.loading&&(e.loading="eager"),n?(e.srcset="",e.src=a):e.href.baseVal=a})}async function tP(e,t){let n=e2(e.childNodes).map(e=>tM(e,t));await Promise.all(n).then(()=>e)}async function tM(e,t){te(e,Element)&&(await tC(e,t),await tS(e,t),await tP(e,t))}let tN={};async function tO(e){let t=tN[e];if(null!=t)return t;let n=await fetch(e);return t={url:e,cssText:await n.text()},tN[e]=t,t}async function tZ(e,t){let n=e.cssText,r=/url\(["']?([^"')]+)["']?\)/g;return Promise.all((n.match(/url\([^)]+\)/g)||[]).map(async a=>{let s=a.replace(r,"$1");return s.startsWith("https://")||(s=new URL(s,e.url).href),to(s,t.fetchRequestInit,({result:e})=>(n=n.replace(a,`url(${e})`),[a,e]))})).then(()=>n)}function tI(e){if(null==e)return[];let t=[],n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,""),r=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){let e=r.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(r,"");let a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=a.exec(n);if(null===e){if(null===(e=s.exec(n)))break;a.lastIndex=s.lastIndex}else s.lastIndex=a.lastIndex;t.push(e[0])}return t}async function tA(e,t){let n=[],r=[];return e.forEach(n=>{if("cssRules"in n)try{e2(n.cssRules||[]).forEach((e,a)=>{if(e.type===CSSRule.IMPORT_RULE){let s=a+1,l=e.href,i=tO(l).then(e=>tZ(e,t)).then(e=>tI(e).forEach(e=>{try{n.insertRule(e,e.startsWith("@import")?s+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})).catch(e=>{console.error("Error loading remote css",e.toString())});r.push(i)}})}catch(s){let a=e.find(e=>null==e.href)||document.styleSheets[0];null!=n.href&&r.push(tO(n.href).then(e=>tZ(e,t)).then(e=>tI(e).forEach(e=>{a.insertRule(e,n.cssRules.length)})).catch(e=>{console.error("Error loading remote stylesheet",e)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(e.forEach(e=>{if("cssRules"in e)try{e2(e.cssRules||[]).forEach(e=>{n.push(e)})}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}}),n))}async function tT(e,t){if(null==e.ownerDocument)throw Error("Provided element is not within a Document");let n=e2(e.ownerDocument.styleSheets);return(await tA(n,t)).filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>tk(e.style.getPropertyValue("src")))}async function tR(e,t){let n=await tT(e,t);return(await Promise.all(n.map(e=>{let n=e.parentStyleSheet?e.parentStyleSheet.href:null;return tj(e.cssText,n,t)}))).join("\n")}async function tz(e,t){let n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await tR(e,t);if(n){let t=document.createElement("style"),r=document.createTextNode(n);t.appendChild(r),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function tD(e,t={}){let{width:n,height:r}=e4(e,t),a=await tv(e,t,!0);return await tz(a,t),await tM(a,t),function(e,t){let{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);let r=t.style;null!=r&&Object.keys(r).forEach(e=>{n[e]=r[e]})}(a,t),await e5(a,n,r)}async function t$(e,t={}){let{width:n,height:r}=e4(e,t),a=await tD(e,t),s=await e8(a),l=document.createElement("canvas"),i=l.getContext("2d"),o=t.pixelRatio||function(){let e,t;try{t=process}catch(e){}let n=t&&t.env?t.env.devicePixelRatio:null;return n&&Number.isNaN(e=parseInt(n,10))&&(e=1),e||window.devicePixelRatio||1}(),c=t.canvasWidth||n,u=t.canvasHeight||r;return l.width=c*o,l.height=u*o,!t.skipAutoScale&&(l.width>16384||l.height>16384)&&(l.width>16384&&l.height>16384?l.width>l.height?(l.height*=16384/l.width,l.width=16384):(l.width*=16384/l.height,l.height=16384):l.width>16384?(l.height*=16384/l.width,l.width=16384):(l.width*=16384/l.height,l.height=16384)),l.style.width=`${c}`,l.style.height=`${u}`,t.backgroundColor&&(i.fillStyle=t.backgroundColor,i.fillRect(0,0,l.width,l.height)),i.drawImage(s,0,0,l.width,l.height),l}async function tH(e,t={}){return(await t$(e,t)).toDataURL()}async function tL(e,t={}){let n=await t$(e,t);return await function(e,t={}){return new Promise(e.toBlob?n=>{e.toBlob(n,t.type?t.type:"image/png",t.quality?t.quality:1)}:n=>{let r=window.atob(e.toDataURL(t.type?t.type:void 0,t.quality?t.quality:void 0).split(",")[1]),a=r.length,s=new Uint8Array(a);for(let e=0;e<a;e+=1)s[e]=r.charCodeAt(e);n(new Blob([s],{type:t.type?t.type:"image/png"}))})}(n)}var tF=n(54508),tK=n(23614);let tW=(0,eZ.default)(async()=>(await n.e(768).then(n.bind(n,49768))).Markdown,{loadableGenerated:{modules:["/Volumes/D/github/ChatGPT-Next-Web/app/components/exporter.tsx -> ./markdown"]},loading:()=>R.jsx(Y.Z,{})});function tB(e){return R.jsx("div",{className:"modal-mask",children:R.jsx(e$.u_,{title:eT.ZP.Export.Title,onClose:e.onClose,footer:R.jsx("div",{style:{width:"100%",textAlign:"center",fontSize:14,opacity:.5},children:eT.ZP.Exporter.Description.Title}),children:R.jsx("div",{style:{minHeight:"40vh"},children:R.jsx(tV,{})})})})}function tU(e){let t=e.steps,n=t.length;return(0,R.jsxs)("div",{className:eG().steps,children:[R.jsx("div",{className:eG()["steps-progress"],children:R.jsx("div",{className:eG()["steps-progress-inner"],style:{width:`${(e.index+1)/n*100}%`}})}),R.jsx("div",{className:eG()["steps-inner"],children:t.map((t,n)=>(0,R.jsxs)("div",{className:`${eG().step} ${eG()[n<=e.index?"step-finished":""]} ${n===e.index&&eG()["step-current"]} clickable`,onClick:()=>{e.onStepChange?.(n)},role:"button",children:[R.jsx("span",{className:eG()["step-index"],children:n+1}),R.jsx("span",{className:eG()["step-name"],children:t.name})]},n))})]})}function tV(){let e=[{name:eT.ZP.Export.Steps.Select,value:"select"},{name:eT.ZP.Export.Steps.Preview,value:"preview"}],{currentStep:t,setCurrentStepIndex:n,currentStepIndex:r}=function(e){let t=e.length,[n,r]=(0,D.useState)(0);return{currentStepIndex:n,setCurrentStepIndex:r,nextStep:()=>r((n+1)%t),prevStep:()=>r((n-1+t)%t),currentStep:e[n]}}(e),[a,s]=(0,D.useState)({format:"image",includeContext:!0});function l(e){let t={...a};e(t),s(t)}let i=(0,eM.aK)().currentSession(),{selection:o,updateSelection:c}=function(){let[e,t]=(0,D.useState)(new Set);return{selection:e,updateSelection:n=>{let r=new Set(e);n(r),t(r)}}}(),u=(0,D.useMemo)(()=>{let e=[];return a.includeContext&&e.push(...i.mask.context),e.push(...i.messages.filter(e=>o.has(e.id))),e},[a.includeContext,i.messages,i.mask.context,o]);return(0,R.jsxs)(R.Fragment,{children:[R.jsx(tU,{steps:e,index:r,onStepChange:n}),(0,R.jsxs)("div",{className:eG()["message-exporter-body"],style:"select"!==t.value?{display:"none"}:{},children:[(0,R.jsxs)(e$.aV,{children:[R.jsx(e$.HC,{title:eT.ZP.Export.Format.Title,subTitle:eT.ZP.Export.Format.SubTitle,children:R.jsx(e$.Ph,{value:a.format,onChange:e=>l(t=>t.format=e.currentTarget.value),children:["text","image","json"].map(e=>R.jsx("option",{value:e,children:e},e))})}),R.jsx(e$.HC,{title:eT.ZP.Export.IncludeContext.Title,subTitle:eT.ZP.Export.IncludeContext.SubTitle,children:R.jsx("input",{type:"checkbox",checked:a.includeContext,onChange:e=>{l(t=>t.includeContext=e.currentTarget.checked)}})})]}),R.jsx(e0,{selection:o,updateSelection:c,defaultSelectAll:!0})]}),"preview"===t.value&&R.jsx("div",{className:eG()["message-exporter-body"],children:"text"===a.format?R.jsx(tQ,{messages:u,topic:i.topic}):"json"===a.format?R.jsx(tJ,{messages:u,topic:i.topic}):R.jsx(tY,{messages:u,topic:i.topic})})]})}function tG(e){let t=(0,D.useRef)(null);return(0,D.useEffect)(()=>{if(!t.current)return;let n=Array.from(t.current.getElementsByClassName(eL.yY));if(n.length!==e.messages.length)return;let r=n.map((e,t)=>{let[n,r]=e.id.split(":");return{id:t.toString(),role:n,content:"user"===n?e.textContent??"":e.innerHTML,date:""}});e.onRender(r)},[]),R.jsx("div",{ref:t,children:e.messages.map((e,t)=>R.jsx("div",{id:`${e.role}:${t}`,className:eL.yY,children:R.jsx(tW,{content:(0,eN.YK)(e),defaultShow:!0})},t))})}function tX(e){let[t,n]=(0,D.useState)(!1),[r,a]=(0,D.useState)(!1),s=(0,eM.MG)(),l=async()=>{e.messages?.length&&(n(!0),a(!0))};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{className:eG()["preview-actions"],children:[e.showCopy&&R.jsx(eR.h,{text:eT.ZP.Export.Copy,bordered:!0,shadow:!0,icon:R.jsx(q.Z,{}),onClick:e.copy}),R.jsx(eR.h,{text:eT.ZP.Export.Download,bordered:!0,shadow:!0,icon:R.jsx(eY.Z,{}),onClick:e.download}),R.jsx(eR.h,{text:eT.ZP.Export.Share,bordered:!0,shadow:!0,icon:t?R.jsx(Y.Z,{}):R.jsx(V,{}),onClick:l})]}),R.jsx("div",{style:{position:"fixed",right:"200vw",pointerEvents:"none"},children:r&&R.jsx(tG,{messages:e.messages??[],onRender:e=>{a(!1),(0,tK.Lw)(s.modelConfig.providerName).share(e).then(e=>{e&&((0,e$.K4)({title:eT.ZP.Export.Share,children:[R.jsx("input",{type:"text",value:e,style:{width:"100%",maxWidth:"unset"},readOnly:!0,onClick:e=>e.currentTarget.select()},"input")],actions:[R.jsx(eR.h,{icon:R.jsx(q.Z,{}),text:eT.ZP.Chat.Actions.Copy,onClick:()=>(0,eN.vQ)(e)},"copy")]}),setTimeout(()=>{window.open(e,"_blank")},800))}).catch(e=>{console.error("[Share]",e),(0,e$.CF)((0,eU.B)(e))}).finally(()=>n(!1))}})})]})}function tq(e){return e.avatar===eW._G?R.jsx("img",{src:eq.src,width:30,height:30,alt:"bot",className:"user-avatar"}):R.jsx(eF.qE,{avatar:e.avatar})}function tY(e){let t=(0,eM.aK)().currentSession(),n=t.mask,r=(0,eM.MG)(),a=(0,D.useRef)(null),s=(0,eN.S0)(),l=async()=>{(0,e$.CF)(eT.ZP.Export.Image.Toast);let t=a.current;if(!t)return;let n=tF.Z()?.isApp;try{let r=await tH(t);if(!r)return;if(s||n&&window.__TAURI__){if(n&&window.__TAURI__){let t=await window.__TAURI__.dialog.save({defaultPath:`${e.topic}.png`,filters:[{name:"PNG Files",extensions:["png"]},{name:"All Files",extensions:["*"]}]});if(null!==t){let e=await fetch(r),n=await e.arrayBuffer(),a=new Uint8Array(n);await window.__TAURI__.fs.writeBinaryFile(t,a),(0,e$.CF)(eT.ZP.Download.Success)}else(0,e$.CF)(eT.ZP.Download.Failed)}else(0,e$.vi)(r)}else{let t=document.createElement("a");t.download=`${e.topic}.png`,t.href=r,t.click(),i()}}catch(e){(0,e$.CF)(eT.ZP.Download.Failed)}},i=()=>{let e=a.current;e&&(e.innerHTML=e.innerHTML)};return(0,R.jsxs)("div",{className:eG()["image-previewer"],children:[R.jsx(tX,{copy:()=>{(0,e$.CF)(eT.ZP.Export.Image.Toast);let e=a.current;e&&tL(e).then(e=>{if(e)try{navigator.clipboard.write([new ClipboardItem({"image/png":e})]).then(()=>{(0,e$.CF)(eT.ZP.Copy.Success),i()})}catch(e){console.error("[Copy Image] ",e),(0,e$.CF)(eT.ZP.Copy.Failed)}})},download:l,showCopy:!s,messages:e.messages}),(0,R.jsxs)("div",{className:`${eG()["preview-body"]} ${eG()["default-theme"]}`,ref:a,children:[(0,R.jsxs)("div",{className:eG()["chat-info"],children:[R.jsx("div",{className:eG().logo+" no-dark",children:R.jsx(e1(),{src:eX.Z.src,alt:"logo",width:50,height:50})}),(0,R.jsxs)("div",{children:[R.jsx("div",{className:eG()["main-title"],children:"Artificial Imbecile"}),R.jsx("div",{className:eG()["sub-title"],children:n.modelConfig.model}),(0,R.jsxs)("div",{className:eG().icons,children:[R.jsx(tq,{avatar:r.avatar}),R.jsx("span",{className:eG()["icon-space"],children:"&"}),R.jsx(tq,{avatar:n.avatar})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:eG()["chat-info-item"],children:[eT.ZP.Exporter.Model,": ",n.modelConfig.model]}),(0,R.jsxs)("div",{className:eG()["chat-info-item"],children:[eT.ZP.Exporter.Messages,": ",e.messages.length]}),(0,R.jsxs)("div",{className:eG()["chat-info-item"],children:[eT.ZP.Exporter.Topic,": ",t.topic]}),(0,R.jsxs)("div",{className:eG()["chat-info-item"],children:[eT.ZP.Exporter.Time,":"," ",new Date(e.messages.at(-1)?.date??Date.now()).toLocaleString()]})]})]}),e.messages.map((e,t)=>(0,R.jsxs)("div",{className:eG().message+" "+eG()["message-"+e.role],children:[R.jsx("div",{className:eG().avatar,children:R.jsx(tq,{avatar:"user"===e.role?r.avatar:n.avatar})}),(0,R.jsxs)("div",{className:eG().body,children:[R.jsx(tW,{content:(0,eN.YK)(e),fontSize:r.fontSize,defaultShow:!0}),1==(0,eN.Bs)(e).length&&R.jsx("img",{src:(0,eN.Bs)(e)[0],alt:"message",className:eG()["message-image"]},t),(0,eN.Bs)(e).length>1&&R.jsx("div",{className:eG()["message-images"],style:{"--image-count":(0,eN.Bs)(e).length},children:(0,eN.Bs)(e).map((e,t)=>R.jsx("img",{src:e,alt:"message",className:eG()["message-image-multi"]},t))})]})]},t))]})]})}function tQ(e){let t=`# ${e.topic}

`+e.messages.map(e=>"user"===e.role?`## ${eT.ZP.Export.MessageFromYou}:
${(0,eN.YK)(e)}`:`## ${eT.ZP.Export.MessageFromChatGPT}:
${(0,eN.YK)(e).trim()}`).join("\n\n");return(0,R.jsxs)(R.Fragment,{children:[R.jsx(tX,{copy:()=>{(0,eN.vQ)(t)},download:()=>{(0,eN.CP)(t,`${e.topic}.md`)},showCopy:!0,messages:e.messages}),R.jsx("div",{className:"markdown-body",children:R.jsx("pre",{className:eG()["export-content"],children:t})})]})}function tJ(e){let t={messages:[{role:"system",content:`${eT.ZP.FineTuned.Sysmessage} ${e.topic}`},...e.messages.map(e=>({role:e.role,content:e.content}))]},n="```json\n"+JSON.stringify(t,null,2)+"\n```",r=JSON.stringify(t),a=()=>{(0,eN.vQ)(r)};return(0,R.jsxs)(R.Fragment,{children:[R.jsx(tX,{copy:a,download:()=>{(0,eN.CP)(JSON.stringify(t),`${e.topic}.json`)},showCopy:!1,messages:e.messages}),R.jsx("div",{className:"markdown-body",onClick:a,children:R.jsx(tW,{content:n})})]})}var t0=n(74255);let t3=(0,eZ.default)(async()=>(await n.e(768).then(n.bind(n,49768))).Markdown,{loadableGenerated:{modules:["/Volumes/D/github/ChatGPT-Next-Web/app/components/chat.tsx -> ./markdown"]},loading:()=>R.jsx(Y.Z,{})});function t1(e){let t=(0,eM.aK)(),n=t.currentSession(),r=(0,eW.Zy)(),a=(0,eH.s0)();return R.jsx("div",{className:"modal-mask",children:R.jsx(e$.u_,{title:eT.ZP.Context.Edit,onClose:()=>e.onClose(),actions:[R.jsx(eR.h,{icon:R.jsx(es.Z,{}),bordered:!0,text:eT.ZP.Chat.Config.Reset,onClick:async()=>{await (0,e$.i0)(eT.ZP.Memory.ResetConfirm)&&t.updateCurrentSession(e=>e.memoryPrompt="")}},"reset"),R.jsx(eR.h,{icon:R.jsx(q.Z,{}),bordered:!0,text:eT.ZP.Chat.Config.SaveAs,onClick:()=>{a(eL.y$.Masks),setTimeout(()=>{r.create(n.mask)},500)}},"copy")],children:R.jsx(eK.MaskConfig,{mask:n.mask,updateMask:e=>{let r={...n.mask};e(r),t.updateCurrentSession(e=>e.mask=r)},shouldSyncFromGlobal:!0,extraListItems:n.mask.modelConfig.sendMemory?R.jsx(e$.HC,{className:"copyable",title:`${eT.ZP.Memory.Title} (${n.lastSummarizeIndex} of ${n.messages.length})`,subTitle:n.memoryPrompt||eT.ZP.Memory.EmptyContent}):R.jsx(R.Fragment,{})})})})}function t6(e){let t=(0,eM.aK)().currentSession().mask.context;return(0,R.jsxs)("div",{className:eD()["prompt-toast"],children:[e.showToast&&(0,R.jsxs)("div",{className:eD()["prompt-toast-inner"]+" clickable",role:"button",onClick:()=>e.setShowModal(!0),children:[R.jsx(K,{}),R.jsx("span",{className:eD()["prompt-toast-content"],children:eT.ZP.Context.Toast(t.length)})]}),e.showModal&&R.jsx(t1,{onClose:()=>e.setShowModal(!1)})]},"prompt-toast")}function t2(e){let t=0===e.prompts.length,[n,r]=(0,D.useState)(0),a=(0,D.useRef)(null);return((0,D.useEffect)(()=>{r(0)},[e.prompts.length]),(0,D.useEffect)(()=>{let s=s=>{if(t||s.metaKey||s.altKey||s.ctrlKey)return;let l=t=>{s.stopPropagation(),s.preventDefault(),r(Math.max(0,Math.min(e.prompts.length-1,n+t))),a.current?.scrollIntoView({block:"center"})};if("ArrowUp"===s.key)l(1);else if("ArrowDown"===s.key)l(-1);else if("Enter"===s.key){let t=e.prompts.at(n);t&&e.onPromptSelect(t)}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e.prompts.length,n]),t)?null:R.jsx("div",{className:eD()["prompt-hints"],children:e.prompts.map((t,s)=>(0,R.jsxs)("div",{ref:s===n?a:null,className:eD()["prompt-hint"]+` ${s===n?eD()["prompt-hint-selected"]:""}`,onClick:()=>e.onPromptSelect(t),onMouseEnter:()=>r(s),children:[R.jsx("div",{className:eD()["hint-title"],children:t.title}),R.jsx("div",{className:eD()["hint-content"],children:t.content})]},t.title+s.toString()))})}function t7(){let e=(0,eM.aK)();return(0,R.jsxs)("div",{className:eD()["clear-context"],onClick:()=>e.updateCurrentSession(e=>e.clearContextIndex=void 0),children:[R.jsx("div",{className:eD()["clear-context-tips"],children:eT.ZP.Context.Clear}),R.jsx("div",{className:eD()["clear-context-revert-btn"],children:eT.ZP.Context.Revert})]})}function t4(e){let t=(0,D.useRef)(null),n=(0,D.useRef)(null),[r,a]=(0,D.useState)({full:16,icon:16});function s(){if(!t.current||!n.current)return;let e=n.current.getBoundingClientRect().width,r=t.current.getBoundingClientRect().width;a({full:e+r,icon:r})}return(0,R.jsxs)("div",{className:`${eD()["chat-input-action"]} clickable`,onClick:()=>{e.onClick(),setTimeout(s,1)},onMouseEnter:s,onTouchStart:s,style:{"--icon-width":`${r.icon}px`,"--full-width":`${r.full}px`},children:[R.jsx("div",{ref:t,className:eD().icon,children:e.icon}),R.jsx("div",{className:eD().text,ref:n,children:e.text})]})}function t8(e){let t=(0,eM.MG)(),n=(0,eH.s0)(),r=(0,eM.aK)(),a=t.theme,s=eI.L.hasPending(),l=r.currentSession().mask.modelConfig.model,i=r.currentSession().mask.modelConfig?.providerName||eL.UT.OpenAI,o=(0,t0.l)(),c=(0,D.useMemo)(()=>{let e=o.filter(e=>e.available),t=e.find(e=>e.isDefault);return t?[t,...e.filter(e=>e!==t)]:e},[o]),u=(0,D.useMemo)(()=>{let e=c.find(e=>e.name==l&&e?.provider?.providerName==i);return e?.displayName??""},[c,l,i]),[d,m]=(0,D.useState)(!1),[h,f]=(0,D.useState)(!1);return(0,D.useEffect)(()=>{let t=(0,eN.Xf)(l);if(f(t),t||(e.setAttachImages([]),e.setUploading(!1)),!c.some(e=>e.name===l)&&c.length>0){let e=c.find(e=>e.isDefault)||c[0];r.updateCurrentSession(t=>{t.mask.modelConfig.model=e.name,t.mask.modelConfig.providerName=e?.provider?.providerName}),(0,e$.CF)(e?.provider?.providerName=="ByteDance"?e.displayName:e.name)}},[r,l,c]),(0,R.jsxs)("div",{className:eD()["chat-input-actions"],children:[s&&R.jsx(t4,{onClick:()=>eI.L.stopAll(),text:eT.ZP.Chat.InputActions.Stop,icon:R.jsx(eC,{})}),!e.hitBottom&&R.jsx(t4,{onClick:e.scrollToBottom,text:eT.ZP.Chat.InputActions.ToBottom,icon:R.jsx(ej,{})}),e.hitBottom&&R.jsx(t4,{onClick:e.showPromptModal,text:eT.ZP.Chat.InputActions.Settings,icon:R.jsx(ec,{})}),h&&R.jsx(t4,{onClick:e.uploadImage,text:eT.ZP.Chat.InputActions.UploadImage,icon:e.uploading?R.jsx(J,{}):R.jsx(eg,{})}),R.jsx(t4,{onClick:function(){let e=[eM.Q2.Auto,eM.Q2.Light,eM.Q2.Dark],n=(e.indexOf(a)+1)%e.length,r=e[n];t.update(e=>e.theme=r)},text:eT.ZP.Chat.InputActions.Theme[a],icon:R.jsx(R.Fragment,{children:a===eM.Q2.Auto?R.jsx(eb,{}):a===eM.Q2.Light?R.jsx(ev,{}):a===eM.Q2.Dark?R.jsx(ew,{}):null})}),R.jsx(t4,{onClick:e.showPromptHints,text:eT.ZP.Chat.InputActions.Prompt,icon:R.jsx(et,{})}),R.jsx(t4,{onClick:()=>{n(eL.y$.Masks)},text:eT.ZP.Chat.InputActions.Masks,icon:R.jsx(en.Z,{})}),R.jsx(t4,{text:eT.ZP.Chat.InputActions.Clear,icon:R.jsx(ei,{}),onClick:()=>{r.updateCurrentSession(e=>{e.clearContextIndex===e.messages.length?e.clearContextIndex=void 0:(e.clearContextIndex=e.messages.length,e.memoryPrompt="")})}}),R.jsx(t4,{onClick:()=>m(!0),text:u,icon:R.jsx(eP,{})}),d&&R.jsx(e$.Qf,{defaultSelectedValue:`${l}@${i}`,items:c.map(e=>({title:`${e.displayName}${e?.provider?.providerName?"("+e?.provider?.providerName+")":""}`,value:`${e.name}@${e?.provider?.providerName}`})),onClose:()=>m(!1),onSelection:e=>{if(0===e.length)return;let[t,n]=e[0].split("@");if(r.updateCurrentSession(e=>{e.mask.modelConfig.model=t,e.mask.modelConfig.providerName=n,e.mask.syncGlobalConfig=!1}),"ByteDance"==n){let e=c.find(e=>e.name==t&&e?.provider?.providerName==n);(0,e$.CF)(e?.displayName??"")}else(0,e$.CF)(t)}})]})}function t9(e){let t=(0,eM.aK)(),n=t.currentSession(),[r,a]=(0,D.useState)(n.messages.slice());return R.jsx("div",{className:"modal-mask",children:(0,R.jsxs)(e$.u_,{title:eT.ZP.Chat.EditMessage.Title,onClose:e.onClose,actions:[R.jsx(eR.h,{text:eT.ZP.UI.Cancel,icon:R.jsx(ef.Z,{}),onClick:()=>{e.onClose()}},"cancel"),R.jsx(eR.h,{type:"primary",text:eT.ZP.UI.Confirm,icon:R.jsx(eh.Z,{}),onClick:()=>{t.updateCurrentSession(e=>e.messages=r),e.onClose()}},"ok")],children:[R.jsx(e$.aV,{children:R.jsx(e$.HC,{title:eT.ZP.Chat.EditMessage.Topic.Title,subTitle:eT.ZP.Chat.EditMessage.Topic.SubTitle,children:R.jsx("input",{type:"text",value:n.topic,onInput:e=>t.updateCurrentSession(t=>t.topic=e.currentTarget.value)})})}),R.jsx(eK.ContextPrompts,{context:r,updateContext:e=>{let t=r.slice();e(t),a(t)}})]})})}function t5(e){return R.jsx("div",{className:eD()["delete-image"],onClick:e.deleteImage,children:R.jsx(eu.Z,{})})}function ne(){let e=(0,eM.aK)(),t=e.currentSession(),n=(0,eM.MG)(),r=n.fontSize,[a,s]=(0,D.useState)(!1),l=(0,D.useRef)(null),[i,o]=(0,D.useState)(""),[c,u]=(0,D.useState)(!1),{submitKey:d,shouldSubmit:m}=function(){let e=(0,eM.MG)(),t=e.submitKey,n=(0,D.useRef)(!1);return(0,D.useEffect)(()=>{let e=()=>{n.current=!0},t=()=>{n.current=!1};return window.addEventListener("compositionstart",e),window.addEventListener("compositionend",t),()=>{window.removeEventListener("compositionstart",e),window.removeEventListener("compositionend",t)}},[]),{submitKey:t,shouldSubmit:t=>229!=t.keyCode&&"Enter"===t.key&&("Enter"!==t.key||!t.nativeEvent.isComposing&&!n.current)&&(e.submitKey===eM.mQ.AltEnter&&t.altKey||e.submitKey===eM.mQ.CtrlEnter&&t.ctrlKey||e.submitKey===eM.mQ.ShiftEnter&&t.shiftKey||e.submitKey===eM.mQ.MetaEnter&&t.metaKey||e.submitKey===eM.mQ.Enter&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&!t.metaKey)}}(),h=(0,D.useRef)(null),f=!!h?.current&&1>=Math.abs(h.current.scrollHeight-(h.current.scrollTop+h.current.clientHeight)),{setAutoScroll:p,scrollDomToBottom:g}=function(e,t=!1){let[n,r]=(0,D.useState)(!0);function a(){let t=e.current;t&&requestAnimationFrame(()=>{r(!0),t.scrollTo(0,t.scrollHeight)})}return(0,D.useEffect)(()=>{n&&!t&&a()}),{scrollRef:e,autoScroll:n,setAutoScroll:r,scrollDomToBottom:a}}(h,f),[x,v]=(0,D.useState)(!0),y=(0,eN.S0)(),w=(0,eH.s0)(),[_,b]=(0,D.useState)([]),[k,j]=(0,D.useState)(!1),E=(0,eA.f)(),[C,S]=(0,D.useState)([]),P=(0,z.y1)(e=>{S(E.search(e))},100,{leading:!0,trailing:!0}),[M,N]=(0,D.useState)(2),O=(0,z.y1)(()=>{let e=l.current?(0,eN.lx)(l.current):1;N(Math.min(20,Math.max(2+Number(!y),e)))},100,{leading:!0,trailing:!0});(0,D.useEffect)(O,[i]);let Z=(0,eB.UK)({new:()=>e.newSession(),newm:()=>w(eL.y$.NewChat),prev:()=>e.nextSession(-1),next:()=>e.nextSession(1),clear:()=>e.updateCurrentSession(e=>e.clearContextIndex=e.messages.length),del:()=>e.deleteSession(e.currentSessionIndex)}),I=e=>{o(e);let t=e.trim().length;0===t?S([]):e.startsWith(eB.x6)?S(Z.search(e)):!n.disablePromptHint&&t<30&&e.startsWith("/")&&P(e.slice(1))},A=t=>{if(""===t.trim())return;let n=Z.match(t);if(n.matched){o(""),S([]),n.invoke();return}u(!0),e.onUserInput(t,_).then(()=>u(!1)),b([]),localStorage.setItem(eL.Sb,t),o(""),S([]),y||l.current?.focus(),p(!0)},T=e=>{eI.L.stop(t.id,e)};(0,D.useEffect)(()=>{e.updateCurrentSession(e=>{let t=Date.now()-eL.tb;e.messages.forEach(e=>{(e.isError||new Date(e.date).getTime()<t)&&(e.streaming&&(e.streaming=!1),0===e.content.length&&(e.isError=!0,e.content=(0,eU.B)({error:!0,message:"empty response"})))}),e.mask.syncGlobalConfig&&(console.log("[Mask] syncing from global, name = ",e.mask.name),e.mask.modelConfig={...n.modelConfig})})},[]);let $=(e,t)=>{(0,eN.Ri)(e.currentTarget,(0,eN.YK)(t))&&(0===i.length&&o((0,eN.YK)(t)),e.preventDefault())},H=t=>{e.updateCurrentSession(e=>e.messages=e.messages.filter(e=>e.id!==t))},F=e=>{H(e)},K=n=>{let r,a;let s=t.messages.findIndex(e=>e.id===n.id);if(s<0||s>=t.messages.length){console.error("[Chat] failed to find resending message",n);return}if("assistant"===n.role){a=n;for(let e=s;e>=0;e-=1)if("user"===t.messages[e].role){r=t.messages[e];break}}else if("user"===n.role){r=n;for(let e=s;e<t.messages.length;e+=1)if("assistant"===t.messages[e].role){a=t.messages[e];break}}if(void 0===r){console.error("[Chat] failed to resend",n);return}H(r.id),H(a?.id),u(!0);let i=(0,eN.YK)(r),o=(0,eN.Bs)(r);e.onUserInput(i,o).then(()=>u(!1)),l.current?.focus()},W=t=>{e.updateCurrentSession(e=>e.mask.context.push(t)),(0,e$.CF)(eT.ZP.Chat.Actions.PinToastContent,{text:eT.ZP.Chat.Actions.PinToastAction,onClick:()=>{ec(!0)}})},U=(0,D.useMemo)(()=>t.mask.hideContext?[]:t.mask.context.slice(),[t.mask.context,t.mask.hideContext]),G=(0,eM._X)();if(0===U.length&&t.messages.at(0)?.content!==eM.ux.content){let e=Object.assign({},eM.ux);G.isAuthorized()||(e.content=eT.ZP.Error.Unauthorized),U.push(e)}let Y=(0,D.useMemo)(()=>U.concat(t.messages).concat(c?[{...(0,eM.tn)({role:"assistant",content:""}),preview:!0}]:[]).concat(i.length>0&&n.sendPreviewBubble?[{...(0,eM.tn)({role:"user",content:i}),preview:!0}]:[]),[n.sendPreviewBubble,U,c,t.messages,i]),[Q,J]=(0,D.useState)(Math.max(0,Y.length-eL.nS));function ee(e){J(e=Math.max(0,e=Math.min(Y.length-eL.nS,e)))}let et=(0,D.useMemo)(()=>{let e=Math.min(Q+3*eL.nS,Y.length);return Y.slice(Q,e)},[Q,Y]),en=e=>{let t=e.scrollTop+e.clientHeight,n=e.clientHeight,r=e.scrollTop<=n,a=t>=e.scrollHeight-n,s=t>=e.scrollHeight-(y?4:10),l=Q-eL.nS,i=Q+eL.nS;r&&!a?ee(l):a&&ee(i),v(s),p(s)};function el(){ee(Y.length-eL.nS),g()}let ei=(t.clearContextIndex??-1)>=0?t.clearContextIndex+U.length-Q:-1,[eo,ec]=(0,D.useState)(!1),ed=(0,D.useMemo)(()=>(0,tF.Z)(),[]),eh=!y&&!ed?.isApp;(0,eB.YZ)({fill:o,submit:e=>{A(e)},code:e=>{G.disableFastLink||(console.log("[Command] got code from url: ",e),(0,e$.i0)(eT.ZP.URLCommand.Code+`code = ${e}`).then(t=>{t&&G.update(t=>t.accessCode=e)}))},settings:e=>{if(!G.disableFastLink)try{let t=JSON.parse(e);console.log("[Command] got settings from url: ",t),(t.key||t.url)&&(0,e$.i0)(eT.ZP.URLCommand.Settings+`
${JSON.stringify(t,null,4)}`).then(e=>{e&&(t.key&&G.update(e=>e.openaiApiKey=t.key),t.url&&G.update(e=>e.openaiUrl=t.url),G.update(e=>e.useCustomConfig=!0))})}catch{console.error("[Command] failed to get settings from url: ",e)}}});let[ef,ep]=(0,D.useState)(!1);(0,D.useEffect)(()=>{let e=(0,eL.AI)(t.id),n=localStorage.getItem(e);n&&0===i.length&&(o(n),localStorage.removeItem(e));let r=l.current;return()=>{localStorage.setItem(e,r?.value??"")}},[]);let eg=(0,D.useCallback)(async t=>{let n=e.currentSession().mask.modelConfig.model;if((0,eN.Xf)(n)){for(let e of(t.clipboardData||window.clipboardData).items)if("file"===e.kind&&e.type.startsWith("image/")){t.preventDefault();let n=e.getAsFile();if(n){let e=[];e.push(..._),e.push(...await new Promise((e,t)=>{j(!0);let r=[];(0,eO.Ix)(n).then(t=>{r.push(t),j(!1),e(r)}).catch(e=>{j(!1),t(e)})}));let t=e.length;t>3&&e.splice(3,t-3),b(e)}}}},[_,e]);async function ex(){let e=[];e.push(..._),e.push(...await new Promise((e,t)=>{let n=document.createElement("input");n.type="file",n.accept="image/png, image/jpeg, image/webp, image/heic, image/heif",n.multiple=!0,n.onchange=n=>{j(!0);let r=n.target.files,a=[];for(let s=0;s<r.length;s++){let l=n.target.files[s];(0,eO.Ix)(l).then(t=>{a.push(t),(3===a.length||a.length===r.length)&&(j(!1),e(a))}).catch(e=>{j(!1),t(e)})}},n.click()}));let t=e.length;t>3&&e.splice(3,t-3),b(e)}return(0,R.jsxs)("div",{className:eD().chat,children:[(0,R.jsxs)("div",{className:"window-header","data-tauri-drag-region":!0,children:[y&&R.jsx("div",{className:"window-actions",children:R.jsx("div",{className:"window-action-button",children:R.jsx(eR.h,{icon:R.jsx(X,{}),bordered:!0,title:eT.ZP.Chat.Actions.ChatList,onClick:()=>w(eL.y$.Home)})})}),(0,R.jsxs)("div",{className:`window-header-title ${eD()["chat-body-title"]}`,children:[R.jsx("div",{className:`window-header-main-title ${eD()["chat-body-main-title"]}`,onClickCapture:()=>ep(!0),children:t.topic?t.topic:eM.HX}),R.jsx("div",{className:"window-header-sub-title",children:eT.ZP.Chat.SubTitle(t.messages.length)})]}),(0,R.jsxs)("div",{className:"window-actions",children:[!y&&R.jsx("div",{className:"window-action-button",children:R.jsx(eR.h,{icon:R.jsx(B,{}),bordered:!0,onClick:()=>ep(!0)})}),R.jsx("div",{className:"window-action-button",children:R.jsx(eR.h,{icon:R.jsx(V,{}),bordered:!0,title:eT.ZP.Chat.Actions.Export,onClick:()=>{s(!0)}})}),eh&&R.jsx("div",{className:"window-action-button",children:R.jsx(eR.h,{icon:n.tightBorder?R.jsx(ea.Z,{}):R.jsx(er.Z,{}),bordered:!0,onClick:()=>{n.update(e=>e.tightBorder=!e.tightBorder)}})})]}),R.jsx(t6,{showToast:!x,showModal:eo,setShowModal:ec})]}),R.jsx("div",{className:eD()["chat-body"],ref:h,onScroll:e=>en(e.currentTarget),onMouseDown:()=>l.current?.blur(),onTouchStart:()=>{l.current?.blur(),p(!1)},children:et.map((a,s)=>{let l="user"===a.role,i=s<U.length,c=s>0&&!(a.preview||0===a.content.length)&&!i,u=a.preview||a.streaming;return(0,R.jsxs)(D.Fragment,{children:[R.jsx("div",{className:l?eD()["chat-message-user"]:eD()["chat-message"],children:(0,R.jsxs)("div",{className:eD()["chat-message-container"],children:[(0,R.jsxs)("div",{className:eD()["chat-message-header"],children:[(0,R.jsxs)("div",{className:eD()["chat-message-avatar"],children:[R.jsx("div",{className:eD()["chat-message-edit"],children:R.jsx(eR.h,{icon:R.jsx(B,{}),onClick:async()=>{let t=await (0,e$.G5)(eT.ZP.Chat.Actions.Edit,(0,eN.YK)(a),10),n=t,r=(0,eN.Bs)(a);if(r.length>0){n=[{type:"text",text:t}];for(let e=0;e<r.length;e++)n.push({type:"image_url",image_url:{url:r[e]}})}e.updateCurrentSession(e=>{let t=e.mask.context.concat(e.messages).find(e=>e.id===a.id);t&&(t.content=n)})}})}),l?R.jsx(eF.qE,{avatar:n.avatar}):R.jsx(R.Fragment,{children:["system"].includes(a.role)?R.jsx(eF.qE,{avatar:"2699-fe0f"}):R.jsx(eK.MaskAvatar,{avatar:t.mask.avatar,model:a.model||t.mask.modelConfig.model})})]}),c&&R.jsx("div",{className:eD()["chat-message-actions"],children:R.jsx("div",{className:eD()["chat-input-actions"],children:a.streaming?R.jsx(t4,{text:eT.ZP.Chat.Actions.Stop,icon:R.jsx(eC,{}),onClick:()=>T(a.id??s)}):(0,R.jsxs)(R.Fragment,{children:[R.jsx(t4,{text:eT.ZP.Chat.Actions.Retry,icon:R.jsx(es.Z,{}),onClick:()=>K(a)}),R.jsx(t4,{text:eT.ZP.Chat.Actions.Delete,icon:R.jsx(eu.Z,{}),onClick:()=>F(a.id??s)}),R.jsx(t4,{text:eT.ZP.Chat.Actions.Pin,icon:R.jsx(em,{}),onClick:()=>W(a)}),R.jsx(t4,{text:eT.ZP.Chat.Actions.Copy,icon:R.jsx(q.Z,{}),onClick:()=>(0,eN.vQ)((0,eN.YK)(a))})]})})})]}),u&&R.jsx("div",{className:eD()["chat-message-status"],children:eT.ZP.Chat.Typing}),(0,R.jsxs)("div",{className:eD()["chat-message-item"],children:[R.jsx(t3,{content:(0,eN.YK)(a),loading:(a.preview||a.streaming)&&0===a.content.length&&!l,onContextMenu:e=>$(e,a),onDoubleClickCapture:()=>{y&&o((0,eN.YK)(a))},fontSize:r,parentRef:h,defaultShow:s>=et.length-6}),1==(0,eN.Bs)(a).length&&R.jsx("img",{className:eD()["chat-message-item-image"],src:(0,eN.Bs)(a)[0],alt:""}),(0,eN.Bs)(a).length>1&&R.jsx("div",{className:eD()["chat-message-item-images"],style:{"--image-count":(0,eN.Bs)(a).length},children:(0,eN.Bs)(a).map((e,t)=>R.jsx("img",{className:eD()["chat-message-item-image-multi"],src:e,alt:""},t))})]}),R.jsx("div",{className:eD()["chat-message-action-date"],children:i?eT.ZP.Chat.IsContext:a.date.toLocaleString()})]})}),s===ei-1&&R.jsx(t7,{})]},a.id)})}),(0,R.jsxs)("div",{className:eD()["chat-input-panel"],children:[R.jsx(t2,{prompts:C,onPromptSelect:e=>{setTimeout(()=>{S([]);let t=Z.match(e.content);t.matched?(t.invoke(),o("")):o(e.content),l.current?.focus()},30)}}),R.jsx(t8,{uploadImage:ex,setAttachImages:b,setUploading:j,showPromptModal:()=>ec(!0),scrollToBottom:el,hitBottom:x,uploading:k,showPromptHints:()=>{if(C.length>0){S([]);return}l.current?.focus(),o("/"),P("")}}),(0,R.jsxs)("label",{className:`${eD()["chat-input-panel-inner"]} ${0!=_.length?eD()["chat-input-panel-inner-attach"]:""}`,htmlFor:"chat-input",children:[R.jsx("textarea",{id:"chat-input",ref:l,className:eD()["chat-input"],placeholder:eT.ZP.Chat.Input(d),onInput:e=>I(e.currentTarget.value),value:i,onKeyDown:e=>{if("ArrowUp"===e.key&&i.length<=0&&!(e.metaKey||e.altKey||e.ctrlKey)){o(localStorage.getItem(eL.Sb)??""),e.preventDefault();return}m(e)&&0===C.length&&(A(i),e.preventDefault())},onFocus:el,onClick:el,onPaste:eg,rows:M,autoFocus:!y,style:{fontSize:n.fontSize}}),0!=_.length&&R.jsx("div",{className:eD()["attach-images"],children:_.map((e,t)=>R.jsx("div",{className:eD()["attach-image"],style:{backgroundImage:`url("${e}")`},children:R.jsx("div",{className:eD()["attach-image-mask"],children:R.jsx(t5,{deleteImage:()=>{b(_.filter((e,n)=>n!==t))}})})},t))}),R.jsx(eR.h,{icon:R.jsx(L,{}),text:eT.ZP.Chat.Send,className:eD()["chat-input-send"],type:"primary",onClick:()=>A(i)})]})]}),a&&R.jsx(tB,{onClose:()=>s(!1)}),ef&&R.jsx(t9,{onClose:()=>{ep(!1)}})]},t.id)}function nt(){let e=(0,eM.aK)().currentSessionIndex;return R.jsx(ne,{},e)}},31900:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return y}});let r=n(39694),a=n(17824),s=n(95344),l=a._(n(3729)),i=r._(n(81202)),o=r._(n(1758)),c=n(83855),u=n(73053),d=n(74187);n(70837);let m=n(66150),h=r._(n(74931)),f={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function p(e,t,n,r,a,s){let l=null==e?void 0:e.src;e&&e["data-loaded-src"]!==l&&(e["data-loaded-src"]=l,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&a(!0),null==n?void 0:n.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let r=!1,a=!1;n.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>r,isPropagationStopped:()=>a,persist:()=>{},preventDefault:()=>{r=!0,t.preventDefault()},stopPropagation:()=>{a=!0,t.stopPropagation()}})}(null==r?void 0:r.current)&&r.current(e)}}))}function g(e){let[t,n]=l.version.split(".",2),r=parseInt(t,10),a=parseInt(n,10);return r>18||18===r&&a>=3?{fetchPriority:e}:{fetchpriority:e}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let x=(0,l.forwardRef)((e,t)=>{let{src:n,srcSet:r,sizes:a,height:i,width:o,decoding:c,className:u,style:d,fetchPriority:m,placeholder:h,loading:f,unoptimized:x,fill:v,onLoadRef:y,onLoadingCompleteRef:w,setBlurComplete:_,setShowAltText:b,onLoad:k,onError:j,...E}=e;return(0,s.jsx)("img",{...E,...g(m),loading:f,width:o,height:i,decoding:c,"data-nimg":v?"fill":"1",className:u,style:d,sizes:a,srcSet:r,src:n,ref:(0,l.useCallback)(e=>{t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e&&(j&&(e.src=e.src),e.complete&&p(e,h,y,w,_,x))},[n,h,y,w,_,j,x,t]),onLoad:e=>{p(e.currentTarget,h,y,w,_,x)},onError:e=>{b(!0),"empty"!==h&&_(!0),j&&j(e)}})});function v(e){let{isAppRouter:t,imgAttributes:n}=e,r={as:"image",imageSrcSet:n.srcSet,imageSizes:n.sizes,crossOrigin:n.crossOrigin,referrerPolicy:n.referrerPolicy,...g(n.fetchPriority)};return t&&i.default.preload?(i.default.preload(n.src,r),null):(0,s.jsx)(o.default,{children:(0,s.jsx)("link",{rel:"preload",href:n.srcSet?void 0:n.src,...r},"__nimg-"+n.src+n.srcSet+n.sizes)})}let y=(0,l.forwardRef)((e,t)=>{let n=(0,l.useContext)(m.RouterContext),r=(0,l.useContext)(d.ImageConfigContext),a=(0,l.useMemo)(()=>{let e=f||r||u.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),n=e.deviceSizes.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:n}},[r]),{onLoad:i,onLoadingComplete:o}=e,p=(0,l.useRef)(i);(0,l.useEffect)(()=>{p.current=i},[i]);let g=(0,l.useRef)(o);(0,l.useEffect)(()=>{g.current=o},[o]);let[y,w]=(0,l.useState)(!1),[_,b]=(0,l.useState)(!1),{props:k,meta:j}=(0,c.getImgProps)(e,{defaultLoader:h.default,imgConf:a,blurComplete:y,showAltText:_});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x,{...k,unoptimized:j.unoptimized,placeholder:j.placeholder,fill:j.fill,onLoadRef:p,onLoadingCompleteRef:g,setBlurComplete:w,setShowAltText:b,ref:t}),j.priority?(0,s.jsx)(v,{isAppRouter:!n,imgAttributes:k}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7637:(e,t,n)=>{"use strict";e.exports=n(16372).vendored.contexts.AmpContext},74187:(e,t,n)=>{"use strict";e.exports=n(16372).vendored.contexts.ImageConfigContext},66150:(e,t,n)=>{"use strict";e.exports=n(16372).vendored.contexts.RouterContext},13126:(e,t)=>{"use strict";function n(e){let{ampFirst:t=!1,hybrid:n=!1,hasQuery:r=!1}=void 0===e?{}:e;return t||n&&r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return n}})},83855:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return i}}),n(70837);let r=n(86358),a=n(73053);function s(e){return void 0!==e.default}function l(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function i(e,t){var n;let i,o,c,{src:u,sizes:d,unoptimized:m=!1,priority:h=!1,loading:f,className:p,quality:g,width:x,height:v,fill:y=!1,style:w,onLoad:_,onLoadingComplete:b,placeholder:k="empty",blurDataURL:j,fetchPriority:E,layout:C,objectFit:S,objectPosition:P,lazyBoundary:M,lazyRoot:N,...O}=e,{imgConf:Z,showAltText:I,blurComplete:A,defaultLoader:T}=t,R=Z||a.imageConfigDefault;if("allSizes"in R)i=R;else{let e=[...R.deviceSizes,...R.imageSizes].sort((e,t)=>e-t),t=R.deviceSizes.sort((e,t)=>e-t);i={...R,allSizes:e,deviceSizes:t}}let z=O.loader||T;delete O.loader,delete O.srcSet;let D="__next_img_default"in z;if(D){if("custom"===i.loader)throw Error('Image with src "'+u+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=z;z=t=>{let{config:n,...r}=t;return e(r)}}if(C){"fill"===C&&(y=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[C];e&&(w={...w,...e});let t={responsive:"100vw",fill:"100vw"}[C];t&&!d&&(d=t)}let $="",H=l(x),L=l(v);if("object"==typeof(n=u)&&(s(n)||void 0!==n.src)){let e=s(u)?u.default:u;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(o=e.blurWidth,c=e.blurHeight,j=j||e.blurDataURL,$=e.src,!y){if(H||L){if(H&&!L){let t=H/e.width;L=Math.round(e.height*t)}else if(!H&&L){let t=L/e.height;H=Math.round(e.width*t)}}else H=e.width,L=e.height}}let F=!h&&("lazy"===f||void 0===f);(!(u="string"==typeof u?u:$)||u.startsWith("data:")||u.startsWith("blob:"))&&(m=!0,F=!1),i.unoptimized&&(m=!0),D&&u.endsWith(".svg")&&!i.dangerouslyAllowSVG&&(m=!0),h&&(E="high");let K=l(g),W=Object.assign(y?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:S,objectPosition:P}:{},I?{}:{color:"transparent"},w),B=A||"empty"===k?null:"blur"===k?'url("data:image/svg+xml;charset=utf-8,'+(0,r.getImageBlurSvg)({widthInt:H,heightInt:L,blurWidth:o,blurHeight:c,blurDataURL:j||"",objectFit:W.objectFit})+'")':'url("'+k+'")',U=B?{backgroundSize:W.objectFit||"cover",backgroundPosition:W.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:B}:{},V=function(e){let{config:t,src:n,unoptimized:r,width:a,quality:s,sizes:l,loader:i}=e;if(r)return{src:n,srcSet:void 0,sizes:void 0};let{widths:o,kind:c}=function(e,t,n){let{deviceSizes:r,allSizes:a}=e;if(n){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let r;r=e.exec(n);r)t.push(parseInt(r[2]));if(t.length){let e=.01*Math.min(...t);return{widths:a.filter(t=>t>=r[0]*e),kind:"w"}}return{widths:a,kind:"w"}}return"number"!=typeof t?{widths:r,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>a.find(t=>t>=e)||a[a.length-1]))],kind:"x"}}(t,a,l),u=o.length-1;return{sizes:l||"w"!==c?l:"100vw",srcSet:o.map((e,r)=>i({config:t,src:n,quality:s,width:e})+" "+("w"===c?e:r+1)+c).join(", "),src:i({config:t,src:n,quality:s,width:o[u]})}}({config:i,src:u,unoptimized:m,width:H,quality:K,sizes:d,loader:z});return{props:{...O,loading:F?"lazy":f,fetchPriority:E,width:H,height:L,decoding:"async",className:p,style:{...W,...U},sizes:V.sizes,srcSet:V.srcSet,src:V.src},meta:{unoptimized:m,priority:h,placeholder:k,fill:y}}}},1758:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{defaultHead:function(){return d},default:function(){return p}});let r=n(39694),a=n(17824),s=n(95344),l=a._(n(3729)),i=r._(n(27984)),o=n(7637),c=n(32158),u=n(13126);function d(e){void 0===e&&(e=!1);let t=[(0,s.jsx)("meta",{charSet:"utf-8"})];return e||t.push((0,s.jsx)("meta",{name:"viewport",content:"width=device-width"})),t}function m(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===l.default.Fragment?e.concat(l.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}n(70837);let h=["name","httpEquiv","charSet","itemProp"];function f(e,t){let{inAmpMode:n}=t;return e.reduce(m,[]).reverse().concat(d(n).reverse()).filter(function(){let e=new Set,t=new Set,n=new Set,r={};return a=>{let s=!0,l=!1;if(a.key&&"number"!=typeof a.key&&a.key.indexOf("$")>0){l=!0;let t=a.key.slice(a.key.indexOf("$")+1);e.has(t)?s=!1:e.add(t)}switch(a.type){case"title":case"base":t.has(a.type)?s=!1:t.add(a.type);break;case"meta":for(let e=0,t=h.length;e<t;e++){let t=h[e];if(a.props.hasOwnProperty(t)){if("charSet"===t)n.has(t)?s=!1:n.add(t);else{let e=a.props[t],n=r[t]||new Set;("name"!==t||!l)&&n.has(e)?s=!1:(n.add(e),r[t]=n)}}}}return s}}()).reverse().map((e,t)=>{let r=e.key||t;if(!n&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,l.default.cloneElement(e,t)}return l.default.cloneElement(e,{key:r})})}let p=function(e){let{children:t}=e,n=(0,l.useContext)(o.AmpStateContext),r=(0,l.useContext)(c.HeadManagerContext);return(0,s.jsx)(i.default,{reduceComponentsToState:f,headManager:r,inAmpMode:(0,u.isInAmpMode)(n),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},86358:(e,t)=>{"use strict";function n(e){let{widthInt:t,heightInt:n,blurWidth:r,blurHeight:a,blurDataURL:s,objectFit:l}=e,i=r?40*r:t,o=a?40*a:n,c=i&&o?"viewBox='0 0 "+i+" "+o+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+c+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(c?"none":"contain"===l?"xMidYMid":"cover"===l?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+s+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return n}})},73053:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{VALID_LOADERS:function(){return n},imageConfigDefault:function(){return r}});let n=["default","imgix","cloudinary","akamai","custom"],r={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1}},37412:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{getImageProps:function(){return i},default:function(){return o}});let r=n(39694),a=n(83855),s=n(31900),l=r._(n(74931)),i=e=>{let{props:t}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}},o=s.Image},74931:(e,t)=>{"use strict";function n(e){let{config:t,src:n,width:r,quality:a}=e;return t.path+"?url="+encodeURIComponent(n)+"&w="+r+"&q="+(a||75)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}}),n.__next_img_default=!0;let r=n},27984:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let r=n(3729),a=()=>{},s=()=>{};function l(e){var t;let{headManager:n,reduceComponentsToState:l}=e;function i(){if(n&&n.mountedInstances){let t=r.Children.toArray(Array.from(n.mountedInstances).filter(Boolean));n.updateHead(l(t,e))}}return null==n||null==(t=n.mountedInstances)||t.add(e.children),i(),a(()=>{var t;return null==n||null==(t=n.mountedInstances)||t.add(e.children),()=>{var t;null==n||null==(t=n.mountedInstances)||t.delete(e.children)}}),a(()=>(n&&(n._pendingUpdate=i),()=>{n&&(n._pendingUpdate=i)})),s(()=>(n&&n._pendingUpdate&&(n._pendingUpdate(),n._pendingUpdate=null),()=>{n&&n._pendingUpdate&&(n._pendingUpdate(),n._pendingUpdate=null)})),null}},75499:(e,t,n)=>{"use strict";n.d(t,{y1:()=>a});var r=n(3729);function a(e,t,n){var a=this,s=(0,r.useRef)(null),l=(0,r.useRef)(0),i=(0,r.useRef)(null),o=(0,r.useRef)([]),c=(0,r.useRef)(),u=(0,r.useRef)(),d=(0,r.useRef)(e),m=(0,r.useRef)(!0);(0,r.useEffect)(function(){d.current=e},[e]);var h=!t&&0!==t&&!1;if("function"!=typeof e)throw TypeError("Expected a function");t=+t||0;var f=!!(n=n||{}).leading,p=!("trailing"in n)||!!n.trailing,g="maxWait"in n,x=g?Math.max(+n.maxWait||0,t):null;return(0,r.useEffect)(function(){return m.current=!0,function(){m.current=!1}},[]),(0,r.useMemo)(function(){var e=function(e){var t=o.current,n=c.current;return o.current=c.current=null,l.current=e,u.current=d.current.apply(n,t)},n=function(e,t){h&&cancelAnimationFrame(i.current),i.current=h?requestAnimationFrame(e):setTimeout(e,t)},r=function(e){if(!m.current)return!1;var n=e-s.current;return!s.current||n>=t||n<0||g&&e-l.current>=x},v=function(t){return i.current=null,p&&o.current?e(t):(o.current=c.current=null,u.current)},y=function e(){var a=Date.now();if(r(a))return v(a);if(m.current){var i=t-(a-s.current);n(e,g?Math.min(i,x-(a-l.current)):i)}},w=function(){var d=Date.now(),h=r(d);if(o.current=[].slice.call(arguments),c.current=a,s.current=d,h){if(!i.current&&m.current)return l.current=s.current,n(y,t),f?e(s.current):u.current;if(g)return n(y,t),e(s.current)}return i.current||n(y,t),u.current};return w.cancel=function(){i.current&&(h?cancelAnimationFrame(i.current):clearTimeout(i.current)),l.current=0,o.current=s.current=c.current=i.current=null},w.isPending=function(){return!!i.current},w.flush=function(){return i.current?v(Date.now()):u.current},w},[f,g,t,x,p,h])}},52097:e=>{e.exports={"message-exporter-body":"exporter_message-exporter-body__ieezO","export-content":"exporter_export-content__bLZvx",steps:"exporter_steps__6n3hv","steps-progress":"exporter_steps-progress__BaZCB","steps-progress-inner":"exporter_steps-progress-inner__Bx3Y4","steps-inner":"exporter_steps-inner__EVqvK",step:"exporter_step__WhCEO","step-finished":"exporter_step-finished__eBg9d","step-current":"exporter_step-current__oh5Mc","step-index":"exporter_step-index__bWRYR","step-name":"exporter_step-name__aj81m","preview-actions":"exporter_preview-actions__EdSLJ","image-previewer":"exporter_image-previewer__uKfNQ","preview-body":"exporter_preview-body__qK5Zf","chat-info":"exporter_chat-info__N_j5m",icons:"exporter_icons__7WRoV",logo:"exporter_logo__zu13e","main-title":"exporter_main-title__jjxAd","sub-title":"exporter_sub-title__p1RCl","icon-space":"exporter_icon-space__u_tMK","chat-info-item":"exporter_chat-info-item__3D12j",message:"exporter_message__3aahS",avatar:"exporter_avatar__fGOtt",body:"exporter_body__gcKIl","message-image":"exporter_message-image__ofOeC","message-images":"exporter_message-images__oJoIX","message-image-multi":"exporter_message-image-multi__jzQdX","message-assistant":"exporter_message-assistant__sDmHi","message-user":"exporter_message-user__2t254"}},56270:e=>{e.exports={"message-selector":"message-selector_message-selector__dOKbo","message-filter":"message-selector_message-filter__Q5XSd","search-bar":"message-selector_search-bar__4E5gq",actions:"message-selector_actions__MyZCT",messages:"message-selector_messages__GbOLr",message:"message-selector_message___TaV9","message-selected":"message-selector_message-selected__b3mDv",avatar:"message-selector_avatar__HCJ8t",body:"message-selector_body__rKEIZ",date:"message-selector_date__vc48w",content:"message-selector_content__Z9W8L",checkbox:"message-selector_checkbox__erPyd"}}};