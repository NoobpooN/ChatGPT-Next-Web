{"version":3,"file":"edge-chunks/579.js","mappings":"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AS;CAAW,GAAC;AACjD,MAAMC,qBAAqB;IAChC;IACA;IACA;IACA;IACA;IACA;CACD,GAAC;AAEK,MAAMC,uBAAuB;IAClC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD,GAAC;AAEK,MAAMC,+BAA+B;IAAC;CAA4B,GAAC;AAE1E,MAAMC,eAAe;IACnB,yEAAyE;IACzE,qHAAqH;IACrH;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,MAAMC,eAAe;IACnB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,MAAMC,kBAAkB;IACtB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,MAAMC,cAAc;IAClB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,MAAMC,kBAAkB;IACtB;IACA;IACA;IACA;IACA;IACA;CACD;AAED,MAAMC,eAAe;IACnB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,MAAMC,gBAAgB;IACpB;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,MAAMC,gBAAgB;IAAC;IAAkB;IAAmB;CAAmB;AAE/E,MAAMC,gBAAgB;IACpB;IACA;IACA;IACA;IACA;CACD;AAED,MAAMC,iBAAiB;IAAC;IAAiB;IAAkB;CAAoB;AAE/E,MAAMC,WAAW;IACf;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,MAAMC,gBAAgB;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","sources":["webpack://_N_E/./app/config/server.ts","webpack://_N_E/./app/constant.ts","webpack://_N_E/./app/utils/model.ts"],"sourcesContent":["import md5 from \"spark-md5\";\nimport { DEFAULT_MODELS, DEFAULT_GA_ID } from \"../constant\";\nimport { isGPT4Model } from \"../utils/model\";\n\ndeclare global {\n  namespace NodeJS {\n    interface ProcessEnv {\n      PROXY_URL?: string; // docker only\n\n      OPENAI_API_KEY?: string;\n      CODE?: string;\n\n      BASE_URL?: string;\n      OPENAI_ORG_ID?: string; // openai only\n\n      VERCEL?: string;\n      BUILD_MODE?: \"standalone\" | \"export\";\n      BUILD_APP?: string; // is building desktop app\n\n      HIDE_USER_API_KEY?: string; // disable user's api key input\n      DISABLE_GPT4?: string; // allow user to use gpt-4 or not\n      ENABLE_BALANCE_QUERY?: string; // allow user to query balance or not\n      DISABLE_FAST_LINK?: string; // disallow parse settings from url or not\n      CUSTOM_MODELS?: string; // to control custom models\n      DEFAULT_MODEL?: string; // to control default model in every new chat window\n      VISION_MODELS?: string; // to control vision models\n\n      // stability only\n      STABILITY_URL?: string;\n      STABILITY_API_KEY?: string;\n\n      // azure only\n      AZURE_URL?: string; // https://{azure-url}/openai/deployments/{deploy-name}\n      AZURE_API_KEY?: string;\n      AZURE_API_VERSION?: string;\n\n      // google only\n      GOOGLE_API_KEY?: string;\n      GOOGLE_URL?: string;\n\n      // google tag manager\n      GTM_ID?: string;\n\n      // anthropic only\n      ANTHROPIC_URL?: string;\n      ANTHROPIC_API_KEY?: string;\n      ANTHROPIC_API_VERSION?: string;\n\n      // baidu only\n      BAIDU_URL?: string;\n      BAIDU_API_KEY?: string;\n      BAIDU_SECRET_KEY?: string;\n\n      // bytedance only\n      BYTEDANCE_URL?: string;\n      BYTEDANCE_API_KEY?: string;\n\n      // alibaba only\n      ALIBABA_URL?: string;\n      ALIBABA_API_KEY?: string;\n\n      // tencent only\n      TENCENT_URL?: string;\n      TENCENT_SECRET_KEY?: string;\n      TENCENT_SECRET_ID?: string;\n\n      // moonshot only\n      MOONSHOT_URL?: string;\n      MOONSHOT_API_KEY?: string;\n\n      // iflytek only\n      IFLYTEK_URL?: string;\n      IFLYTEK_API_KEY?: string;\n      IFLYTEK_API_SECRET?: string;\n\n      DEEPSEEK_URL?: string;\n      DEEPSEEK_API_KEY?: string;\n\n      // xai only\n      XAI_URL?: string;\n      XAI_API_KEY?: string;\n\n      // chatglm only\n      CHATGLM_URL?: string;\n      CHATGLM_API_KEY?: string;\n\n      // siliconflow only\n      SILICONFLOW_URL?: string;\n      SILICONFLOW_API_KEY?: string;\n\n      // custom template for preprocessing user input\n      DEFAULT_INPUT_TEMPLATE?: string;\n\n      ENABLE_MCP?: string; // enable mcp functionality\n    }\n  }\n}\n\nconst ACCESS_CODES = (function getAccessCodes(): Set<string> {\n  const code = process.env.CODE;\n\n  try {\n    const codes = (code?.split(\",\") ?? [])\n      .filter((v) => !!v)\n      .map((v) => md5.hash(v.trim()));\n    return new Set(codes);\n  } catch (e) {\n    return new Set();\n  }\n})();\n\nfunction getApiKey(keys?: string) {\n  const apiKeyEnvVar = keys ?? \"\";\n  const apiKeys = apiKeyEnvVar.split(\",\").map((v) => v.trim());\n  const randomIndex = Math.floor(Math.random() * apiKeys.length);\n  const apiKey = apiKeys[randomIndex];\n  if (apiKey) {\n    console.log(\n      `[Server Config] using ${randomIndex + 1} of ${\n        apiKeys.length\n      } api key - ${apiKey}`,\n    );\n  }\n\n  return apiKey;\n}\n\nexport const getServerSideConfig = () => {\n  if (typeof process === \"undefined\") {\n    throw Error(\n      \"[Server Config] you are importing a nodejs-only module outside of nodejs\",\n    );\n  }\n\n  const disableGPT4 = !!process.env.DISABLE_GPT4;\n  let customModels = process.env.CUSTOM_MODELS ?? \"\";\n  let defaultModel = process.env.DEFAULT_MODEL ?? \"\";\n  let visionModels = process.env.VISION_MODELS ?? \"\";\n\n  if (disableGPT4) {\n    if (customModels) customModels += \",\";\n    customModels += DEFAULT_MODELS.filter((m) => isGPT4Model(m.name))\n      .map((m) => \"-\" + m.name)\n      .join(\",\");\n    if (defaultModel && isGPT4Model(defaultModel)) {\n      defaultModel = \"\";\n    }\n  }\n\n  const isStability = !!process.env.STABILITY_API_KEY;\n\n  const isAzure = !!process.env.AZURE_URL;\n  const isGoogle = !!process.env.GOOGLE_API_KEY;\n  const isAnthropic = !!process.env.ANTHROPIC_API_KEY;\n  const isTencent = !!process.env.TENCENT_API_KEY;\n\n  const isBaidu = !!process.env.BAIDU_API_KEY;\n  const isBytedance = !!process.env.BYTEDANCE_API_KEY;\n  const isAlibaba = !!process.env.ALIBABA_API_KEY;\n  const isMoonshot = !!process.env.MOONSHOT_API_KEY;\n  const isIflytek = !!process.env.IFLYTEK_API_KEY;\n  const isDeepSeek = !!process.env.DEEPSEEK_API_KEY;\n  const isXAI = !!process.env.XAI_API_KEY;\n  const isChatGLM = !!process.env.CHATGLM_API_KEY;\n  const isSiliconFlow = !!process.env.SILICONFLOW_API_KEY;\n  // const apiKeyEnvVar = process.env.OPENAI_API_KEY ?? \"\";\n  // const apiKeys = apiKeyEnvVar.split(\",\").map((v) => v.trim());\n  // const randomIndex = Math.floor(Math.random() * apiKeys.length);\n  // const apiKey = apiKeys[randomIndex];\n  // console.log(\n  //   `[Server Config] using ${randomIndex + 1} of ${apiKeys.length} api key`,\n  // );\n\n  const allowedWebDavEndpoints = (\n    process.env.WHITE_WEBDAV_ENDPOINTS ?? \"\"\n  ).split(\",\");\n\n  return {\n    baseUrl: process.env.BASE_URL,\n    apiKey: getApiKey(process.env.OPENAI_API_KEY),\n    openaiOrgId: process.env.OPENAI_ORG_ID,\n\n    isStability,\n    stabilityUrl: process.env.STABILITY_URL,\n    stabilityApiKey: getApiKey(process.env.STABILITY_API_KEY),\n\n    isAzure,\n    azureUrl: process.env.AZURE_URL,\n    azureApiKey: getApiKey(process.env.AZURE_API_KEY),\n    azureApiVersion: process.env.AZURE_API_VERSION,\n\n    isGoogle,\n    googleApiKey: getApiKey(process.env.GOOGLE_API_KEY),\n    googleUrl: process.env.GOOGLE_URL,\n\n    isAnthropic,\n    anthropicApiKey: getApiKey(process.env.ANTHROPIC_API_KEY),\n    anthropicApiVersion: process.env.ANTHROPIC_API_VERSION,\n    anthropicUrl: process.env.ANTHROPIC_URL,\n\n    isBaidu,\n    baiduUrl: process.env.BAIDU_URL,\n    baiduApiKey: getApiKey(process.env.BAIDU_API_KEY),\n    baiduSecretKey: process.env.BAIDU_SECRET_KEY,\n\n    isBytedance,\n    bytedanceApiKey: getApiKey(process.env.BYTEDANCE_API_KEY),\n    bytedanceUrl: process.env.BYTEDANCE_URL,\n\n    isAlibaba,\n    alibabaUrl: process.env.ALIBABA_URL,\n    alibabaApiKey: getApiKey(process.env.ALIBABA_API_KEY),\n\n    isTencent,\n    tencentUrl: process.env.TENCENT_URL,\n    tencentSecretKey: getApiKey(process.env.TENCENT_SECRET_KEY),\n    tencentSecretId: process.env.TENCENT_SECRET_ID,\n\n    isMoonshot,\n    moonshotUrl: process.env.MOONSHOT_URL,\n    moonshotApiKey: getApiKey(process.env.MOONSHOT_API_KEY),\n\n    isIflytek,\n    iflytekUrl: process.env.IFLYTEK_URL,\n    iflytekApiKey: process.env.IFLYTEK_API_KEY,\n    iflytekApiSecret: process.env.IFLYTEK_API_SECRET,\n\n    isDeepSeek,\n    deepseekUrl: process.env.DEEPSEEK_URL,\n    deepseekApiKey: getApiKey(process.env.DEEPSEEK_API_KEY),\n\n    isXAI,\n    xaiUrl: process.env.XAI_URL,\n    xaiApiKey: getApiKey(process.env.XAI_API_KEY),\n\n    isChatGLM,\n    chatglmUrl: process.env.CHATGLM_URL,\n    chatglmApiKey: getApiKey(process.env.CHATGLM_API_KEY),\n\n    cloudflareAccountId: process.env.CLOUDFLARE_ACCOUNT_ID,\n    cloudflareKVNamespaceId: process.env.CLOUDFLARE_KV_NAMESPACE_ID,\n    cloudflareKVApiKey: getApiKey(process.env.CLOUDFLARE_KV_API_KEY),\n    cloudflareKVTTL: process.env.CLOUDFLARE_KV_TTL,\n\n    isSiliconFlow,\n    siliconFlowUrl: process.env.SILICONFLOW_URL,\n    siliconFlowApiKey: getApiKey(process.env.SILICONFLOW_API_KEY),\n\n    gtmId: process.env.GTM_ID,\n    gaId: process.env.GA_ID || DEFAULT_GA_ID,\n\n    needCode: ACCESS_CODES.size > 0,\n    code: process.env.CODE,\n    codes: ACCESS_CODES,\n\n    proxyUrl: process.env.PROXY_URL,\n    isVercel: !!process.env.VERCEL,\n\n    hideUserApiKey: !!process.env.HIDE_USER_API_KEY,\n    disableGPT4,\n    hideBalanceQuery: !process.env.ENABLE_BALANCE_QUERY,\n    disableFastLink: !!process.env.DISABLE_FAST_LINK,\n    customModels,\n    defaultModel,\n    visionModels,\n    allowedWebDavEndpoints,\n    enableMcp: process.env.ENABLE_MCP === \"true\",\n  };\n};\n","export const OWNER = \"ChatGPTNextWeb\";\nexport const REPO = \"ChatGPT-Next-Web\";\nexport const REPO_URL = `https://github.com/${OWNER}/${REPO}`;\nexport const PLUGINS_REPO_URL = `https://github.com/${OWNER}/NextChat-Awesome-Plugins`;\nexport const ISSUE_URL = `https://github.com/${OWNER}/${REPO}/issues`;\nexport const UPDATE_URL = `${REPO_URL}#keep-updated`;\nexport const RELEASE_URL = `${REPO_URL}/releases`;\nexport const FETCH_COMMIT_URL = `https://api.github.com/repos/${OWNER}/${REPO}/commits?per_page=1`;\nexport const FETCH_TAG_URL = `https://api.github.com/repos/${OWNER}/${REPO}/tags?per_page=1`;\nexport const RUNTIME_CONFIG_DOM = \"danger-runtime-config\";\n\nexport const STABILITY_BASE_URL = \"https://api.stability.ai\";\n\nexport const OPENAI_BASE_URL = \"https://api.openai.com\";\nexport const ANTHROPIC_BASE_URL = \"https://api.anthropic.com\";\n\nexport const GEMINI_BASE_URL = \"https://generativelanguage.googleapis.com/\";\n\nexport const BAIDU_BASE_URL = \"https://aip.baidubce.com\";\nexport const BAIDU_OATUH_URL = `${BAIDU_BASE_URL}/oauth/2.0/token`;\n\nexport const BYTEDANCE_BASE_URL = \"https://ark.cn-beijing.volces.com\";\n\nexport const ALIBABA_BASE_URL = \"https://dashscope.aliyuncs.com/api/\";\n\nexport const TENCENT_BASE_URL = \"https://hunyuan.tencentcloudapi.com\";\n\nexport const MOONSHOT_BASE_URL = \"https://api.moonshot.cn\";\nexport const IFLYTEK_BASE_URL = \"https://spark-api-open.xf-yun.com\";\n\nexport const DEEPSEEK_BASE_URL = \"https://api.deepseek.com\";\n\nexport const XAI_BASE_URL = \"https://api.x.ai\";\n\nexport const CHATGLM_BASE_URL = \"https://open.bigmodel.cn\";\n\nexport const SILICONFLOW_BASE_URL = \"https://api.siliconflow.cn\";\n\nexport const CACHE_URL_PREFIX = \"/api/cache\";\nexport const UPLOAD_URL = `${CACHE_URL_PREFIX}/upload`;\n\nexport enum Path {\n  Home = \"/\",\n  Chat = \"/chat\",\n  Settings = \"/settings\",\n  NewChat = \"/new-chat\",\n  Masks = \"/masks\",\n  Plugins = \"/plugins\",\n  Auth = \"/auth\",\n  Sd = \"/sd\",\n  SdNew = \"/sd-new\",\n  Artifacts = \"/artifacts\",\n  SearchChat = \"/search-chat\",\n  McpMarket = \"/mcp-market\",\n}\n\nexport enum ApiPath {\n  Cors = \"\",\n  Azure = \"/api/azure\",\n  OpenAI = \"/api/openai\",\n  Anthropic = \"/api/anthropic\",\n  Google = \"/api/google\",\n  Baidu = \"/api/baidu\",\n  ByteDance = \"/api/bytedance\",\n  Alibaba = \"/api/alibaba\",\n  Tencent = \"/api/tencent\",\n  Moonshot = \"/api/moonshot\",\n  Iflytek = \"/api/iflytek\",\n  Stability = \"/api/stability\",\n  Artifacts = \"/api/artifacts\",\n  XAI = \"/api/xai\",\n  ChatGLM = \"/api/chatglm\",\n  DeepSeek = \"/api/deepseek\",\n  SiliconFlow = \"/api/siliconflow\",\n}\n\nexport enum SlotID {\n  AppBody = \"app-body\",\n  CustomModel = \"custom-model\",\n}\n\nexport enum FileName {\n  Masks = \"masks.json\",\n  Prompts = \"prompts.json\",\n}\n\nexport enum StoreKey {\n  Chat = \"chat-next-web-store\",\n  Plugin = \"chat-next-web-plugin\",\n  Access = \"access-control\",\n  Config = \"app-config\",\n  Mask = \"mask-store\",\n  Prompt = \"prompt-store\",\n  Update = \"chat-update\",\n  Sync = \"sync\",\n  SdList = \"sd-list\",\n  Mcp = \"mcp-store\",\n}\n\nexport const DEFAULT_SIDEBAR_WIDTH = 300;\nexport const MAX_SIDEBAR_WIDTH = 500;\nexport const MIN_SIDEBAR_WIDTH = 230;\nexport const NARROW_SIDEBAR_WIDTH = 100;\n\nexport const ACCESS_CODE_PREFIX = \"nk-\";\n\nexport const LAST_INPUT_KEY = \"last-input\";\nexport const UNFINISHED_INPUT = (id: string) => \"unfinished-input-\" + id;\n\nexport const STORAGE_KEY = \"chatgpt-next-web\";\n\nexport const REQUEST_TIMEOUT_MS = 60000;\nexport const REQUEST_TIMEOUT_MS_FOR_THINKING = REQUEST_TIMEOUT_MS * 5;\n\nexport const EXPORT_MESSAGE_CLASS_NAME = \"export-markdown\";\n\nexport enum ServiceProvider {\n  OpenAI = \"OpenAI\",\n  Azure = \"Azure\",\n  Google = \"Google\",\n  Anthropic = \"Anthropic\",\n  Baidu = \"Baidu\",\n  ByteDance = \"ByteDance\",\n  Alibaba = \"Alibaba\",\n  Tencent = \"Tencent\",\n  Moonshot = \"Moonshot\",\n  Stability = \"Stability\",\n  Iflytek = \"Iflytek\",\n  XAI = \"XAI\",\n  ChatGLM = \"ChatGLM\",\n  DeepSeek = \"DeepSeek\",\n  SiliconFlow = \"SiliconFlow\",\n}\n\n// Google API safety settings, see https://ai.google.dev/gemini-api/docs/safety-settings\n// BLOCK_NONE will not block any content, and BLOCK_ONLY_HIGH will block only high-risk content.\nexport enum GoogleSafetySettingsThreshold {\n  BLOCK_NONE = \"BLOCK_NONE\",\n  BLOCK_ONLY_HIGH = \"BLOCK_ONLY_HIGH\",\n  BLOCK_MEDIUM_AND_ABOVE = \"BLOCK_MEDIUM_AND_ABOVE\",\n  BLOCK_LOW_AND_ABOVE = \"BLOCK_LOW_AND_ABOVE\",\n}\n\nexport enum ModelProvider {\n  Stability = \"Stability\",\n  GPT = \"GPT\",\n  GeminiPro = \"GeminiPro\",\n  Claude = \"Claude\",\n  Ernie = \"Ernie\",\n  Doubao = \"Doubao\",\n  Qwen = \"Qwen\",\n  Hunyuan = \"Hunyuan\",\n  Moonshot = \"Moonshot\",\n  Iflytek = \"Iflytek\",\n  XAI = \"XAI\",\n  ChatGLM = \"ChatGLM\",\n  DeepSeek = \"DeepSeek\",\n  SiliconFlow = \"SiliconFlow\",\n}\n\nexport const Stability = {\n  GeneratePath: \"v2beta/stable-image/generate\",\n  ExampleEndpoint: \"https://api.stability.ai\",\n};\n\nexport const Anthropic = {\n  ChatPath: \"v1/messages\",\n  ChatPath1: \"v1/complete\",\n  ExampleEndpoint: \"https://api.anthropic.com\",\n  Vision: \"2023-06-01\",\n};\n\nexport const OpenaiPath = {\n  ChatPath: \"v1/chat/completions\",\n  SpeechPath: \"v1/audio/speech\",\n  ImagePath: \"v1/images/generations\",\n  UsagePath: \"dashboard/billing/usage\",\n  SubsPath: \"dashboard/billing/subscription\",\n  ListModelPath: \"v1/models\",\n};\n\nexport const Azure = {\n  ChatPath: (deployName: string, apiVersion: string) =>\n    `deployments/${deployName}/chat/completions?api-version=${apiVersion}`,\n  // https://<your_resource_name>.openai.azure.com/openai/deployments/<your_deployment_name>/images/generations?api-version=<api_version>\n  ImagePath: (deployName: string, apiVersion: string) =>\n    `deployments/${deployName}/images/generations?api-version=${apiVersion}`,\n  ExampleEndpoint: \"https://{resource-url}/openai\",\n};\n\nexport const Google = {\n  ExampleEndpoint: \"https://generativelanguage.googleapis.com/\",\n  ChatPath: (modelName: string) =>\n    `v1beta/models/${modelName}:streamGenerateContent`,\n};\n\nexport const Baidu = {\n  ExampleEndpoint: BAIDU_BASE_URL,\n  ChatPath: (modelName: string) => {\n    let endpoint = modelName;\n    if (modelName === \"ernie-4.0-8k\") {\n      endpoint = \"completions_pro\";\n    }\n    if (modelName === \"ernie-4.0-8k-preview-0518\") {\n      endpoint = \"completions_adv_pro\";\n    }\n    if (modelName === \"ernie-3.5-8k\") {\n      endpoint = \"completions\";\n    }\n    if (modelName === \"ernie-speed-8k\") {\n      endpoint = \"ernie_speed\";\n    }\n    return `rpc/2.0/ai_custom/v1/wenxinworkshop/chat/${endpoint}`;\n  },\n};\n\nexport const ByteDance = {\n  ExampleEndpoint: \"https://ark.cn-beijing.volces.com/api/\",\n  ChatPath: \"api/v3/chat/completions\",\n};\n\nexport const Alibaba = {\n  ExampleEndpoint: ALIBABA_BASE_URL,\n  ChatPath: (modelName: string) => {\n    if (modelName.includes(\"vl\") || modelName.includes(\"omni\")) {\n      return \"v1/services/aigc/multimodal-generation/generation\";\n    }\n    return `v1/services/aigc/text-generation/generation`;\n  },\n};\n\nexport const Tencent = {\n  ExampleEndpoint: TENCENT_BASE_URL,\n};\n\nexport const Moonshot = {\n  ExampleEndpoint: MOONSHOT_BASE_URL,\n  ChatPath: \"v1/chat/completions\",\n};\n\nexport const Iflytek = {\n  ExampleEndpoint: IFLYTEK_BASE_URL,\n  ChatPath: \"v1/chat/completions\",\n};\n\nexport const DeepSeek = {\n  ExampleEndpoint: DEEPSEEK_BASE_URL,\n  ChatPath: \"chat/completions\",\n};\n\nexport const XAI = {\n  ExampleEndpoint: XAI_BASE_URL,\n  ChatPath: \"v1/chat/completions\",\n};\n\nexport const ChatGLM = {\n  ExampleEndpoint: CHATGLM_BASE_URL,\n  ChatPath: \"api/paas/v4/chat/completions\",\n  ImagePath: \"api/paas/v4/images/generations\",\n  VideoPath: \"api/paas/v4/videos/generations\",\n};\n\nexport const SiliconFlow = {\n  ExampleEndpoint: SILICONFLOW_BASE_URL,\n  ChatPath: \"v1/chat/completions\",\n  ListModelPath: \"v1/models?&sub_type=chat\",\n};\n\nexport const DEFAULT_INPUT_TEMPLATE = `{{input}}`; // input / time / model / lang\n// export const DEFAULT_SYSTEM_TEMPLATE = `\n// You are ChatGPT, a large language model trained by {{ServiceProvider}}.\n// Knowledge cutoff: {{cutoff}}\n// Current model: {{model}}\n// Current time: {{time}}\n// Latex inline: $x^2$\n// Latex block: $$e=mc^2$$\n// `;\nexport const DEFAULT_SYSTEM_TEMPLATE = `\nYou are ChatGPT, a large language model trained by {{ServiceProvider}}.\nKnowledge cutoff: {{cutoff}}\nCurrent model: {{model}}\nCurrent time: {{time}}\nLatex inline: \\\\(x^2\\\\) \nLatex block: $$e=mc^2$$\n`;\n\nexport const MCP_TOOLS_TEMPLATE = `\n[clientId]\n{{ clientId }}\n[tools]\n{{ tools }}\n`;\n\nexport const MCP_SYSTEM_TEMPLATE = `\nYou are an AI assistant with access to system tools. Your role is to help users by combining natural language understanding with tool operations when needed.\n\n1. AVAILABLE TOOLS:\n{{ MCP_TOOLS }}\n\n2. WHEN TO USE TOOLS:\n   - ALWAYS USE TOOLS when they can help answer user questions\n   - DO NOT just describe what you could do - TAKE ACTION immediately\n   - If you're not sure whether to use a tool, USE IT\n   - Common triggers for tool use:\n     * Questions about files or directories\n     * Requests to check, list, or manipulate system resources\n     * Any query that can be answered with available tools\n\n3. HOW TO USE TOOLS:\n   A. Tool Call Format:\n      - Use markdown code blocks with format: \\`\\`\\`json:mcp:{clientId}\\`\\`\\`\n      - Always include:\n        * method: \"tools/call\"（Only this method is supported）\n        * params: \n          - name: must match an available primitive name\n          - arguments: required parameters for the primitive\n\n   B. Response Format:\n      - Tool responses will come as user messages\n      - Format: \\`\\`\\`json:mcp-response:{clientId}\\`\\`\\`\n      - Wait for response before making another tool call\n\n   C. Important Rules:\n      - Only use tools/call method\n      - Only ONE tool call per message\n      - ALWAYS TAKE ACTION instead of just describing what you could do\n      - Include the correct clientId in code block language tag\n      - Verify arguments match the primitive's requirements\n\n4. INTERACTION FLOW:\n   A. When user makes a request:\n      - IMMEDIATELY use appropriate tool if available\n      - DO NOT ask if user wants you to use the tool\n      - DO NOT just describe what you could do\n   B. After receiving tool response:\n      - Explain results clearly\n      - Take next appropriate action if needed\n   C. If tools fail:\n      - Explain the error\n      - Try alternative approach immediately\n\n5. EXAMPLE INTERACTION:\n\n  good example:\n\n   \\`\\`\\`json:mcp:filesystem\n   {\n     \"method\": \"tools/call\",\n     \"params\": {\n       \"name\": \"list_allowed_directories\",\n       \"arguments\": {}\n     }\n   }\n   \\`\\`\\`\"\n\n\n  \\`\\`\\`json:mcp-response:filesystem\n  {\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"write_file\",\n    \"arguments\": {\n      \"path\": \"/Users/river/dev/nextchat/test/joke.txt\",\n      \"content\": \"为什么数学书总是感到忧伤？因为它有太多的问题。\"\n    }\n  }\n  }\n\\`\\`\\`\n\n   follwing is the wrong! mcp json example:\n\n   \\`\\`\\`json:mcp:filesystem\n   {\n      \"method\": \"write_file\",\n      \"params\": {\n        \"path\": \"NextChat_Information.txt\",\n        \"content\": \"1\"\n    }\n   }\n   \\`\\`\\`\n\n   This is wrong because the method is not tools/call.\n   \n   \\`\\`\\`{\n  \"method\": \"search_repositories\",\n  \"params\": {\n    \"query\": \"2oeee\"\n  }\n}\n   \\`\\`\\`\n\n   This is wrong because the method is not tools/call.!!!!!!!!!!!\n\n   the right format is:\n   \\`\\`\\`json:mcp:filesystem\n   {\n     \"method\": \"tools/call\",\n     \"params\": {\n       \"name\": \"search_repositories\",\n       \"arguments\": {\n         \"query\": \"2oeee\"\n       }\n     }\n   }\n   \\`\\`\\`\n   \n   please follow the format strictly ONLY use tools/call method!!!!!!!!!!!\n   \n`;\n\nexport const SUMMARIZE_MODEL = \"gpt-4o-mini\";\nexport const GEMINI_SUMMARIZE_MODEL = \"gemini-pro\";\nexport const DEEPSEEK_SUMMARIZE_MODEL = \"deepseek-chat\";\n\nexport const KnowledgeCutOffDate: Record<string, string> = {\n  default: \"2021-09\",\n  \"gpt-4-turbo\": \"2023-12\",\n  \"gpt-4-turbo-2024-04-09\": \"2023-12\",\n  \"gpt-4-turbo-preview\": \"2023-12\",\n  \"gpt-4.1\": \"2024-06\",\n  \"gpt-4.1-2025-04-14\": \"2024-06\",\n  \"gpt-4.1-mini\": \"2024-06\",\n  \"gpt-4.1-mini-2025-04-14\": \"2024-06\",\n  \"gpt-4.1-nano\": \"2024-06\",\n  \"gpt-4.1-nano-2025-04-14\": \"2024-06\",\n  \"gpt-4.5-preview\": \"2023-10\",\n  \"gpt-4.5-preview-2025-02-27\": \"2023-10\",\n  \"gpt-4o\": \"2023-10\",\n  \"gpt-4o-2024-05-13\": \"2023-10\",\n  \"gpt-4o-2024-08-06\": \"2023-10\",\n  \"gpt-4o-2024-11-20\": \"2023-10\",\n  \"chatgpt-4o-latest\": \"2023-10\",\n  \"gpt-4o-mini\": \"2023-10\",\n  \"gpt-4o-mini-2024-07-18\": \"2023-10\",\n  \"gpt-4-vision-preview\": \"2023-04\",\n  \"o1-mini-2024-09-12\": \"2023-10\",\n  \"o1-mini\": \"2023-10\",\n  \"o1-preview-2024-09-12\": \"2023-10\",\n  \"o1-preview\": \"2023-10\",\n  \"o1-2024-12-17\": \"2023-10\",\n  o1: \"2023-10\",\n  \"o3-mini-2025-01-31\": \"2023-10\",\n  \"o3-mini\": \"2023-10\",\n  // After improvements,\n  // it's now easier to add \"KnowledgeCutOffDate\" instead of stupid hardcoding it, as was done previously.\n  \"gemini-pro\": \"2023-12\",\n  \"gemini-pro-vision\": \"2023-12\",\n  \"deepseek-chat\": \"2024-07\",\n  \"deepseek-coder\": \"2024-07\",\n};\n\nexport const DEFAULT_TTS_ENGINE = \"OpenAI-TTS\";\nexport const DEFAULT_TTS_ENGINES = [\"OpenAI-TTS\", \"Edge-TTS\"];\nexport const DEFAULT_TTS_MODEL = \"tts-1\";\nexport const DEFAULT_TTS_VOICE = \"alloy\";\nexport const DEFAULT_TTS_MODELS = [\"tts-1\", \"tts-1-hd\"];\nexport const DEFAULT_TTS_VOICES = [\n  \"alloy\",\n  \"echo\",\n  \"fable\",\n  \"onyx\",\n  \"nova\",\n  \"shimmer\",\n];\n\nexport const VISION_MODEL_REGEXES = [\n  /vision/,\n  /gpt-4o/,\n  /gpt-4\\.1/,\n  /claude-3/,\n  /gemini-1\\.5/,\n  /gemini-exp/,\n  /gemini-2\\.0/,\n  /learnlm/,\n  /qwen-vl/,\n  /qwen2-vl/,\n  /gpt-4-turbo(?!.*preview)/, // Matches \"gpt-4-turbo\" but not \"gpt-4-turbo-preview\"\n  /^dall-e-3$/, // Matches exactly \"dall-e-3\"\n  /glm-4v/,\n  /vl/i,\n  /o3/,\n  /o4-mini/,\n];\n\nexport const EXCLUDE_VISION_MODEL_REGEXES = [/claude-3-5-haiku-20241022/];\n\nconst openaiModels = [\n  // As of July 2024, gpt-4o-mini should be used in place of gpt-3.5-turbo,\n  // as it is cheaper, more capable, multimodal, and just as fast. gpt-3.5-turbo is still available for use in the API.\n  \"gpt-3.5-turbo\",\n  \"gpt-3.5-turbo-1106\",\n  \"gpt-3.5-turbo-0125\",\n  \"gpt-4\",\n  \"gpt-4-0613\",\n  \"gpt-4-32k\",\n  \"gpt-4-32k-0613\",\n  \"gpt-4-turbo\",\n  \"gpt-4-turbo-preview\",\n  \"gpt-4.1\",\n  \"gpt-4.1-2025-04-14\",\n  \"gpt-4.1-mini\",\n  \"gpt-4.1-mini-2025-04-14\",\n  \"gpt-4.1-nano\",\n  \"gpt-4.1-nano-2025-04-14\",\n  \"gpt-4.5-preview\",\n  \"gpt-4.5-preview-2025-02-27\",\n  \"gpt-4o\",\n  \"gpt-4o-2024-05-13\",\n  \"gpt-4o-2024-08-06\",\n  \"gpt-4o-2024-11-20\",\n  \"chatgpt-4o-latest\",\n  \"gpt-4o-mini\",\n  \"gpt-4o-mini-2024-07-18\",\n  \"gpt-4-vision-preview\",\n  \"gpt-4-turbo-2024-04-09\",\n  \"gpt-4-1106-preview\",\n  \"dall-e-3\",\n  \"o1-mini\",\n  \"o1-preview\",\n  \"o3-mini\",\n  \"o3\",\n  \"o4-mini\",\n];\n\nconst googleModels = [\n  \"gemini-1.0-pro\", // Deprecated on 2/15/2025\n  \"gemini-1.5-pro-latest\",\n  \"gemini-1.5-pro\",\n  \"gemini-1.5-pro-002\",\n  \"gemini-1.5-pro-exp-0827\",\n  \"gemini-1.5-flash-latest\",\n  \"gemini-1.5-flash-8b-latest\",\n  \"gemini-1.5-flash\",\n  \"gemini-1.5-flash-8b\",\n  \"gemini-1.5-flash-002\",\n  \"gemini-1.5-flash-exp-0827\",\n  \"learnlm-1.5-pro-experimental\",\n  \"gemini-exp-1114\",\n  \"gemini-exp-1121\",\n  \"gemini-exp-1206\",\n  \"gemini-2.0-flash\",\n  \"gemini-2.0-flash-exp\",\n  \"gemini-2.0-flash-lite-preview-02-05\",\n  \"gemini-2.0-flash-thinking-exp\",\n  \"gemini-2.0-flash-thinking-exp-1219\",\n  \"gemini-2.0-flash-thinking-exp-01-21\",\n  \"gemini-2.0-pro-exp\",\n  \"gemini-2.0-pro-exp-02-05\",\n  \"gemini-2.5-pro-preview-06-05\",\n];\n\nconst anthropicModels = [\n  \"claude-instant-1.2\",\n  \"claude-2.0\",\n  \"claude-2.1\",\n  \"claude-3-sonnet-20240229\",\n  \"claude-3-opus-20240229\",\n  \"claude-3-opus-latest\",\n  \"claude-3-haiku-20240307\",\n  \"claude-3-5-haiku-20241022\",\n  \"claude-3-5-haiku-latest\",\n  \"claude-3-5-sonnet-20240620\",\n  \"claude-3-5-sonnet-20241022\",\n  \"claude-3-5-sonnet-latest\",\n  \"claude-3-7-sonnet-20250219\",\n  \"claude-3-7-sonnet-latest\",\n];\n\nconst baiduModels = [\n  \"ernie-4.0-turbo-8k\",\n  \"ernie-4.0-8k\",\n  \"ernie-4.0-8k-preview\",\n  \"ernie-4.0-8k-preview-0518\",\n  \"ernie-4.0-8k-latest\",\n  \"ernie-3.5-8k\",\n  \"ernie-3.5-8k-0205\",\n  \"ernie-speed-128k\",\n  \"ernie-speed-8k\",\n  \"ernie-lite-8k\",\n  \"ernie-tiny-8k\",\n];\n\nconst bytedanceModels = [\n  \"Doubao-lite-4k\",\n  \"Doubao-lite-32k\",\n  \"Doubao-lite-128k\",\n  \"Doubao-pro-4k\",\n  \"Doubao-pro-32k\",\n  \"Doubao-pro-128k\",\n];\n\nconst alibabaModes = [\n  \"qwen-turbo\",\n  \"qwen-plus\",\n  \"qwen-max\",\n  \"qwen-max-0428\",\n  \"qwen-max-0403\",\n  \"qwen-max-0107\",\n  \"qwen-max-longcontext\",\n  \"qwen-omni-turbo\",\n  \"qwen-vl-plus\",\n  \"qwen-vl-max\",\n];\n\nconst tencentModels = [\n  \"hunyuan-pro\",\n  \"hunyuan-standard\",\n  \"hunyuan-lite\",\n  \"hunyuan-role\",\n  \"hunyuan-functioncall\",\n  \"hunyuan-code\",\n  \"hunyuan-vision\",\n];\n\nconst moonshotModes = [\"moonshot-v1-8k\", \"moonshot-v1-32k\", \"moonshot-v1-128k\"];\n\nconst iflytekModels = [\n  \"general\",\n  \"generalv3\",\n  \"pro-128k\",\n  \"generalv3.5\",\n  \"4.0Ultra\",\n];\n\nconst deepseekModels = [\"deepseek-chat\", \"deepseek-coder\", \"deepseek-reasoner\"];\n\nconst xAIModes = [\n  \"grok-beta\",\n  \"grok-2\",\n  \"grok-2-1212\",\n  \"grok-2-latest\",\n  \"grok-vision-beta\",\n  \"grok-2-vision-1212\",\n  \"grok-2-vision\",\n  \"grok-2-vision-latest\",\n  \"grok-3-mini-fast-beta\",\n  \"grok-3-mini-fast\",\n  \"grok-3-mini-fast-latest\",\n  \"grok-3-mini-beta\",\n  \"grok-3-mini\",\n  \"grok-3-mini-latest\",\n  \"grok-3-fast-beta\",\n  \"grok-3-fast\",\n  \"grok-3-fast-latest\",\n  \"grok-3-beta\",\n  \"grok-3\",\n  \"grok-3-latest\",\n];\n\nconst chatglmModels = [\n  \"glm-4-plus\",\n  \"glm-4-0520\",\n  \"glm-4\",\n  \"glm-4-air\",\n  \"glm-4-airx\",\n  \"glm-4-long\",\n  \"glm-4-flashx\",\n  \"glm-4-flash\",\n  \"glm-4v-plus\",\n  \"glm-4v\",\n  \"glm-4v-flash\", // free\n  \"cogview-3-plus\",\n  \"cogview-3\",\n  \"cogview-3-flash\", // free\n  // 目前无法适配轮询任务\n  //   \"cogvideox\",\n  //   \"cogvideox-flash\", // free\n];\n\nconst siliconflowModels = [\n  \"Qwen/Qwen2.5-7B-Instruct\",\n  \"Qwen/Qwen2.5-72B-Instruct\",\n  \"deepseek-ai/DeepSeek-R1\",\n  \"deepseek-ai/DeepSeek-R1-Distill-Llama-70B\",\n  \"deepseek-ai/DeepSeek-R1-Distill-Llama-8B\",\n  \"deepseek-ai/DeepSeek-R1-Distill-Qwen-1.5B\",\n  \"deepseek-ai/DeepSeek-R1-Distill-Qwen-14B\",\n  \"deepseek-ai/DeepSeek-R1-Distill-Qwen-32B\",\n  \"deepseek-ai/DeepSeek-R1-Distill-Qwen-7B\",\n  \"deepseek-ai/DeepSeek-V3\",\n  \"meta-llama/Llama-3.3-70B-Instruct\",\n  \"THUDM/glm-4-9b-chat\",\n  \"Pro/deepseek-ai/DeepSeek-R1\",\n  \"Pro/deepseek-ai/DeepSeek-V3\",\n];\n\nlet seq = 1000; // 内置的模型序号生成器从1000开始\nexport const DEFAULT_MODELS = [\n  ...openaiModels.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++, // Global sequence sort(index)\n    provider: {\n      id: \"openai\",\n      providerName: \"OpenAI\",\n      providerType: \"openai\",\n      sorted: 1, // 这里是固定的，确保顺序与之前内置的版本一致\n    },\n  })),\n  ...openaiModels.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++,\n    provider: {\n      id: \"azure\",\n      providerName: \"Azure\",\n      providerType: \"azure\",\n      sorted: 2,\n    },\n  })),\n  ...googleModels.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++,\n    provider: {\n      id: \"google\",\n      providerName: \"Google\",\n      providerType: \"google\",\n      sorted: 3,\n    },\n  })),\n  ...anthropicModels.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++,\n    provider: {\n      id: \"anthropic\",\n      providerName: \"Anthropic\",\n      providerType: \"anthropic\",\n      sorted: 4,\n    },\n  })),\n  ...baiduModels.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++,\n    provider: {\n      id: \"baidu\",\n      providerName: \"Baidu\",\n      providerType: \"baidu\",\n      sorted: 5,\n    },\n  })),\n  ...bytedanceModels.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++,\n    provider: {\n      id: \"bytedance\",\n      providerName: \"ByteDance\",\n      providerType: \"bytedance\",\n      sorted: 6,\n    },\n  })),\n  ...alibabaModes.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++,\n    provider: {\n      id: \"alibaba\",\n      providerName: \"Alibaba\",\n      providerType: \"alibaba\",\n      sorted: 7,\n    },\n  })),\n  ...tencentModels.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++,\n    provider: {\n      id: \"tencent\",\n      providerName: \"Tencent\",\n      providerType: \"tencent\",\n      sorted: 8,\n    },\n  })),\n  ...moonshotModes.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++,\n    provider: {\n      id: \"moonshot\",\n      providerName: \"Moonshot\",\n      providerType: \"moonshot\",\n      sorted: 9,\n    },\n  })),\n  ...iflytekModels.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++,\n    provider: {\n      id: \"iflytek\",\n      providerName: \"Iflytek\",\n      providerType: \"iflytek\",\n      sorted: 10,\n    },\n  })),\n  ...xAIModes.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++,\n    provider: {\n      id: \"xai\",\n      providerName: \"XAI\",\n      providerType: \"xai\",\n      sorted: 11,\n    },\n  })),\n  ...chatglmModels.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++,\n    provider: {\n      id: \"chatglm\",\n      providerName: \"ChatGLM\",\n      providerType: \"chatglm\",\n      sorted: 12,\n    },\n  })),\n  ...deepseekModels.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++,\n    provider: {\n      id: \"deepseek\",\n      providerName: \"DeepSeek\",\n      providerType: \"deepseek\",\n      sorted: 13,\n    },\n  })),\n  ...siliconflowModels.map((name) => ({\n    name,\n    available: true,\n    sorted: seq++,\n    provider: {\n      id: \"siliconflow\",\n      providerName: \"SiliconFlow\",\n      providerType: \"siliconflow\",\n      sorted: 14,\n    },\n  })),\n] as const;\n\nexport const CHAT_PAGE_SIZE = 15;\nexport const MAX_RENDER_MSG_COUNT = 45;\n\n// some famous webdav endpoints\nexport const internalAllowedWebDavEndpoints = [\n  \"https://dav.jianguoyun.com/dav/\",\n  \"https://dav.dropdav.com/\",\n  \"https://dav.box.com/dav\",\n  \"https://nanao.teracloud.jp/dav/\",\n  \"https://bora.teracloud.jp/dav/\",\n  \"https://webdav.4shared.com/\",\n  \"https://dav.idrivesync.com\",\n  \"https://webdav.yandex.com\",\n  \"https://app.koofr.net/dav/Koofr\",\n];\n\nexport const DEFAULT_GA_ID = \"G-89WN60ZK2E\";\n\nexport const SAAS_CHAT_URL = \"https://nextchat.club\";\nexport const SAAS_CHAT_UTM_URL = \"https://nextchat.club?utm=github\";\n","import { DEFAULT_MODELS, ServiceProvider } from \"../constant\";\nimport { LLMModel } from \"../client/api\";\n\nconst CustomSeq = {\n  val: -1000, //To ensure the custom model located at front, start from -1000, refer to constant.ts\n  cache: new Map<string, number>(),\n  next: (id: string) => {\n    if (CustomSeq.cache.has(id)) {\n      return CustomSeq.cache.get(id) as number;\n    } else {\n      let seq = CustomSeq.val++;\n      CustomSeq.cache.set(id, seq);\n      return seq;\n    }\n  },\n};\n\nconst customProvider = (providerName: string) => ({\n  id: providerName.toLowerCase(),\n  providerName: providerName,\n  providerType: \"custom\",\n  sorted: CustomSeq.next(providerName),\n});\n\n/**\n * Sorts an array of models based on specified rules.\n *\n * First, sorted by provider; if the same, sorted by model\n */\nconst sortModelTable = (models: ReturnType<typeof collectModels>) =>\n  models.sort((a, b) => {\n    if (a.provider && b.provider) {\n      let cmp = a.provider.sorted - b.provider.sorted;\n      return cmp === 0 ? a.sorted - b.sorted : cmp;\n    } else {\n      return a.sorted - b.sorted;\n    }\n  });\n\n/**\n * get model name and provider from a formatted string,\n * e.g. `gpt-4@OpenAi` or `claude-3-5-sonnet@20240620@Google`\n * @param modelWithProvider model name with provider separated by last `@` char,\n * @returns [model, provider] tuple, if no `@` char found, provider is undefined\n */\nexport function getModelProvider(modelWithProvider: string): [string, string?] {\n  const [model, provider] = modelWithProvider.split(/@(?!.*@)/);\n  return [model, provider];\n}\n\nexport function collectModelTable(\n  models: readonly LLMModel[],\n  customModels: string,\n) {\n  const modelTable: Record<\n    string,\n    {\n      available: boolean;\n      name: string;\n      displayName: string;\n      sorted: number;\n      provider?: LLMModel[\"provider\"]; // Marked as optional\n      isDefault?: boolean;\n    }\n  > = {};\n\n  // default models\n  models.forEach((m) => {\n    // using <modelName>@<providerId> as fullName\n    modelTable[`${m.name}@${m?.provider?.id}`] = {\n      ...m,\n      displayName: m.name, // 'provider' is copied over if it exists\n    };\n  });\n\n  // server custom models\n  customModels\n    .split(\",\")\n    .filter((v) => !!v && v.length > 0)\n    .forEach((m) => {\n      const available = !m.startsWith(\"-\");\n      const nameConfig =\n        m.startsWith(\"+\") || m.startsWith(\"-\") ? m.slice(1) : m;\n      let [name, displayName] = nameConfig.split(\"=\");\n\n      // enable or disable all models\n      if (name === \"all\") {\n        Object.values(modelTable).forEach(\n          (model) => (model.available = available),\n        );\n      } else {\n        // 1. find model by name, and set available value\n        const [customModelName, customProviderName] = getModelProvider(name);\n        let count = 0;\n        for (const fullName in modelTable) {\n          const [modelName, providerName] = getModelProvider(fullName);\n          if (\n            customModelName == modelName &&\n            (customProviderName === undefined ||\n              customProviderName === providerName)\n          ) {\n            count += 1;\n            modelTable[fullName][\"available\"] = available;\n            // swap name and displayName for bytedance\n            if (providerName === \"bytedance\") {\n              [name, displayName] = [displayName, modelName];\n              modelTable[fullName][\"name\"] = name;\n            }\n            if (displayName) {\n              modelTable[fullName][\"displayName\"] = displayName;\n            }\n          }\n        }\n        // 2. if model not exists, create new model with available value\n        if (count === 0) {\n          let [customModelName, customProviderName] = getModelProvider(name);\n          const provider = customProvider(\n            customProviderName || customModelName,\n          );\n          // swap name and displayName for bytedance\n          if (displayName && provider.providerName == \"ByteDance\") {\n            [customModelName, displayName] = [displayName, customModelName];\n          }\n          modelTable[`${customModelName}@${provider?.id}`] = {\n            name: customModelName,\n            displayName: displayName || customModelName,\n            available,\n            provider, // Use optional chaining\n            sorted: CustomSeq.next(`${customModelName}@${provider?.id}`),\n          };\n        }\n      }\n    });\n\n  return modelTable;\n}\n\nexport function collectModelTableWithDefaultModel(\n  models: readonly LLMModel[],\n  customModels: string,\n  defaultModel: string,\n) {\n  let modelTable = collectModelTable(models, customModels);\n  if (defaultModel && defaultModel !== \"\") {\n    if (defaultModel.includes(\"@\")) {\n      if (defaultModel in modelTable) {\n        modelTable[defaultModel].isDefault = true;\n      }\n    } else {\n      for (const key of Object.keys(modelTable)) {\n        if (\n          modelTable[key].available &&\n          getModelProvider(key)[0] == defaultModel\n        ) {\n          modelTable[key].isDefault = true;\n          break;\n        }\n      }\n    }\n  }\n  return modelTable;\n}\n\n/**\n * Generate full model table.\n */\nexport function collectModels(\n  models: readonly LLMModel[],\n  customModels: string,\n) {\n  const modelTable = collectModelTable(models, customModels);\n  let allModels = Object.values(modelTable);\n\n  allModels = sortModelTable(allModels);\n\n  return allModels;\n}\n\nexport function collectModelsWithDefaultModel(\n  models: readonly LLMModel[],\n  customModels: string,\n  defaultModel: string,\n) {\n  const modelTable = collectModelTableWithDefaultModel(\n    models,\n    customModels,\n    defaultModel,\n  );\n  let allModels = Object.values(modelTable);\n\n  allModels = sortModelTable(allModels);\n\n  return allModels;\n}\n\nexport function isModelAvailableInServer(\n  customModels: string,\n  modelName: string,\n  providerName: string,\n) {\n  const fullName = `${modelName}@${providerName}`;\n  const modelTable = collectModelTable(DEFAULT_MODELS, customModels);\n  return modelTable[fullName]?.available === false;\n}\n\n/**\n * Check if the model name is a GPT-4 related model\n *\n * @param modelName The name of the model to check\n * @returns True if the model is a GPT-4 related model (excluding gpt-4o-mini)\n */\nexport function isGPT4Model(modelName: string): boolean {\n  return (\n    (modelName.startsWith(\"gpt-4\") ||\n      modelName.startsWith(\"chatgpt-4o\") ||\n      modelName.startsWith(\"o1\")) &&\n    !modelName.startsWith(\"gpt-4o-mini\")\n  );\n}\n\n/**\n * Checks if a model is not available on any of the specified providers in the server.\n *\n * @param {string} customModels - A string of custom models, comma-separated.\n * @param {string} modelName - The name of the model to check.\n * @param {string|string[]} providerNames - A string or array of provider names to check against.\n *\n * @returns {boolean} True if the model is not available on any of the specified providers, false otherwise.\n */\nexport function isModelNotavailableInServer(\n  customModels: string,\n  modelName: string,\n  providerNames: string | string[],\n): boolean {\n  // Check DISABLE_GPT4 environment variable\n  if (\n    process.env.DISABLE_GPT4 === \"1\" &&\n    isGPT4Model(modelName.toLowerCase())\n  ) {\n    return true;\n  }\n\n  const modelTable = collectModelTable(DEFAULT_MODELS, customModels);\n\n  const providerNamesArray = Array.isArray(providerNames)\n    ? providerNames\n    : [providerNames];\n  for (const providerName of providerNamesArray) {\n    // if model provider is bytedance, use model config name to check if not avaliable\n    if (providerName === ServiceProvider.ByteDance) {\n      return !Object.values(modelTable).filter((v) => v.name === modelName)?.[0]\n        ?.available;\n    }\n    const fullName = `${modelName}@${providerName.toLowerCase()}`;\n    if (modelTable?.[fullName]?.available === true) return false;\n  }\n  return true;\n}\n"],"names":["md5","DEFAULT_MODELS","DEFAULT_GA_ID","isGPT4Model","ACCESS_CODES","getAccessCodes","code","process","env","CODE","codes","split","filter","v","map","hash","trim","Set","e","getApiKey","keys","apiKeyEnvVar","apiKeys","randomIndex","Math","floor","random","length","apiKey","console","log","getServerSideConfig","Error","disableGPT4","DISABLE_GPT4","customModels","CUSTOM_MODELS","defaultModel","DEFAULT_MODEL","visionModels","VISION_MODELS","m","name","join","isStability","STABILITY_API_KEY","isAzure","AZURE_URL","isGoogle","GOOGLE_API_KEY","isAnthropic","ANTHROPIC_API_KEY","isTencent","TENCENT_API_KEY","isBaidu","BAIDU_API_KEY","isBytedance","BYTEDANCE_API_KEY","isAlibaba","ALIBABA_API_KEY","isMoonshot","MOONSHOT_API_KEY","isIflytek","IFLYTEK_API_KEY","isDeepSeek","DEEPSEEK_API_KEY","isXAI","XAI_API_KEY","isChatGLM","CHATGLM_API_KEY","isSiliconFlow","SILICONFLOW_API_KEY","allowedWebDavEndpoints","WHITE_WEBDAV_ENDPOINTS","baseUrl","BASE_URL","OPENAI_API_KEY","openaiOrgId","OPENAI_ORG_ID","stabilityUrl","STABILITY_URL","stabilityApiKey","azureUrl","azureApiKey","AZURE_API_KEY","azureApiVersion","AZURE_API_VERSION","googleApiKey","googleUrl","GOOGLE_URL","anthropicApiKey","anthropicApiVersion","ANTHROPIC_API_VERSION","anthropicUrl","ANTHROPIC_URL","baiduUrl","BAIDU_URL","baiduApiKey","baiduSecretKey","BAIDU_SECRET_KEY","bytedanceApiKey","bytedanceUrl","BYTEDANCE_URL","alibabaUrl","ALIBABA_URL","alibabaApiKey","tencentUrl","TENCENT_URL","tencentSecretKey","TENCENT_SECRET_KEY","tencentSecretId","TENCENT_SECRET_ID","moonshotUrl","MOONSHOT_URL","moonshotApiKey","iflytekUrl","IFLYTEK_URL","iflytekApiKey","iflytekApiSecret","IFLYTEK_API_SECRET","deepseekUrl","DEEPSEEK_URL","deepseekApiKey","xaiUrl","XAI_URL","xaiApiKey","chatglmUrl","CHATGLM_URL","chatglmApiKey","cloudflareAccountId","CLOUDFLARE_ACCOUNT_ID","cloudflareKVNamespaceId","CLOUDFLARE_KV_NAMESPACE_ID","cloudflareKVApiKey","CLOUDFLARE_KV_API_KEY","cloudflareKVTTL","CLOUDFLARE_KV_TTL","siliconFlowUrl","SILICONFLOW_URL","siliconFlowApiKey","gtmId","GTM_ID","gaId","GA_ID","needCode","size","proxyUrl","PROXY_URL","isVercel","VERCEL","hideUserApiKey","HIDE_USER_API_KEY","hideBalanceQuery","ENABLE_BALANCE_QUERY","disableFastLink","DISABLE_FAST_LINK","enableMcp","ENABLE_MCP","OWNER","REPO","REPO_URL","PLUGINS_REPO_URL","ISSUE_URL","UPDATE_URL","RELEASE_URL","FETCH_COMMIT_URL","FETCH_TAG_URL","RUNTIME_CONFIG_DOM","STABILITY_BASE_URL","OPENAI_BASE_URL","ANTHROPIC_BASE_URL","GEMINI_BASE_URL","BAIDU_BASE_URL","BAIDU_OATUH_URL","BYTEDANCE_BASE_URL","ALIBABA_BASE_URL","TENCENT_BASE_URL","MOONSHOT_BASE_URL","IFLYTEK_BASE_URL","DEEPSEEK_BASE_URL","XAI_BASE_URL","CHATGLM_BASE_URL","SILICONFLOW_BASE_URL","CACHE_URL_PREFIX","UPLOAD_URL","Path","ApiPath","SlotID","FileName","StoreKey","DEFAULT_SIDEBAR_WIDTH","MAX_SIDEBAR_WIDTH","MIN_SIDEBAR_WIDTH","NARROW_SIDEBAR_WIDTH","ACCESS_CODE_PREFIX","LAST_INPUT_KEY","UNFINISHED_INPUT","id","STORAGE_KEY","REQUEST_TIMEOUT_MS","REQUEST_TIMEOUT_MS_FOR_THINKING","EXPORT_MESSAGE_CLASS_NAME","ServiceProvider","GoogleSafetySettingsThreshold","ModelProvider","Stability","GeneratePath","ExampleEndpoint","Anthropic","ChatPath","ChatPath1","Vision","OpenaiPath","SpeechPath","ImagePath","UsagePath","SubsPath","ListModelPath","Azure","deployName","apiVersion","Google","modelName","Baidu","endpoint","ByteDance","Alibaba","includes","Tencent","Moonshot","Iflytek","DeepSeek","XAI","ChatGLM","VideoPath","SiliconFlow","DEFAULT_INPUT_TEMPLATE","DEFAULT_SYSTEM_TEMPLATE","MCP_TOOLS_TEMPLATE","MCP_SYSTEM_TEMPLATE","SUMMARIZE_MODEL","GEMINI_SUMMARIZE_MODEL","DEEPSEEK_SUMMARIZE_MODEL","KnowledgeCutOffDate","default","o1","DEFAULT_TTS_ENGINE","DEFAULT_TTS_ENGINES","DEFAULT_TTS_MODEL","DEFAULT_TTS_VOICE","DEFAULT_TTS_MODELS","DEFAULT_TTS_VOICES","VISION_MODEL_REGEXES","EXCLUDE_VISION_MODEL_REGEXES","openaiModels","googleModels","anthropicModels","baiduModels","bytedanceModels","alibabaModes","tencentModels","moonshotModes","iflytekModels","deepseekModels","xAIModes","chatglmModels","siliconflowModels","seq","available","sorted","provider","providerName","providerType","CHAT_PAGE_SIZE","MAX_RENDER_MSG_COUNT","internalAllowedWebDavEndpoints","SAAS_CHAT_URL","SAAS_CHAT_UTM_URL","CustomSeq","val","cache","Map","next","has","get","set","customProvider","toLowerCase","sortModelTable","models","sort","a","b","cmp","getModelProvider","modelWithProvider","model","collectModelTable","modelTable","forEach","displayName","startsWith","nameConfig","slice","Object","values","customModelName","customProviderName","count","fullName","undefined","collectModelTableWithDefaultModel","isDefault","key","collectModels","allModels","collectModelsWithDefaultModel","isModelAvailableInServer","isModelNotavailableInServer","providerNames","providerNamesArray","Array","isArray"],"sourceRoot":""}