(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[481],{2067:e=>{"use strict";e.exports=require("node:async_hooks")},6195:e=>{"use strict";e.exports=require("node:buffer")},4119:(e,t,o)=>{"use strict";o.r(t),o.d(t,{ComponentMod:()=>k,default:()=>N});var a={};o.r(a),o.d(a,{GET:()=>_,OPTIONS:()=>m,PUT:()=>A,runtime:()=>E});var r={};o.r(r),o.d(r,{headerHooks:()=>T,originalPathname:()=>O,patchFetch:()=>L,requestAsyncStorage:()=>y,routeModule:()=>b,serverHooks:()=>I,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>f});var n=o(7875),s=o(8381),i=o(2251),p=o(9845),d=o(572),c=o(7736);let l=(0,o(9579).g)(),u=[...c.NU,...l.allowedWebDevEndpoints].filter(e=>!!e.trim()),v=e=>{try{return new URL(e)}catch(e){return null}};async function h(e,{params:t}){let o;if("OPTIONS"===e.method)return d.xk.json({body:"OK"},{status:200});let a=c.Uf,r=`${a}/backup.json`,n=new URL(e.url),s=n.searchParams.get("endpoint"),i=n.searchParams.get("proxy_method")||e.method;if(!s||!u.some(e=>{let t=v(e),o=v(s);return o&&o.hostname===t?.hostname&&o.pathname.startsWith(t.pathname)}))return d.xk.json({error:!0,msg:"Invalid endpoint"},{status:400});s?.endsWith("/")||(s+="/");let p=t.path.join("/"),l=`${s}${p}`;if("MKCOL"!==i&&"GET"!==i&&"PUT"!==i||"MKCOL"===i&&!l.endsWith(a)||"GET"===i&&!l.endsWith(r)||"PUT"===i&&!l.endsWith(r))return d.xk.json({error:!0,msg:"you are not allowed to request "+l},{status:403});let h=i||e.method,A=["get","head"].includes(h?.toLowerCase()??""),_={headers:{authorization:e.headers.get("authorization")??""},body:A?null:e.body,redirect:"manual",method:h,duplex:"half"};try{o=await fetch(l,_)}finally{console.log("[Any Proxy]",l,{method:h},{status:o?.status,statusText:o?.statusText})}return o}let A=h,_=h,m=h,E="edge",b=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/webdav/[...path]/route",pathname:"/api/webdav/[...path]",filename:"route",bundlePath:"app/api/webdav/[...path]/route"},resolvedPagePath:"/Volumes/D/github/ChatGPT-Next-Web/app/api/webdav/[...path]/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:y,staticGenerationAsyncStorage:g,serverHooks:I,headerHooks:T,staticGenerationBailout:f}=b,O="/api/webdav/[...path]/route";function L(){return(0,p.XH)({serverHooks:I,staticGenerationAsyncStorage:g})}let k=r,N=n.a.wrap(b)},9579:(e,t,o)=>{"use strict";o.d(t,{g:()=>p});var a=o(5045),r=o.n(a),n=o(7736);let s=function(){let e=process.env.CODE;try{let t=(e?.split(",")??[]).filter(e=>!!e).map(e=>r().hash(e.trim()));return new Set(t)}catch(e){return new Set}}();function i(e){let t=(e??"").split(",").map(e=>e.trim()),o=Math.floor(Math.random()*t.length),a=t[o];return a&&console.log(`[Server Config] using ${o+1} of ${t.length} api key - ${a}`),a}let p=()=>{if("undefined"==typeof process)throw Error("[Server Config] you are importing a nodejs-only module outside of nodejs");let e=!!process.env.DISABLE_GPT4,t=process.env.CUSTOM_MODELS??"",o=process.env.DEFAULT_MODEL??"";e&&(t&&(t+=","),t+=n.Fv.filter(e=>e.name.startsWith("gpt-4")&&!e.name.startsWith("gpt-4o-mini")).map(e=>"-"+e.name).join(","),o.startsWith("gpt-4")&&!o.startsWith("gpt-4o-mini")&&(o=""));let a=!!process.env.STABILITY_API_KEY,r=!!process.env.AZURE_URL,p=!!process.env.GOOGLE_API_KEY,d=!!process.env.ANTHROPIC_API_KEY,c=!!process.env.TENCENT_API_KEY,l=!!process.env.BAIDU_API_KEY,u=!!process.env.BYTEDANCE_API_KEY,v=!!process.env.ALIBABA_API_KEY,h=!!process.env.MOONSHOT_API_KEY,A=!!process.env.IFLYTEK_API_KEY,_=(process.env.WHITE_WEBDEV_ENDPOINTS??"").split(",");return{baseUrl:process.env.BASE_URL,apiKey:i(process.env.OPENAI_API_KEY),openaiOrgId:process.env.OPENAI_ORG_ID,isStability:a,stabilityUrl:process.env.STABILITY_URL,stabilityApiKey:i(process.env.STABILITY_API_KEY),isAzure:r,azureUrl:process.env.AZURE_URL,azureApiKey:i(process.env.AZURE_API_KEY),azureApiVersion:process.env.AZURE_API_VERSION,isGoogle:p,googleApiKey:i(process.env.GOOGLE_API_KEY),googleUrl:process.env.GOOGLE_URL,isAnthropic:d,anthropicApiKey:i(process.env.ANTHROPIC_API_KEY),anthropicApiVersion:process.env.ANTHROPIC_API_VERSION,anthropicUrl:process.env.ANTHROPIC_URL,isBaidu:l,baiduUrl:process.env.BAIDU_URL,baiduApiKey:i(process.env.BAIDU_API_KEY),baiduSecretKey:process.env.BAIDU_SECRET_KEY,isBytedance:u,bytedanceApiKey:i(process.env.BYTEDANCE_API_KEY),bytedanceUrl:process.env.BYTEDANCE_URL,isAlibaba:v,alibabaUrl:process.env.ALIBABA_URL,alibabaApiKey:i(process.env.ALIBABA_API_KEY),isTencent:c,tencentUrl:process.env.TENCENT_URL,tencentSecretKey:i(process.env.TENCENT_SECRET_KEY),tencentSecretId:process.env.TENCENT_SECRET_ID,isMoonshot:h,moonshotUrl:process.env.MOONSHOT_URL,moonshotApiKey:i(process.env.MOONSHOT_API_KEY),isIflytek:A,iflytekUrl:process.env.IFLYTEK_URL,iflytekApiKey:process.env.IFLYTEK_API_KEY,iflytekApiSecret:process.env.IFLYTEK_API_SECRET,cloudflareAccountId:process.env.CLOUDFLARE_ACCOUNT_ID,cloudflareKVNamespaceId:process.env.CLOUDFLARE_KV_NAMESPACE_ID,cloudflareKVApiKey:i(process.env.CLOUDFLARE_KV_API_KEY),cloudflareKVTTL:process.env.CLOUDFLARE_KV_TTL,gtmId:process.env.GTM_ID,gaId:process.env.GA_ID||n.Mq,needCode:s.size>0,code:process.env.CODE,codes:s,proxyUrl:process.env.PROXY_URL,isVercel:!!process.env.VERCEL,hideUserApiKey:!!process.env.HIDE_USER_API_KEY,disableGPT4:e,hideBalanceQuery:!process.env.ENABLE_BALANCE_QUERY,disableFastLink:!!process.env.DISABLE_FAST_LINK,customModels:t,defaultModel:o,allowedWebDevEndpoints:_}}},7736:(e,t,o)=>{"use strict";var a,r,n,s,i,p,d,c,l;o.d(t,{Bi:()=>v,FR:()=>m,Fv:()=>P,Hm:()=>A,L:()=>r,Mo:()=>y,Mq:()=>U,NU:()=>K,TW:()=>T,UT:()=>d,Uf:()=>f,YU:()=>O,bP:()=>g,ik:()=>E,k8:()=>l,mX:()=>L,n9:()=>_,pG:()=>I,rT:()=>u,x5:()=>b,y3:()=>h});let u="https://api.stability.ai",v="https://api.openai.com",h="https://api.anthropic.com",A="https://generativelanguage.googleapis.com/",_="https://aip.baidubce.com",m=`${_}/oauth/2.0/token`,E="https://ark.cn-beijing.volces.com",b="https://dashscope.aliyuncs.com/api/",y="https://hunyuan.tencentcloudapi.com",g="https://api.moonshot.cn",I="https://spark-api-open.xf-yun.com";!function(e){e.Home="/",e.Chat="/chat",e.Settings="/settings",e.NewChat="/new-chat",e.Masks="/masks",e.Auth="/auth",e.Sd="/sd",e.SdNew="/sd-new",e.Artifacts="/artifacts",e.SearchChat="/search-chat"}(a||(a={})),function(e){e.Cors="",e.Azure="/api/azure",e.OpenAI="/api/openai",e.Anthropic="/api/anthropic",e.Google="/api/google",e.Baidu="/api/baidu",e.ByteDance="/api/bytedance",e.Alibaba="/api/alibaba",e.Tencent="/api/tencent",e.Moonshot="/api/moonshot",e.Iflytek="/api/iflytek",e.Stability="/api/stability",e.Artifacts="/api/artifacts"}(r||(r={})),function(e){e.AppBody="app-body",e.CustomModel="custom-model"}(n||(n={})),function(e){e.Masks="masks.json",e.Prompts="prompts.json"}(s||(s={})),(i||(i={})).Artifacts="artifacts",function(e){e.Chat="chat-next-web-store",e.Access="access-control",e.Config="app-config",e.Mask="mask-store",e.Prompt="prompt-store",e.Update="chat-update",e.Sync="sync",e.SdList="sd-list"}(p||(p={}));let T="nk-",f="chatgpt-next-web";!function(e){e.OpenAI="OpenAI",e.Azure="Azure",e.Google="Google",e.Anthropic="Anthropic",e.Baidu="Baidu",e.ByteDance="ByteDance",e.Alibaba="Alibaba",e.Tencent="Tencent",e.Moonshot="Moonshot",e.Stability="Stability",e.Iflytek="Iflytek"}(d||(d={})),function(e){e.BLOCK_NONE="BLOCK_NONE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE"}(c||(c={})),function(e){e.Stability="Stability",e.GPT="GPT",e.GeminiPro="GeminiPro",e.Claude="Claude",e.Ernie="Ernie",e.Doubao="Doubao",e.Qwen="Qwen",e.Hunyuan="Hunyuan",e.Moonshot="Moonshot",e.Iflytek="Iflytek"}(l||(l={}));let O={ChatPath:"v1/messages",ChatPath1:"v1/complete",ExampleEndpoint:"https://api.anthropic.com",Vision:"2023-06-01"},L={ChatPath:"v1/chat/completions",ImagePath:"v1/images/generations",UsagePath:"dashboard/billing/usage",SubsPath:"dashboard/billing/subscription",ListModelPath:"v1/models"},k=["gpt-3.5-turbo","gpt-3.5-turbo-1106","gpt-3.5-turbo-0125","gpt-4","gpt-4-0613","gpt-4-32k","gpt-4-32k-0613","gpt-4-turbo","gpt-4-turbo-preview","gpt-4o","gpt-4o-2024-05-13","gpt-4o-2024-08-06","gpt-4o-mini","gpt-4o-mini-2024-07-18","gpt-4-vision-preview","gpt-4-turbo-2024-04-09","gpt-4-1106-preview","dall-e-3"],N=1e3,P=[...k.map(e=>({name:e,available:!0,sorted:N++,provider:{id:"openai",providerName:"OpenAI",providerType:"openai",sorted:1}})),...k.map(e=>({name:e,available:!0,sorted:N++,provider:{id:"azure",providerName:"Azure",providerType:"azure",sorted:2}})),...["gemini-1.0-pro","gemini-1.5-pro-latest","gemini-1.5-flash-latest","gemini-pro-vision"].map(e=>({name:e,available:!0,sorted:N++,provider:{id:"google",providerName:"Google",providerType:"google",sorted:3}})),...["claude-instant-1.2","claude-2.0","claude-2.1","claude-3-sonnet-20240229","claude-3-opus-20240229","claude-3-haiku-20240307","claude-3-5-sonnet-20240620"].map(e=>({name:e,available:!0,sorted:N++,provider:{id:"anthropic",providerName:"Anthropic",providerType:"anthropic",sorted:4}})),...["ernie-4.0-turbo-8k","ernie-4.0-8k","ernie-4.0-8k-preview","ernie-4.0-8k-preview-0518","ernie-4.0-8k-latest","ernie-3.5-8k","ernie-3.5-8k-0205","ernie-speed-128k","ernie-speed-8k","ernie-lite-8k","ernie-tiny-8k"].map(e=>({name:e,available:!0,sorted:N++,provider:{id:"baidu",providerName:"Baidu",providerType:"baidu",sorted:5}})),...["Doubao-lite-4k","Doubao-lite-32k","Doubao-lite-128k","Doubao-pro-4k","Doubao-pro-32k","Doubao-pro-128k"].map(e=>({name:e,available:!0,sorted:N++,provider:{id:"bytedance",providerName:"ByteDance",providerType:"bytedance",sorted:6}})),...["qwen-turbo","qwen-plus","qwen-max","qwen-max-0428","qwen-max-0403","qwen-max-0107","qwen-max-longcontext"].map(e=>({name:e,available:!0,sorted:N++,provider:{id:"alibaba",providerName:"Alibaba",providerType:"alibaba",sorted:7}})),...["hunyuan-pro","hunyuan-standard","hunyuan-lite","hunyuan-role","hunyuan-functioncall","hunyuan-code","hunyuan-vision"].map(e=>({name:e,available:!0,sorted:N++,provider:{id:"tencent",providerName:"Tencent",providerType:"tencent",sorted:8}})),...["moonshot-v1-8k","moonshot-v1-32k","moonshot-v1-128k"].map(e=>({name:e,available:!0,sorted:N++,provider:{id:"moonshot",providerName:"Moonshot",providerType:"moonshot",sorted:9}})),...["general","generalv3","pro-128k","generalv3.5","4.0Ultra"].map(e=>({name:e,available:!0,sorted:N++,provider:{id:"iflytek",providerName:"Iflytek",providerType:"iflytek",sorted:10}}))],K=["https://dav.jianguoyun.com/dav/","https://dav.dropdav.com/","https://dav.box.com/dav","https://nanao.teracloud.jp/dav/","https://bora.teracloud.jp/dav/","https://webdav.4shared.com/","https://dav.idrivesync.com","https://webdav.yandex.com","https://app.koofr.net/dav/Koofr"],U="G-89WN60ZK2E"}},e=>{var t=t=>e(e.s=t);e.O(0,[297,45],()=>t(4119));var o=e.O();(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_app/api/webdav/[...path]/route"]=o}]);
//# sourceMappingURL=route.js.map